"use strict";(self.webpackChunkmy_admin=self.webpackChunkmy_admin||[]).push([[76],{5800:function(e,n,t){t.d(n,{Z:function(){return h}});var a=t(1642),r=t(5193),s=t(8447),i=t(4554),l=t(3400),o=t(890),c=t(4721),d=t(9823),u=t(184),p=(0,a.Z)({"close-icon":"PopupModel_close-icon__toNv0","children-container":"PopupModel_children-container__fbG7T"}),m={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70vw",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,maxHeight:"85vh",p:4};var h=function(e){return m.width=(0,r.Z)("(min-width:700px)")?"70vw":"95vw",(0,u.jsx)(s.Z,{open:e.open,children:(0,u.jsxs)(i.Z,{sx:m,children:[(0,u.jsx)(l.Z,{className:p.closeIcon,onClick:null===e||void 0===e?void 0:e.handelModelClose,children:(0,u.jsx)(d.Z,{})}),e.title&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.Z,{variant:"h5",component:"h2",textAlign:"center",children:(0,u.jsx)("strong",{children:e.title})}),(0,u.jsx)(c.Z,{variant:"middle",sx:{marginY:2}})]}),(0,u.jsx)("div",{className:p.childrenContainer,children:(0,u.jsx)("div",{style:{marginRight:10},children:e.children})})]})})}},9076:function(e,n,t){t.r(n),t.d(n,{default:function(){return Rn}});var a=t(4165),r=t(1413),s=t(5861),i=t(9439),l=t(2791),o=t(7689),c=t(3855),d=t(4768),u=t(2785),p=t(4895),m=t(3433),h=t(1642),f=t(1087),x=t(4349),j=t(8610),v=t(6133),b=t(7196),Z=t(3466),A=t(68),y=t(9953),N=t(4554),g=t(4721),C=t(9673),_=t(5818),w=t(3721),S=t(3767),P=t(3400),k=t(9472),I=t(493),E=t(5021),T=t(890),R=t(6278),O=t(9900),F=t(4294),V=t(5403),D=t(9823),L=t(585),U=t(3518),M=t(5860),q=t(2419),B=t(3950),W=t(872),H=t(1131),K=t(4942),Y=t(6934),z=t(2426),J=t.n(z),G=t(8745),Q=t(6548),X=t(5855),$=t(9281),ee=t(5527),ne=t(9836),te=t(6890),ae=t(3382),re=t(184),se=(0,h.Z)({"table-container":"TableView_table-container__ONbVZ","no-data-found":"TableView_no-data-found__7KN7I","load-more-container":"TableView_load-more-container__KRG5d","data-row":"TableView_data-row__zXZ-n"}),ie=(0,Y.ZP)(G.Z)((function(e){var n,t=e.theme;return n={},(0,K.Z)(n,"&.".concat(Q.Z.head),{backgroundColor:t.palette.common.black,color:t.palette.common.white}),(0,K.Z)(n,"&.".concat(Q.Z.body),{fontSize:14}),n})),le=(0,Y.ZP)(X.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));function oe(e,n){if("NEW_DATA"===n.type){var t=n.data.length>100;return t&&n.data.pop(),(0,j.Z)(n.data)?{data:(0,m.Z)(e.data),loadMore:!1}:{data:[].concat((0,m.Z)(e.data),(0,m.Z)(n.data)),loadMore:t}}if("RESET"===n.type)return e}var ce=function(e){var n=(0,c.I0)(),t=(0,u.T)(),r=(0,l.useReducer)(oe,{data:[],loadMore:!1}),o=(0,i.Z)(r,2),d=o[0],p=o[1];function m(){return h.apply(this,arguments)}function h(){return(h=(0,s.Z)((0,a.Z)().mark((function r(){var s,i,l,o,c,u;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=new URL(window.location),i=e.baseURL+"/view",l=i+s.search,(o={}).total_count=d.data.length,a.prev=5,a.next=8,t({url:l,headers:o});case 8:c=a.sent,p({type:"NEW_DATA",data:c}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(5),n(x.K7.showAlert({message:null!==(u=a.t0.msg)&&void 0!==u?u:"Failed to fetch booking form data!",title:"Request Failed!",severity:"error"}));case 15:case"end":return a.stop()}}),r,null,[[5,12]])})))).apply(this,arguments)}return(0,l.useEffect)((function(){(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}),[]),(0,re.jsxs)("div",{className:se.tableContainer,children:[(0,re.jsxs)($.Z,{component:ee.Z,children:[(0,re.jsxs)(ne.Z,{sx:{minWidth:700},"aria-label":"customized table",children:[(0,re.jsx)(te.Z,{children:(0,re.jsxs)(X.Z,{children:[(0,re.jsx)(ie,{align:"left",children:"Index"}),(0,re.jsx)(ie,{children:"Full Name"}),(0,re.jsx)(ie,{align:"center",children:"Email"}),(0,re.jsx)(ie,{align:"center",children:"Mobile Number"}),(0,re.jsx)(ie,{align:"center",children:"Project Name"}),(0,re.jsx)(ie,{align:"center",children:"Project Unit Name"}),(0,re.jsx)(ie,{align:"center",children:"Status"}),(0,re.jsx)(ie,{align:"center",children:"Submitted"}),(0,re.jsx)(ie,{align:"center",children:"Created Date Time"}),(0,re.jsx)(ie,{align:"center",children:"Created By"})]})}),(0,re.jsx)(ae.Z,{children:d.data.map((function(n,t){return(0,re.jsxs)(le,{className:se.dataRow,children:[(0,re.jsx)(ie,{align:"center",children:++t}),(0,re.jsx)(ie,{component:"th",scope:"row",children:(0,re.jsx)(f.rU,{to:"".concat(e.baseURL,"/").concat(n.id,"/view"),children:n.fullName})}),(0,re.jsx)(ie,{align:"center",children:n.emailId}),(0,re.jsx)(ie,{align:"center",children:n.mobileNumber}),(0,re.jsx)(ie,{align:"center",children:n.Project.name}),(0,re.jsx)(ie,{align:"center",children:n.ProjectUnit.name}),(0,re.jsx)(ie,{align:"center",children:n.status}),(0,re.jsx)(ie,{align:"center",children:n.submittedByUser&&(0,re.jsx)(W.Z,{})}),(0,re.jsx)(ie,{align:"center",children:"Invalid Date"!==J()(n.createdAt)&&J()(n.createdAt).format("DD/MM/YYYY HH:MM A")}),(0,re.jsx)(ie,{align:"center",children:(0,re.jsxs)(f.rU,{to:"/profile/".concat(n.BookingFormCreatedBy.id,"/info"),children:[" ",n.BookingFormCreatedBy.name]})})]},n.id)}))})]}),(0,j.Z)(d.data)&&(0,re.jsx)("h3",{className:se.noDataFound,children:"No Data Found"})]}),d.loadMore&&(0,re.jsx)(ee.Z,{className:se.loadMoreContainer,onClick:m,children:(0,re.jsx)(F.Z,{variant:"outlined",children:"Load More"})})]})},de=t(7391),ue=t(9644),pe=t(4070),me=t(3238),he=t(388),fe=t(5187),xe=t(8996),je=t(1009),ve={"view-container":"ViewAll_view-container__yELjO","tool-bar":"ViewAll_tool-bar__f3byj",right:"ViewAll_right__W9W8t","search-conatiner":"ViewAll_search-conatiner__e2jVS",icon:"ViewAll_icon__KTlA1",input:"ViewAll_input__qeJzf",active:"ViewAll_active__0wmK5","searchbar-animation-in":"ViewAll_searchbar-animation-in__fNwbe",drawer:"ViewAll_drawer__a-noz","filter-actions":"ViewAll_filter-actions__QMsjq","filters-list":"ViewAll_filters-list__eK8NN",filter:"ViewAll_filter__Caf+r"},be=(0,h.Z)(ve);function Ze(e,n){var t=JSON.parse(JSON.stringify(e));return"NEW"===n.type?n.data.length>1?(t.dataList=n.data,t.currentDataIndex=0,t.showIterator=!0,t.totalDataLength=n.data.length,t):(t.dataList=n.data,t.currentDataIndex=0,t.showIterator=!1,t.totalDataLength=n.data.length,t):"NEXT"===n.type?t.currentDataIndex+1>=t.totalDataLength?(t.currentDataIndex=0,t):(++t.currentDataIndex,t):"PREV"===n.type?t.currentDataIndex-1<0?(t.currentDataIndex=t.totalDataLength-1,t):(--t.currentDataIndex,t):void 0}var Ae=function(e){var n=e.styles,t=(0,c.I0)(),r=(0,u.T)(),o=(0,l.useState)("phone"),d=(0,i.Z)(o,2),p=d[0],m=d[1],h=(0,l.useReducer)(Ze,{dataList:null,currentDataIndex:null,showIterator:!1,totalDataLength:null}),f=(0,i.Z)(h,2),v=f[0],b=f[1];function Z(){return(Z=(0,s.Z)((0,a.Z)().mark((function n(s){var i,l,o,c;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s.preventDefault(),i=s.target.elements.userInfo.value,l="".concat(e.baseURL,"/get-leadsquare-data?getby=").concat(p,"&userinfo=").concat(i),!(0,j.Z)(i)){n.next=6;break}return n.abrupt("return",t(x.K7.showAlert({message:"User info cannot be empty",title:"Invalid Request!",severity:"warning"})));case 6:return n.next=8,r({url:l});case 8:if(o=n.sent,!(0,j.Z)(o)){n.next=11;break}return n.abrupt("return",t(x.K7.showAlert({message:"",title:"No Records Found!",severity:"error"})));case 11:b({type:"NEW",data:o}),e.handelFetchedUserData(o[0]),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),t(x.K7.showAlert({message:null!==(c=n.t0.msg)&&void 0!==c?c:"Failed to fetch user data!",title:"Request Failed!",severity:"error"}));case 18:case"end":return n.stop()}}),n,null,[[0,15]])})))).apply(this,arguments)}function y(e){return N.apply(this,arguments)}function N(){return(N=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b({type:n});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,l.useEffect)((function(){null!==v.currentDataIndex&&0!==v.currentDataIndex&&e.handelFetchedUserData(v.dataList[v.currentDataIndex])}),[v.currentDataIndex]),(0,re.jsxs)("form",{action:"#",method:"POST",autoComplete:"off",onSubmit:function(e){return Z.apply(this,arguments)},children:[(0,re.jsxs)(T.Z,{variant:"h6",component:"h6",textAlign:"left",sx:{marginBottom:2},children:["Fetch Data From Leadsquare",(0,re.jsx)(T.Z,{variant:"caption",display:"inline-block",children:"\xa0(optional)"})]}),(0,re.jsx)("div",{className:n.inputGroup,children:(0,re.jsxs)(me.Z,{color:"primary",exclusive:!0,value:p,onChange:function(e,n){return m(n)},children:[(0,re.jsx)(he.Z,{value:"phone",children:"Phone"}),(0,re.jsx)(he.Z,{value:"emailaddress",children:"Email"}),(0,re.jsx)(he.Z,{value:"id",children:"Leadsquare Id"})]})}),(0,re.jsxs)("div",{className:n.inputGroup,style:{marginTop:16},children:[(0,re.jsx)(de.Z,{className:n.input,label:"User Info",name:"userInfo",required:!0}),(0,re.jsx)("span",{className:be.icon,style:{backgroundColor:"transparent"},children:(0,re.jsx)(A.Z,{title:"Sync Data",children:(0,re.jsx)(P.Z,{type:"submit",sx:{bgcolor:"#5c5c5c14"},size:"large",children:(0,re.jsx)(fe.Z,{})})})})]}),v.showIterator&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(T.Z,{variant:"body2",component:"p",textAlign:"center",color:"tomato",sx:{marginY:2},children:"Multiple user records were discovered! Use the buttons below to navigate the data and find the relevant information."}),(0,re.jsxs)("div",{className:"".concat(n.inputGroup," ").concat(n.fetchedDataIterator),children:[(0,re.jsx)("span",{className:be.icon,style:{backgroundColor:"transparent"},children:(0,re.jsx)(A.Z,{title:"View Previous Data",children:(0,re.jsx)(P.Z,{size:"large",sx:{bgcolor:"#5c5c5c14"},onClick:function(e){return y("PREV")},children:(0,re.jsx)(je.Z,{})})})}),(0,re.jsxs)(T.Z,{variant:"overline",component:"p",textAlign:"center",display:"inline",sx:{marginY:2},children:[v.currentDataIndex+1," of ",v.totalDataLength]}),(0,re.jsx)("span",{className:be.icon,style:{backgroundColor:"transparent"},children:(0,re.jsx)(A.Z,{title:"View Next Data",children:(0,re.jsx)(P.Z,{size:"large",sx:{bgcolor:"#5c5c5c14"},onClick:function(e){return y("NEXT")},children:(0,re.jsx)(xe.Z,{})})})})]})]})]})},ye=t(9596),Ne=t(9885),ge=t(451),Ce=t(5800);var _e=function(e){var n=["cp","c p","channel partner"],t=e.styles,o=(0,l.useState)({sourceWithSubSource:[],currentSubSourceForSource:[]}),d=(0,i.Z)(o,2),p=d[0],m=d[1],h=(0,c.I0)(),f=(0,u.T)(),v=(0,l.useState)(!1),b=(0,i.Z)(v,2),Z=b[0],A=b[1],y=(0,l.useState)([]),N=(0,i.Z)(y,2),g=N[0],C=N[1];function _(n,t){e.setUserData((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,K.Z)({},n,t))}))}return(0,l.useEffect)((function(){(0,s.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/source/retrive-source-with-subsource",e.next=4,f({url:"/source/retrive-source-with-subsource"});case 4:n=e.sent,m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{sourceWithSubSource:n})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h(x.K7.showAlert({message:null!==(t=e.t0.msg)&&void 0!==t?t:"Failed to fetch source data!",title:"Request Failed!",severity:"error"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]),(0,l.useEffect)((function(){var t,a;if(!(0,j.Z)(p.sourceWithSubSource))if((0,j.Z)(null===(t=e.userData)||void 0===t||null===(a=t.source)||void 0===a?void 0:a.id))m((function(e){return(0,r.Z)((0,r.Z)({},e),{},{currentSubSourceForSource:[]})}));else{var s=p.sourceWithSubSource.filter((function(n){return n.id===e.userData.source.id}));if(n.includes(e.userData.source.label)&&(0,j.Z)(g)){f({url:"/channel-partner/view-all"}).then((function(e){var n=e.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{label:e.name})}));C(n)})).catch((function(e){var n;h(x.K7.showAlert({message:null!==(n=e.msg)&&void 0!==n?n:"Failed to fetch source data!",title:"Request Failed!",severity:"error"}))}))}m((function(e){var n;return(0,r.Z)((0,r.Z)({},e),{},{currentSubSourceForSource:(null===(n=s[0])||void 0===n?void 0:n.subsources)||null})}))}}),[e.userData.source,p.sourceWithSubSource]),(0,l.useEffect)((function(){var t,a;A(n.includes(null===(t=e.userData.source)||void 0===t||null===(a=t.label)||void 0===a?void 0:a.toLowerCase()))}),[e.userData.source]),(0,re.jsxs)("div",{className:t.inputGroup,children:[(0,re.jsx)(ue.Z,{className:t.input,disablePortal:!0,options:p.sourceWithSubSource.map((function(e){return{id:e.id,label:e.label}})),value:e.userData.source,onChange:function(e,n){return _("source",n)},isOptionEqualToValue:function(e,n){return e.id===n.id},loadingText:"Fetching source infromation",renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Source",required:!0}))}}),(0,re.jsx)(ue.Z,{className:t.input,disablePortal:!0,options:p.currentSubSourceForSource,value:e.userData.subSource,onChange:function(e,n){return _("subSource",n)},isOptionEqualToValue:function(e,n){return e.id===n.id},noOptionsText:"Select a source to fetch subsource information",loadingText:"Fetching subsource information",renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Sub Source"}))}}),Z&&(0,re.jsx)(ue.Z,{className:t.input,disablePortal:!0,options:g,value:e.userData.channelpartner,onChange:function(e,n){return _("channelpartner",n)},isOptionEqualToValue:function(e,n){return e.id===n.id},renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Channel Partner",required:!0}))}})]})},we=(0,Y.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),Se=(0,h.Z)({"input-group":"CreateNew_input-group__W1fKb","fetched-data-iterator":"CreateNew_fetched-data-iterator__3wWvV",input:"CreateNew_input__EJurn"});var Pe=function(e){var n,t,o=(0,c.I0)(),d=(0,u.T)(),p=(0,l.useState)({projects:[],projectUnits:[]}),m=(0,i.Z)(p,2),h=m[0],f=m[1],v=(0,l.useState)({fullName:"",emailId:"",mobileNumber:"",project:"",projectUnit:"",source:"",subSource:"",channelPartner:"",priceSheet:{}}),b=(0,i.Z)(v,2),Z=b[0],A=b[1];function y(e){var n=e.target.name,t=e.target.value;if("file"===e.target.type){var a=e.target.files[0],s=a.type,i=a.name;if("application/pdf"!==s)return o(x.K7.showAlert({message:"Only PDF file types are supported!",title:"Request Failed!",severity:"error"}));o(ge.IB.setDisplayLoader({from:"PDF Loader",state:!0}));var l=new FileReader;return l.readAsDataURL(a),void(l.onload=function(){var e=l.result.split(",")[1];A((function(n){return(0,r.Z)((0,r.Z)({},n),{},{priceSheet:{fileName:i,type:s,data:e}})})),o(ge.IB.setDisplayLoader({from:"PDF Loader",state:!1}))})}A((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,K.Z)({},n,t))}))}function N(){return(N=(0,s.Z)((0,a.Z)().mark((function n(t){var r,s,i,l,c;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.preventDefault(),r=e.baseURL+"/create-bookingform","POST",s={"content-type":"application/json"},i=JSON.stringify(Z),n.next=8,d({url:r,method:"POST",headers:s,body:i});case 8:l=n.sent,console.log(l),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),o(x.K7.showAlert({message:null!==(c=n.t0.msg)&&void 0!==c?c:"Failed to create bookingform!",title:"Request Failed!",severity:"error"}));case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))).apply(this,arguments)}function C(n){A({fullName:"",emailId:"",mobileNumber:"",project:"",projectUnit:"",source:"",subSource:"",channelPartner:"",priceSheet:""}),e.onCloseEvent&&e.onCloseEvent()}return(0,l.useEffect)((function(){e.open&&(0,s.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/projects/list-all",e.next=4,d({url:"/projects/list-all"});case 4:n=e.sent,f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{projects:n.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{label:e.name})}))})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o(x.K7.showAlert({message:null!==(t=e.t0.msg)&&void 0!==t?t:"Failed to fetch projects data!",title:"Request Failed!",severity:"error"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[e.open]),(0,l.useEffect)((function(){(0,s.Z)((0,a.Z)().mark((function e(){var n,t,s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==Z&&void 0!==Z&&null!==(n=Z.project)&&void 0!==n&&n.id){e.next=3;break}return e.abrupt("return");case 3:return t="/projects/".concat(Z.project.id,"/fetch-units"),e.next=6,d({url:t});case 6:s=e.sent,f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{projectUnits:s.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{label:e.name})}))})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),o(x.K7.showAlert({message:null!==(i=e.t0.msg)&&void 0!==i?i:"Failed to fetch projects unit data!",title:"Request Failed!",severity:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[Z.project]),(0,re.jsxs)(Ce.Z,{title:"Create New Booking Form",open:e.open,handelModelClose:C,children:[(0,re.jsx)(Ae,{baseURL:e.baseURL,styles:Se,handelFetchedUserData:function(e){var n=(((0,j.Z)(e.FirstName)?"":e.FirstName)+" "+((0,j.Z)(e.LastName)?"":e.LastName)).trim(),t=(0,j.Z)(e.EmailAddress)?"":e.EmailAddress,a=(0,j.Z)(e.Phone)?"":e.Phone,r=(0,j.Z)(e.mx_Project_Name)?"":e.mx_Project_Name,s=(0,j.Z)(e.Source)?"":e.Source,i=(0,j.Z)(e.mx_Sub_Source)?"":e.mx_Sub_Source,l=(0,j.Z)(e.mx_Channel_Partner_Name)?"":e.mx_Channel_Partner_Name;A({fullName:n,emailId:t,mobileNumber:a,project:r,projectUnit:"",source:s,subSource:i,channelPartner:l,priceSheet:{}})}}),(0,re.jsx)(g.Z,{variant:"middle",sx:{marginY:2}}),(0,re.jsxs)("form",{autoComplete:"false",method:"POST",action:"#",onSubmit:function(e){return N.apply(this,arguments)},children:[(0,re.jsx)(T.Z,{variant:"h6",component:"h6",textAlign:"left",sx:{marginBottom:2},children:"Personal Information"}),(0,re.jsxs)("div",{className:Se.inputGroup,children:[(0,re.jsx)(de.Z,{className:Se.input,label:"Full Name",name:"fullName",value:Z.fullName,onChange:y,required:!0}),(0,re.jsx)(de.Z,{className:Se.input,label:"Email Id",name:"emailId",value:Z.emailId,onChange:y,required:!0}),(0,re.jsx)(de.Z,{className:Se.input,label:"Mobile Number",name:"mobileNumber",value:Z.mobileNumber,onChange:y})]}),(0,re.jsx)(g.Z,{variant:"middle",sx:{marginY:2}}),(0,re.jsxs)("div",{className:Se.inputContainer,children:[(0,re.jsx)(T.Z,{variant:"h6",component:"h6",textAlign:"left",sx:{marginBottom:2},children:"Project Information"}),(0,re.jsxs)("div",{className:Se.inputGroup,children:[(0,re.jsx)(ue.Z,{className:Se.input,disablePortal:!0,options:h.projects,value:Z.project,onChange:function(e,n){A((function(e){return(0,r.Z)((0,r.Z)({},e),{},{project:n,projectUnit:null})})),n||f((function(e){return(0,r.Z)((0,r.Z)({},e),{},{projectUnits:[]})}))},isOptionEqualToValue:function(e,n){return e.label===n},noOptionsText:"Fetching Projects Data..",renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Projects",required:!0}))}}),(0,re.jsx)(ue.Z,{className:Se.input,disablePortal:!0,options:h.projectUnits,value:Z.projectUnit,onChange:function(e,n){return A((function(e){return(0,r.Z)((0,r.Z)({},e),{},{projectUnit:n})}))},isOptionEqualToValue:function(e,n){return e.id===n.id},noOptionsText:"Please select a project to show its related units",renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Project Units",required:!0}))}}),(0,re.jsxs)(F.Z,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:(0,re.jsx)(ye.Z,{}),children:["Upload Price Sheet",(0,re.jsx)(we,{onChange:y,type:"file",accept:"application/pdf",required:!0})]})]})]}),(null===(n=Z.priceSheet)||void 0===n?void 0:n.data)&&(0,re.jsx)("div",{className:Se.inputContainer,children:(0,re.jsxs)(pe.Z,{severity:"info",icon:(0,re.jsx)(Ne.Z,{}),sx:{textAlign:"center",margin:"auto"},className:Se.input,children:['File "',null===(t=Z.priceSheet)||void 0===t?void 0:t.fileName,'" has been selected!']})}),(0,re.jsx)(g.Z,{variant:"middle",sx:{marginY:2}}),(0,re.jsxs)("div",{className:Se.inputContainer,children:[(0,re.jsx)(T.Z,{variant:"h6",component:"h6",textAlign:"left",sx:{marginBottom:2},children:"Source Information"}),(0,re.jsx)(_e,{styles:Se,userData:Z,setUserData:A})]}),(0,re.jsx)(g.Z,{variant:"middle",sx:{marginY:2}}),(0,re.jsxs)("div",{className:Se.inputGroup,children:[(0,re.jsx)(F.Z,{variant:"outlined",onClick:C,children:"Cancel"}),(0,re.jsx)(F.Z,{variant:"contained",type:"submit",children:"Create"})]})]})]})},ke=(0,h.Z)(ve);function Ie(e,n){var t=(0,r.Z)({},e);return"INIT"===n.type&&(n.search&&(t.search=n.search.trim()),n.status&&(t.status=new Set(n.status.split(";").map((function(e){return e.trim()})))),n.years&&(t.years=new Set(n.years.split(";").map((function(e){return e.trim()})))),n.projects&&(t.projects=new Set(n.projects.split(";").map((function(e){return e.trim()})))),n.submittedByUser&&(t.submittedByUser=new Set(n.submittedByUser.split(";").map((function(e){return e.trim()}))))),"PROCESS_FILTER"===n.type&&("search"===n.filterType?t[n.filterType]=n.value:(t[n.filterType].has(n.value)?t[n.filterType].delete(n.value):t[n.filterType].add(n.value),t.filterStatus.filterApplied=!1)),"RESET"===n.type?{search:e.search,status:new Set,years:new Set,projects:new Set,submittedByUser:new Set,filterStatus:{displayBadge:!1,filterApplied:!1}}:("FILTER_APPLIED"===n.type&&(t.filterStatus.filterApplied=!0),t.filterStatus.displayBadge=t.status.size>0||t.years.size>0||t.projects.size>0||t.submittedByUser.size>0,t)}var Ee=function(e){var n=(0,l.useState)(null),t=(0,i.Z)(n,2),r=t[0],p=t[1],h=(0,l.useState)(!1),K=(0,i.Z)(h,2),Y=K[0],z=K[1],J=(0,l.useState)(0),G=(0,i.Z)(J,2),Q=G[0],X=G[1],$=(0,l.useReducer)(Ie,{search:null,status:new Set,years:new Set,projects:new Set,submittedByUser:new Set,filterStatus:{displayBadge:!1,filterApplied:!0}}),ee=(0,i.Z)($,2),ne=ee[0],te=ee[1],ae=(0,l.useState)([]),se=(0,i.Z)(ae,2),ie=se[0],le=se[1],oe=(0,f.lr)(),de=(0,i.Z)(oe,1)[0],ue=(0,c.I0)(),pe=(0,u.T)(),me=(0,l.useRef)(),he=(0,l.useState)(!1),fe=(0,i.Z)(he,2),xe=fe[0],je=fe[1],ve=(0,v.Z)("view"),be=(0,i.Z)(ve,1)[0],Ze=(0,o.s0)(),Ae=(0,c.v9)((function(e){return e[d.qM]})).appPermissions.isEditable;function ye(e,n){te({type:"PROCESS_FILTER",filterType:e,value:n})}function Ne(){var e=function(e){var n=new URL(window.location),t=new URL(n.origin+n.pathname);return Object.keys(e).forEach((function(n){if("filterStatus"!==n&&!(null===e[n]||e[n].size<=0)&&("search"!==n||!(0,j.Z)(e[n]))){var a="search"===n?e[n]:(0,m.Z)(e[n]).join(";");t.searchParams.set(n,a)}})),t}(ne);te({type:"FILTER_APPLIED"}),window.history.pushState({},"",e),X((function(e){return++e}))}return be||Ze("/error",{state:{status:403,msg:"Your not allowed to access 'View' tab"}}),(0,l.useEffect)((function(){try{(0,s.Z)((0,a.Z)().mark((function n(){var t,r,s,i,l,o;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="INIT",r=de.get("status"),s=de.get("years"),i=de.get("projects"),l=de.get("submittedByUser"),n.next=7,pe({url:e.baseURL+"/user-handled-projects"});case 7:o=n.sent,le(o),te({type:t,status:r,years:s,projects:i,submittedByUser:l});case 10:case"end":return n.stop()}}),n)})))()}catch(n){ue(x.K7.showAlert({message:"Failed to fetch projects list!",title:"Request Failed!",severity:"error"}))}}),[]),(0,l.useEffect)((function(){if(null!==ne.search){var e=setTimeout(Ne,500);return function(){return clearTimeout(e)}}}),[ne.search]),r&&setTimeout((function(){return me.current.focus()}),100),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{className:ke.viewContainer,children:[(0,re.jsxs)("div",{className:ke.toolBar,children:[(0,re.jsx)("div",{className:ke.left,children:(0,re.jsx)(S.d,{onClickAway:function(){r&&p((function(e){return!1}))},children:(0,re.jsxs)("div",{className:ke.searchConatiner,children:[(0,re.jsx)("span",{className:ke.icon,onClick:function(e){return p((function(e){return!e}))},children:(0,re.jsx)(P.Z,{children:r?(0,re.jsx)(D.Z,{}):(0,re.jsx)(k.Z,{variant:"dot",color:"success",invisible:(0,j.Z)(ne.search),children:(0,re.jsx)(V.Z,{})})})}),(0,re.jsx)("div",{className:"".concat(ke.input," ").concat(null!==r?r?ke.active:ke.notActive:""),children:(0,re.jsx)(b.Z,{endAdornment:(0,re.jsx)(Z.Z,{position:"end",children:(0,re.jsx)(A.Z,{title:"Search will be compared against Full Name, Mobile No, Email Id and Alternate Mobile No.",children:(0,re.jsx)(M.Z,{fontSize:"small"})})}),placeholder:"Search",size:"small",type:"search",autoFocus:!0,inputRef:me,onChange:function(e){return ye("search",e.target.value)}})})]})})}),(0,re.jsxs)("div",{className:ke.right,children:[(0,re.jsx)("span",{className:ke.icon,children:(0,re.jsx)(A.Z,{title:"Refresh",children:(0,re.jsx)(P.Z,{onClick:function(e){return X((function(e){return++e}))},children:(0,re.jsx)(B.Z,{})})})}),(0,re.jsx)("span",{className:ke.icon,children:(0,re.jsx)(A.Z,{title:"Filters",children:(0,re.jsx)(P.Z,{onClick:function(e){return z(!0)},children:(0,re.jsx)(k.Z,{variant:"dot",color:ne.filterStatus.filterApplied?"success":"warning",invisible:!ne.filterStatus.displayBadge,children:(0,re.jsx)(L.Z,{})})})})}),(0,re.jsx)("span",{className:ke.icon,children:(0,re.jsx)(A.Z,{title:"Download",children:(0,re.jsx)(P.Z,{disabled:!0,children:(0,re.jsx)(U.Z,{})})})}),Ae&&(0,re.jsx)("span",{className:ke.icon,children:(0,re.jsx)(A.Z,{title:"Create New",children:(0,re.jsx)(P.Z,{onClick:function(e){return je(!0)},children:(0,re.jsx)(q.Z,{})})})})]})]}),(0,re.jsx)(ce,{baseURL:e.baseURL},Q)]}),(0,re.jsxs)(y.ZP,{className:ke.drawer,anchor:"right",open:Y,onClose:function(e){return z(!1)},children:[(0,re.jsx)("main",{children:(0,re.jsx)(N.Z,{sx:{width:350},role:"presentation",children:(0,re.jsxs)(I.Z,{className:ke.filtersList,children:[(0,re.jsx)(E.ZP,{children:(0,re.jsx)("h3",{children:"Filters"})}),(0,re.jsx)(g.Z,{variant:"middle"}),(0,re.jsx)(E.ZP,{className:ke.filter,children:(0,re.jsxs)(C.Z,{defaultExpanded:!0,children:[(0,re.jsx)(_.Z,{expandIcon:(0,re.jsx)(H.Z,{}),children:(0,re.jsx)(T.Z,{children:"Status"})}),(0,re.jsx)(w.Z,{children:(0,re.jsx)(I.Z,{sx:{width:"100%",bgcolor:"background.paper",maxHeight:200,overflow:"auto"},component:"nav",children:["Approved","Rejected","Pending"].map((function(e){var n;return(0,re.jsxs)(R.Z,{onClick:function(n){return ye("status",e)},children:[(0,re.jsx)(O.Z,{primary:e}),(null===(n=ne.status)||void 0===n?void 0:n.has(e))&&(0,re.jsx)(W.Z,{})]},e)}))})})]})}),(0,re.jsx)(E.ZP,{className:ke.filter,children:(0,re.jsxs)(C.Z,{defaultExpanded:ne.years.size>0,children:[(0,re.jsx)(_.Z,{expandIcon:(0,re.jsx)(H.Z,{}),children:(0,re.jsx)(T.Z,{children:"Years"})}),(0,re.jsx)(w.Z,{children:(0,re.jsx)(I.Z,{sx:{width:"100%",bgcolor:"background.paper",maxHeight:400,overflow:"auto"},component:"nav",children:(0,m.Z)(Array((new Date).getFullYear()+1-1995)).map((function(e,n){var t,a=(new Date).getFullYear()-n;return(0,re.jsxs)(R.Z,{onClick:function(e){return ye("years","".concat(a))},children:[(0,re.jsx)(O.Z,{primary:a}),(null===(t=ne.years)||void 0===t?void 0:t.has("".concat(a)))&&(0,re.jsx)(W.Z,{})]},a)}))})})]})}),(0,re.jsx)(E.ZP,{className:ke.filter,children:(0,re.jsxs)(C.Z,{disabled:ie.length<=1,defaultExpanded:ne.projects.size>1,children:[(0,re.jsx)(_.Z,{expandIcon:(0,re.jsx)(H.Z,{}),children:(0,re.jsx)(T.Z,{children:"Projects"})}),(0,re.jsx)(w.Z,{children:(0,re.jsx)(I.Z,{sx:{width:"100%",bgcolor:"background.paper",maxHeight:350,overflow:"auto"},component:"nav",children:ie.map((function(e){var n;return(0,re.jsxs)(R.Z,{disabled:ie.length<=1,onClick:function(n){return ye("projects",e.id)},children:[(0,re.jsx)(O.Z,{primary:e.name}),(null===(n=ne.projects)||void 0===n?void 0:n.has(e.id))&&(0,re.jsx)(W.Z,{})]},e.id)}))})})]})}),(0,re.jsx)(E.ZP,{className:ke.filter,children:(0,re.jsxs)(C.Z,{defaultExpanded:ne.submittedByUser.size>0,children:[(0,re.jsx)(_.Z,{expandIcon:(0,re.jsx)(H.Z,{}),children:(0,re.jsx)(T.Z,{children:"Submitted By User"})}),(0,re.jsx)(w.Z,{children:(0,re.jsx)(I.Z,{sx:{width:"100%",bgcolor:"background.paper",maxHeight:200,overflow:"auto"},component:"nav",children:[{key:"Submitted",value:"true"},{key:"Not Submited",value:"false"}].map((function(e){var n;return(0,re.jsxs)(R.Z,{onClick:function(n){return ye("submittedByUser",e.value)},children:[(0,re.jsx)(O.Z,{primary:e.key}),(null===(n=ne.submittedByUser)||void 0===n?void 0:n.has(e.value))&&(0,re.jsx)(W.Z,{})]},e.key)}))})})]})})]})})}),(0,re.jsxs)("footer",{children:[(0,re.jsx)(g.Z,{}),(0,re.jsxs)("div",{className:ke.filterActions,children:[(0,re.jsx)(F.Z,{variant:"outlined",onClick:function(e){return te({type:"RESET"})},children:"Reset"}),(0,re.jsx)(F.Z,{variant:"contained",onClick:Ne,disabled:ne.filterStatus.filterApplied,children:"Apply"})]})]})]}),(0,re.jsx)(Pe,{baseURL:e.baseURL,open:xe,onCloseEvent:function(e){return je(!1)}})]})},Te=t(7762);function Re(e){var n=function(e){for(var n=1024,t=atob(e),a=t.length,r=Math.ceil(a/n),s=new Array(r),i=0;i<r;++i){for(var l=i*n,o=Math.min(l+n,a),c=new Array(o-l),d=l,u=0;d<o;++u,++d)c[u]=t[d].charCodeAt(0);s[i]=new Uint8Array(c)}return new Blob(s,{type:"application/pdf"})}(e);if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,"pdfBase64.pdf");else{var t=URL.createObjectURL(n);window.open(t)}}var Oe=t(8096),Fe=t(4925),Ve=t(8406),De=t(3786),Le=t(9012),Ue=t(4989),Me=t(9174),qe=t(8447),Be=t(1652),We=t(3975),He=t(556),Ke=t(3272),Ye=t(8946),ze=t(22),Je=t(6909),Ge=t(6317),Qe=t(911),Xe=t(2065),$e=t(2898),en=t(7247),nn=t(645),tn=t(8384),an=t(6711),rn=(0,Y.ZP)((function(e){return(0,re.jsx)(Qe.Z,(0,r.Z)({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))}))((function(e){var n=e.theme;return{"& .MuiPaper-root":{borderRadius:6,marginTop:n.spacing(1),minWidth:180,color:"light"===n.palette.mode?"rgb(55, 65, 81)":n.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:n.palette.text.secondary,marginRight:n.spacing(1.5)},"&:active":{backgroundColor:(0,Xe.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}}}}));var sn=function(e){var n=e.styles,t=(0,o.UO)().bookingFormId,p=(0,c.I0)(),m=(0,l.useState)([]),h=(0,i.Z)(m,2),f=h[0],v=h[1],b=(0,l.useState)({menuAnchor:null,modalType:null}),Z=(0,i.Z)(b,2),A=Z[0],y=Z[1],N=(0,l.useState)({id:"",note:"",requriesApproval:!1}),C=(0,i.Z)(N,2),_=C[0],w=C[1],S=(0,u.T)(),k=(0,c.v9)((function(e){return e[d.qM].appPermissions})).noteApprover,I=(0,l.useState)(null),E=(0,i.Z)(I,2),T=E[0],R=E[1];function O(e){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)((0,a.Z)().mark((function n(r){var s,i,l,o,c,d,u,m,h,f,j,b,Z,A,y,N,g,C,w;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=e.baseURL+"/"+t+"/note",i="POST",l={"Content-Type":"application/json"},"NEW"!==r){n.next=12;break}return o=s+"?type=NEW",c=JSON.stringify({note:_.note,requriesApproval:_.requriesApproval}),n.next=9,S({url:o,method:i,body:c,headers:l});case 9:return(d=n.sent).notes&&v(d.notes),n.abrupt("return",p(x.K7.showAlert({message:"Record created",title:"Request Completed!",severity:"success"})));case 12:if("EDIT"!==r){n.next=20;break}return u=s+"?type=EDIT",m=JSON.stringify({id:_.id,note:_.note,requriesApproval:_.requriesApproval}),n.next=17,S({url:u,method:i,body:m,headers:l});case 17:return(h=n.sent).notes&&v(h.notes),n.abrupt("return",p(x.K7.showAlert({message:"Record updated!",title:"Request Completed!",severity:"success"})));case 20:if("DELETE"!==r){n.next=28;break}return f=s+"?type=DELETE",j=JSON.stringify({id:_.id}),n.next=25,S({url:f,body:j,method:i,headers:l});case 25:return(b=n.sent).notes&&v(b.notes),n.abrupt("return",p(x.K7.showAlert({message:"Record deleted!",title:"Request Completed!",severity:"success"})));case 28:if("NOTE_APPROVE"!==r&&"NOTE_REJECT"!==r){n.next=39;break}return Z=e.baseURL+"/"+t+"/note-processing",A="NOTE_APPROVE"===r?"APPROVE":"REJECT",y=_.id,N=JSON.stringify({noteId:y,status:A}),g={"Content-Type":"application/json"},n.next=36,S({url:Z,body:N,method:i,headers:g});case 36:return(C=n.sent).notes&&v(C.notes),n.abrupt("return",p(x.K7.showAlert({message:C.msg||"Record processed!",title:"Request Completed!",severity:"success"})));case 39:p(x.K7.showAlert({message:"Type mismatch",title:"Request Failed!",severity:"warning"})),n.next=45;break;case 42:n.prev=42,n.t0=n.catch(0),p(x.K7.showAlert({message:null!==(w=n.t0.msg)&&void 0!==w?w:"Failed to process request",title:"Request Failed!",severity:"error"}));case 45:case"end":return n.stop()}}),n,null,[[0,42]])})))).apply(this,arguments)}function L(e){var n=e.type,t=e.id,a=e.event;if("MENU_OPEN"===n){var s=f.filter((function(e){return e.id===t}))[0];if(!s)return alert("Failed to find note");y({menuAnchor:a.currentTarget,modalType:null}),w({id:s.id,note:s.note,requriesApproval:!!s.approval})}if("MODAL_OPEN_IN_EDIT"===n&&y({menuAnchor:null,modalType:"EDIT"}),"MODAL_OPEN_IN_NEW"===n&&(w({id:"",note:"",requriesApproval:!1}),y({menuAnchor:null,modalType:"NEW"})),"CLOSE"===n&&(y({menuAnchor:null,modalType:null}),w({id:"",note:"",requriesApproval:!1})),"PROCESS_SUBMISSION"===n&&(O(A.modalType),y({menuAnchor:null,modalType:null}),w({id:"",note:"",requriesApproval:!1})),"DELETE_RECORD"===n&&(O("DELETE"),y({menuAnchor:null,modalType:null}),w({id:"",note:"",requriesApproval:!1})),"TRACK_NOTE_UPDATE"===n){var i=a.target.name,l="note"===i?a.target.value:a.target.checked;w((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,K.Z)({},i,l))}))}"NOTE_APPROVE"!==n&&"NOTE_REJECT"!==n||(O(n),y({menuAnchor:null,modalType:null}))}return(0,l.useEffect)((function(){v(e.bookingFormData.notes)}),[e.bookingFormData]),(0,l.useEffect)((function(){R(e.isEditable)}),[e.isEditable]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{className:"".concat(n.container," ").concat(n.bfNotes),children:(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:n.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Notes"]})}),(0,re.jsxs)("div",{className:n.data,style:{justifyContent:"flex-start"},children:[(0,j.Z)(f)&&(0,re.jsx)("p",{style:{textAlign:"center",width:"100%"},children:"No notes found!"}),!(0,j.Z)(f)&&f.map((function(e,t){return(0,re.jsxs)("div",{className:n.noteContainer,children:[(0,re.jsxs)("div",{children:[t>0&&f[t-1].from!==e.from&&(0,re.jsx)("div",{className:n.noteFrom,children:(0,re.jsx)("h3",{children:e.from})}),t<=0&&(0,re.jsx)("div",{className:n.noteFrom,children:(0,re.jsx)("h3",{children:e.from})}),(0,re.jsxs)("div",{className:n.note,children:[e.approval&&(0,re.jsxs)("div",{className:n.approvalInfo,children:[null===e.approval.status&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Je.Z,{className:n.icon}),(0,re.jsx)("p",{children:"Approval Pending"})]}),!0===e.approval.status&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(Ye.Z,{className:n.icon}),(0,re.jsxs)("p",{children:["Approved By ",e.approval.updatedBy]})]}),!1===e.approval.status&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(ze.Z,{className:n.icon}),(0,re.jsxs)("p",{children:["Rejected By ",e.approval.updatedBy]})]})]}),(0,re.jsx)("p",{children:e.note})]})]}),(0,re.jsx)("div",{children:(0,re.jsx)(P.Z,{onClick:function(n){return L({type:"MENU_OPEN",id:e.id,event:n})},children:(0,re.jsx)($e.Z,{})})})]},e.id)})),(0,re.jsxs)(rn,{id:"notes-menu",anchorEl:A.menuAnchor,open:Boolean(A.menuAnchor),onClose:function(e){return L({type:"CLOSE"})},children:[k&&_.requriesApproval&&[(0,re.jsxs)(De.Z,{onClick:function(e){return L({type:"NOTE_APPROVE"})},children:[(0,re.jsx)(tn.Z,{}),"Approve"]},"MenuItem_Approve"),(0,re.jsxs)(De.Z,{onClick:function(e){return L({type:"NOTE_REJECT"})},children:[(0,re.jsx)(an.Z,{}),"Reject"]},"MenuItem_Reject"),(0,re.jsx)(g.Z,{},"MenuItem_Divider")],(0,re.jsxs)(De.Z,{onClick:function(e){return L({type:"MODAL_OPEN_IN_EDIT"})},children:[(0,re.jsx)(nn.Z,{}),"Edit"]}),(0,re.jsxs)(De.Z,{onClick:function(e){return L({type:"DELETE_RECORD"})},children:[(0,re.jsx)(en.Z,{}),"Delete"]})]})]}),T&&(0,re.jsx)("div",{className:n.data,style:{justifyContent:"flex-end"},children:(0,re.jsx)(P.Z,{style:{backgroundColor:"#90caf9"},onClick:function(e){return L({type:"MODAL_OPEN_IN_NEW"})},children:(0,re.jsx)(q.Z,{sx:{color:"#000",fontSize:30}})})})]})}),(0,re.jsx)(qe.Z,{open:Boolean(A.modalType),keepMounted:!1,onClose:function(e){return L({type:"CLOSE"})},children:(0,re.jsxs)("div",{className:n.container+" "+n.modalNoteConatiner,children:[(0,re.jsx)(D.Z,{className:n.closeIcon,onClick:function(e){return L({type:"CLOSE"})}}),(0,re.jsxs)("div",{className:n.noteInputsContainer,children:[(0,re.jsx)(de.Z,{className:n.noteTextField,label:"Note",placeholder:"Add a note",name:"note",fullWidth:!0,multiline:!0,minRows:2,maxRows:20,disabled:!T,value:_.note,required:!0,onChange:function(e){return L({type:"TRACK_NOTE_UPDATE",event:e})}}),(0,re.jsx)(Ue.Z,{className:n.inputContainer,control:(0,re.jsx)(Me.Z,{}),label:"Requires Approval?",labelPlacement:"start",name:"requriesApproval",disabled:!T,sx:{justifyContent:"flex-end"},checked:_.requriesApproval,onChange:function(e){return L({type:"TRACK_NOTE_UPDATE",event:e})}}),T&&(0,re.jsxs)("div",{className:n.noteActionsContainer,children:[(0,re.jsx)(F.Z,{"data-mode":"MODAL","data-type":"CLOSE",onClick:function(e){return L({type:"CLOSE"})},children:"Cancel"}),(0,re.jsx)(F.Z,{variant:"contained",onClick:function(e){return L({type:"PROCESS_SUBMISSION"})},children:"EDIT"===A.modalType?"Update":"Submit"})]})]})]})})]})},ln=t(5172),on=t(3746),cn=t(5423),dn=t(3939),un=t(1328),pn=t(7831);var mn=function(e){var n=e.styles,t=(0,u.T)(),r=(0,l.useState)(),p=(0,i.Z)(r,2),m=p[0],h=p[1],f=(0,l.useState)(),j=(0,i.Z)(f,2),v=j[0],b=j[1],Z=(0,c.I0)(),A=(0,o.UO)().bookingFormId,y=(0,c.v9)((function(e){return e[d.qM]})).employee.role;function N(e){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)((0,a.Z)().mark((function n(r){var s,i,l,o,c,d,u;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(C(),n.prev=1,s=e.baseURL+"/"+A+"/bookingform-processing",i="POST",l={"Content-Type":"application/json"},"RE_PROCESS"!==r&&"REJECT"!==r||m){n.next=7;break}return n.abrupt("return",h(r));case 7:return o=JSON.stringify({status:r,note:v}),n.next=10,t({url:s,method:i,headers:l,body:o});case 10:c=n.sent,e.setReloadComp((function(e){return!e})),Z(x.K7.showAlert({message:c.msg||"Request processed",title:"Request Submitted",severity:"success"})),n.next=20;break;case 15:if(n.prev=15,n.t0=n.catch(1),412!==n.t0.status){n.next=19;break}return n.abrupt("return",Z(x.K7.showAlert({message:null!==(u=n.t0.msg)&&void 0!==u?u:"Failed to submit request!",title:"Request Failed!",severity:"warning",autoclose:!1})));case 19:Z(x.K7.showAlert({message:null!==(d=n.t0.msg)&&void 0!==d?d:"Failed to submit request!",title:"Request Failed!",severity:"error"}));case 20:case"end":return n.stop()}}),n,null,[[1,15]])})))).apply(this,arguments)}function C(){h(),b()}return(e.isApprover||!1===e.isApprover)&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{className:"".concat(n.container," ").concat(n.bfActions),children:(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:n.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Form Actions"]})}),(0,re.jsxs)("div",{className:n.data,children:["Project Head"!==y&&(0,re.jsx)(F.Z,{variant:"outlined",endIcon:(0,re.jsx)(dn.Z,{}),disabled:!e.isApprover,onClick:function(e){return N("RE_PROCESS")},children:"Re-Process"}),(0,re.jsx)(F.Z,{variant:"outlined",endIcon:(0,re.jsx)(un.Z,{}),disabled:!e.isApprover,onClick:function(e){return N("REJECT")},children:"Reject"}),(0,re.jsx)(F.Z,{variant:"contained",endIcon:(0,re.jsx)(pn.Z,{}),disabled:!e.isApprover,onClick:function(e){return N("APPROVE")},children:"Approve"})]})]})}),(0,re.jsx)(qe.Z,{open:Boolean(m),keepMounted:!1,onClose:C,children:(0,re.jsxs)("div",{className:n.container+" "+n.modalNoteConatiner,children:[(0,re.jsx)(D.Z,{className:n.closeIcon,onClick:C}),(0,re.jsxs)("div",{className:n.noteInputsContainer,children:[(0,re.jsx)("p",{children:(0,re.jsxs)("strong",{children:["Would you like to add a note for ","RE_PROCESS"===m?"re-processing":"rejection","?"]})}),(0,re.jsx)(de.Z,{className:n.noteTextField,placeholder:"Add a note",name:"note",value:v,fullWidth:!0,multiline:!0,minRows:2,maxRows:15,onChange:function(e){return b(e.target.value)}}),(0,re.jsxs)("div",{className:n.noteActionsContainer,children:[(0,re.jsx)(F.Z,{"data-mode":"MODAL","data-type":"CLOSE",onClick:C,children:"Cancel"}),(0,re.jsx)(F.Z,{variant:"contained",onClick:function(e){return N(m)},children:"Submit"})]})]})]})})]})},hn=t(1248),fn=t(8817);var xn=function(e){var n,t,a,r,s,i,l,o,c,d,u=e.styles,p=new Intl.NumberFormat("en-IN",{currency:"INR"});return(0,re.jsxs)("div",{className:u.container+" "+u.quickViewConatiner,children:[(0,re.jsxs)("div",{children:[(0,re.jsx)("h3",{children:"Project"}),(0,re.jsx)("p",{children:null===e||void 0===e||null===(n=e.bookingFormData)||void 0===n||null===(t=n.Project)||void 0===t?void 0:t.name})]}),(0,re.jsx)(g.Z,{orientation:"vertical",flexItem:!0}),(0,re.jsxs)("div",{children:[(0,re.jsx)("h3",{children:"Project Unit"}),(0,re.jsx)("p",{children:null===e||void 0===e||null===(a=e.bookingFormData)||void 0===a||null===(r=a.ProjectUnit)||void 0===r?void 0:r.name})]}),(0,re.jsx)(g.Z,{orientation:"vertical",flexItem:!0}),(0,re.jsxs)("div",{children:[(0,re.jsx)("h3",{children:"Current Unit Price"}),(0,re.jsx)("p",{style:{textAlign:"center"},children:null!==e&&void 0!==e&&null!==(s=e.bookingFormData)&&void 0!==s&&s.currentUnitPrice?p.format(e.bookingFormData.currentUnitPrice):"-----"})]}),(0,re.jsx)(g.Z,{orientation:"vertical",flexItem:!0}),(0,re.jsxs)("div",{children:[(0,re.jsx)("h3",{children:"Discount (\u20b9)"}),(0,re.jsx)("p",{style:{textAlign:"center"},children:null!==e&&void 0!==e&&null!==(i=e.bookingFormData)&&void 0!==i&&i.discount?p.format(e.bookingFormData.discount):"-----"})]}),(0,re.jsx)(g.Z,{orientation:"vertical",flexItem:!0}),(0,re.jsxs)("div",{children:[(0,re.jsx)("h3",{children:"After Discount (\u20b9)"}),(0,re.jsx)("p",{style:{textAlign:"center"},children:null!==e&&void 0!==e&&null!==(l=e.bookingFormData)&&void 0!==l&&l.currentUnitPrice&&null!==e&&void 0!==e&&null!==(o=e.bookingFormData)&&void 0!==o&&o.discount?p.format((null===e||void 0===e?void 0:e.bookingFormData.currentUnitPrice)-(null===e||void 0===e?void 0:e.bookingFormData.discount)):"-----"})]}),(0,re.jsx)(g.Z,{orientation:"vertical",flexItem:!0}),(0,re.jsxs)("div",{children:[(0,re.jsx)("h3",{children:"Realization Price"}),(0,re.jsx)("p",{style:{textAlign:"center"},children:null!==e&&void 0!==e&&null!==(c=e.bookingFormData)&&void 0!==c&&c.totalCost&&null!==e&&void 0!==e&&null!==(d=e.bookingFormData)&&void 0!==d&&d.sqft?p.format((null===e||void 0===e?void 0:e.bookingFormData.totalCost)/(null===e||void 0===e?void 0:e.bookingFormData.sqft)):"-----"})]})]})},jn=t(533),vn=t(194),bn=t(1428);var Zn=function(e){var n=(0,l.useState)({icon:(0,re.jsx)(vn.Z,{}),copy:!0,title:"Copy Link"}),t=(0,i.Z)(n,2),a=t[0],r=t[1],s=(0,l.useMemo)((function(){return"http://localhost:3001?f="+new URL(window.location).pathname.split("/")[2]}),[]);return(0,re.jsxs)(Ce.Z,{title:"Shareable URL",handelModelClose:function(){e.handelModelClose&&e.handelModelClose()},open:e.open,children:[(0,re.jsx)(jn.Z,{sx:{display:"block",textAlign:"center",marginY:2},target:"_blank",rel:"noreferrer",href:s,children:s}),(0,re.jsx)("div",{style:{maxWidth:"fit-content",marginInline:"auto"},children:(0,re.jsx)(A.Z,{title:a.title,children:(0,re.jsx)(P.Z,{onClick:function(){if(a.copy){navigator.clipboard.writeText(s),r({icon:(0,re.jsx)(bn.Z,{}),copy:!1,title:"Copied!"});var e=setTimeout((function(){r({icon:(0,re.jsx)(vn.Z,{}),copy:!0,title:"Copy Link"}),clearTimeout(e)}),5e3)}},children:a.icon})})})]})},An=(0,h.Z)({container:"View_container__sQgk9","quick-view-conatiner":"View_quick-view-conatiner__45-CY","booking-form-conainter":"View_booking-form-conainter__H0lTA","bf-data":"View_bf-data__lQfgU","bf-actions":"View_bf-actions__olGmT","bf-notes":"View_bf-notes__ro1wl","approval-history-container":"View_approval-history-container__3Zwp-","note-container":"View_note-container__46qHo","note-from":"View_note-from__OCOek",note:"View_note__37jqP","approval-info":"View_approval-info__cVPnW",icon:"View_icon__nSRVe","header-information":"View_header-information__23IvD",data:"View_data__K17TZ","address-main-container":"View_address-main-container__JDmxu","input-container":"View_input-container__RqOjh","approver-container":"View_approver-container__H+Lt2",information:"View_information__xlilI",rejected:"View_rejected__-zQ4j",pending:"View_pending__atfyJ",approved:"View_approved__k0V9v","no-after-content":"View_no-after-content__Kag9e","img-viewer":"View_img-viewer__0FG2C","download-icon":"View_download-icon__ELeoh","close-icon":"View_close-icon__sVMwx","modal-note-conatiner":"View_modal-note-conatiner__bfoCJ","note-inputs-container":"View_note-inputs-container__53sF9","note-actions-container":"View_note-actions-container__PEmmn",required:"View_required__obQNA","address-container":"View_address-container__i7E2L","two-input-container":"View_two-input-container__F5aH+","wrong-input":"View_wrong-input__UFD2n",disabled:"View_disabled__TMt2s"}),yn=(0,h.Z)(ve),Nn=["Male","Female","Other"],gn=["Indian","NRI"],Cn=["Single","Married"],_n=["Same As Present Address","Different"],wn=["Self","Home Loan"],Sn=["UPI","Cheque","Online Banking","Cash Payment"],Pn=["Yes","No"],kn={aadhar:{fileName:null,data:null},panCard:{fileName:null,data:null},applicant:{fileName:null,data:null},priceSheet:{fileName:null,data:null},coApplicant:{fileName:null,data:null},paymentConfirmation:{fileName:null,data:null}};var In=function(e){var n,t,p,m,h,f,v,b,Z,y,N,g,C,_,w,S,k,I,E,T,R,O,V,L,M,q,W,H,K,Y,z,G,Q=(0,o.UO)().bookingFormId,X=(0,c.I0)(),$=(0,l.useRef)(),ee=(0,u.T)(),ne=(0,o.s0)(),te=(0,l.useState)({imgSrc:"",imgAlt:"",type:""}),ae=(0,i.Z)(te,2),se=ae[0],ie=ae[1],le=(0,l.useState)({projects:[],projectUnits:[]}),oe=(0,i.Z)(le,2),ce=oe[0],pe=oe[1],me=(0,l.useState)(),he=(0,i.Z)(me,2),fe=he[0],xe=he[1],je=(0,l.useState)(null),ve=(0,i.Z)(je,2),be=ve[0],Ze=ve[1],Ae=(0,l.useState)(),ye=(0,i.Z)(Ae,2),Ne=ye[0],ge=ye[1],Ce=(0,l.useState)(!1),_e=(0,i.Z)(Ce,2),we=_e[0],Se=_e[1],Pe=(0,l.useState)(!1),ke=(0,i.Z)(Pe,2),Ie=ke[0],Ee=ke[1],Qe=(0,c.v9)((function(e){return e[d.qM]})).appPermissions,Xe=Qe.isEditable,$e=Qe.displayApprovalHistory,nn=(0,l.useState)(null),tn=(0,i.Z)(nn,2),an=tn[0],dn=tn[1],un=(0,l.useState)({sourceWithSubSource:[],currentSubSourceForSource:[]}),pn=(0,i.Z)(un,2),jn=pn[0],vn=pn[1],bn=(0,l.useState)([]),In=(0,i.Z)(bn,2),En=In[0],Tn=In[1],Rn=["cp","c p","channel partner"],On=[],Fn=(0,l.useCallback)((function(e){var n=An.information+" ",t=(0,re.jsx)(re.Fragment,{});switch(e){case!0:n+=An.approved,t=(0,re.jsx)(Ye.Z,{className:An.icon});break;case!1:n+=An.rejected,t=(0,re.jsx)(ze.Z,{className:An.icon});break;case null:n+=An.pending,t=(0,re.jsx)(Je.Z,{className:An.icon})}return{containerClassName:n,iconToDisplay:t}}),[]);if(null!==fe&&void 0!==fe&&fe.approvals){var Vn=Fn(fe.approvals.projectHead.status),Dn=Fn(!(null!==fe.approvals.projectHead.status&&!fe.approvals.projectHead.status)&&fe.approvals.salesAndMarketingHead.status),Ln=Fn(!(null!==fe.approvals.projectHead.status&&!fe.approvals.projectHead.status||null!==fe.approvals.salesAndMarketingHead.status&&!fe.approvals.salesAndMarketingHead.status)&&fe.approvals.projectDirector.status);On.push((0,re.jsx)("div",{className:An.approverContainer,children:(0,re.jsxs)("div",{className:Vn.containerClassName,children:[Vn.iconToDisplay,(0,re.jsx)("p",{children:fe.approvals.projectHead.displayMessage})]})},1)),On.push((0,re.jsx)("div",{className:An.approverContainer,children:(0,re.jsxs)("div",{className:Dn.containerClassName,children:[Dn.iconToDisplay,(0,re.jsx)("p",{children:fe.approvals.salesAndMarketingHead.displayMessage})]})},2)),On.push((0,re.jsx)("div",{className:An.approverContainer,children:(0,re.jsxs)("div",{className:An.noAfterContent+" "+Ln.containerClassName,children:[Ln.iconToDisplay,(0,re.jsx)("p",{children:fe.approvals.projectDirector.displayMessage})]})},3))}function Un(e){return Mn.apply(this,arguments)}function Mn(){return Mn=(0,s.Z)((0,a.Z)().mark((function n(t){var r,i,l,o,c,d,u,p,m,h;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=function(){return(o=(0,s.Z)((0,a.Z)().mark((function n(){var t,s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.baseURL+"/"+Q+"/retrieve-attachments?retrieve="+r,n.next=4,ee({url:t});case 4:return n.abrupt("return",n.sent);case 7:return n.prev=7,n.t0=n.catch(0),X(x.K7.showAlert({message:null!==(s=n.t0.msg)&&void 0!==s?s:"Failed to fetch ".concat(r,"!"),title:"Request Failed!",severity:"error"})),n.abrupt("return",null);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)},l=function(){return o.apply(this,arguments)},r=t.target.dataset.type,i={imgSrc:"",imgAlt:"",type:r},"PAYMENT_COPY"!==r){n.next=18;break}if(!(0,j.Z)(kn.paymentConfirmation.data)){n.next=13;break}return n.next=8,l();case 8:if(null!==(c=n.sent)){n.next=11;break}return n.abrupt("return");case 11:kn.paymentConfirmation.fileName=c.fileName,kn.paymentConfirmation.data=c.PAYMENT_COPY;case 13:if(!kn.paymentConfirmation.fileName.endsWith(".pdf")){n.next=16;break}return Re(kn.paymentConfirmation.data),n.abrupt("return");case 16:i.imgSrc=kn.paymentConfirmation.data,i.imgAlt="Payment Confirmation: "+kn.paymentConfirmation.fileName;case 18:if("AADHAR_COPY"!==r){n.next=32;break}if(!(0,j.Z)(kn.aadhar.data)){n.next=27;break}return n.next=22,l();case 22:if(null!==(d=n.sent)){n.next=25;break}return n.abrupt("return");case 25:kn.aadhar.fileName=d.fileName,kn.aadhar.data=d.AADHAR_COPY;case 27:if(!kn.aadhar.fileName.endsWith(".pdf")){n.next=30;break}return Re(kn.aadhar.data),n.abrupt("return");case 30:i.imgSrc=kn.aadhar.data,i.imgAlt="Aadhar Card: "+kn.aadhar.fileName;case 32:if("PAN_COPY"!==r){n.next=46;break}if(!(0,j.Z)(kn.panCard.data)){n.next=41;break}return n.next=36,l();case 36:if(null!==(u=n.sent)){n.next=39;break}return n.abrupt("return");case 39:kn.panCard.fileName=u.fileName,kn.panCard.data=u.PAN_COPY;case 41:if(!kn.panCard.fileName.endsWith(".pdf")){n.next=44;break}return Re(kn.panCard.data),n.abrupt("return");case 44:i.imgSrc=kn.panCard.data,i.imgAlt="Pan Card: "+kn.panCard.fileName;case 46:if("PHOTO_OF_APPLICANT"!==r){n.next=60;break}if(!(0,j.Z)(kn.applicant.data)){n.next=55;break}return n.next=50,l();case 50:if(null!==(p=n.sent)){n.next=53;break}return n.abrupt("return");case 53:kn.applicant.fileName=p.fileName,kn.applicant.data=p.PHOTO_OF_APPLICANT;case 55:if(!kn.applicant.fileName.endsWith(".pdf")){n.next=58;break}return Re(kn.applicant.data),n.abrupt("return");case 58:i.imgSrc=kn.applicant.data,i.imgAlt="Photo Of Applicant: "+kn.applicant.fileName;case 60:if("PHOTO_OF_CO_APPLICANT"!==r){n.next=74;break}if(!(0,j.Z)(kn.coApplicant.data)){n.next=69;break}return n.next=64,l();case 64:if(null!==(m=n.sent)){n.next=67;break}return n.abrupt("return");case 67:kn.coApplicant.fileName=m.fileName,kn.coApplicant.data=m.PHOTO_OF_CO_APPLICANT;case 69:if(!kn.coApplicant.fileName.endsWith(".pdf")){n.next=72;break}return Re(kn.coApplicant.data),n.abrupt("return");case 72:i.imgSrc=kn.coApplicant.data,i.imgAlt="Photo Of Co-Applicant: "+kn.coApplicant.fileName;case 74:if("PRICE_SHEET"!==r){n.next=85;break}if(!(0,j.Z)(kn.priceSheet.data)){n.next=83;break}return n.next=78,l();case 78:if(null!==(h=n.sent)){n.next=81;break}return n.abrupt("return");case 81:kn.priceSheet.fileName=h.fileName,kn.priceSheet.data=h.PRICE_SHEET;case 83:ge(),Re(kn.priceSheet.data);case 85:ie(i);case 86:case"end":return n.stop()}}),n)}))),Mn.apply(this,arguments)}function qn(){return(qn=(0,s.Z)((0,a.Z)().mark((function n(t){var r,s,i,l,o,c,d,u,p,m,h,f,j;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,t.preventDefault(),r={id:Q},fe.dateOfBirth&&(r.dateOfBirth=fe.dateOfBirth),fe.coApp_dateOfBirth&&(r.coApp_dateOfBirth=fe.coApp_dateOfBirth),fe.Project&&(r.Project=fe.Project),fe.ProjectUnit&&(r.ProjectUnit=fe.ProjectUnit),fe.source&&(r.source=fe.source),fe.subsource&&(r.subsource=fe.subsource),fe.channelpartner&&(r.channelpartner=fe.channelpartner),fe.facing&&(r.facing=fe.facing),s=(0,Te.Z)(t.target.elements),n.prev=12,s.s();case 14:if((i=s.n()).done){n.next=31;break}if(l=i.value,o=l.type,c=l.name,d=l.value,["text","checkbox","number"].includes(o)){n.next=21;break}return n.abrupt("continue",29);case 21:if(c){n.next=23;break}return n.abrupt("continue",29);case 23:if(!c.includes(".")){n.next=28;break}return u=c.split("."),r[u[0]]||(r[u[0]]={}),r[u[0]][u[1]]=d,n.abrupt("continue",29);case 28:r[c]="checkbox"===o?l.checked:d;case 29:n.next=14;break;case 31:n.next=36;break;case 33:n.prev=33,n.t0=n.catch(12),s.e(n.t0);case 36:return n.prev=36,s.f(),n.finish(36);case 39:return p=e.baseURL+"/"+Q+"/update","POST",m=JSON.stringify(r),h={"Content-Type":"application/json"},n.next=45,ee({url:p,method:"POST",body:m,headers:h});case 45:f=n.sent,X(x.K7.showAlert({message:f.msg||"Record updated!",title:"Request Completed!",severity:"success"})),n.next=52;break;case 49:n.prev=49,n.t1=n.catch(0),X(x.K7.showAlert({message:null!==(j=n.t1.msg)&&void 0!==j?j:"Failed to update record",title:"Request Failed!",severity:"error"}));case 52:case"end":return n.stop()}}),n,null,[[0,49],[12,33,36,39]])})))).apply(this,arguments)}function Bn(){return(Bn=(0,s.Z)((0,a.Z)().mark((function n(){var t,r;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,window.confirm("All the approval's progress will be lost. Would you like to proceed?")){n.next=3;break}return n.abrupt("return");case 3:return t=e.baseURL+"/"+Q+"/reset-approvals-and-unlock-bookingform","POST",r={"content-type":"application/json"},n.next=8,ee({url:t,method:"POST",headers:r});case 8:Ze((function(e){return!e})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),X(x.K7.showAlert({message:n.t0.msg||"Failed to process request",title:"Request Failed!",severity:"error"}));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}function Wn(e){Ee(Boolean(null===e||void 0===e?void 0:e.target))}return(0,l.useEffect)((function(){be&&window.location.reload()}),[be]),(0,l.useEffect)((function(){(0,s.Z)((0,a.Z)().mark((function n(){var t,s,i,l,o,c;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=e.baseURL+"/"+Q+"/view",1,n.next=5,ee({url:s,timeout:1});case 5:if(i=n.sent,l=["coApp_dateOfBirth","dateOfBirth"],o=["presentAddress","permanentAddress","coApp_presentAddress","coApp_permanentAddress","officeAddress","notes","approvalHistory"],c=["Project","ProjectUnit"],!(0,j.Z)(i)){n.next=11;break}throw Error("No Data Found");case 11:Object.keys(i).forEach((function(e){null!==i[e]?o.includes(e)&&"object"!==typeof i[e]?i[e]=JSON.parse(i[e]):l.includes(e)?i[e]=J()(i[e]):c.includes(e)&&(i[e]=(0,r.Z)((0,r.Z)({},i[e]),{},{label:i[e].name})):i[e]=l.includes(e)?null:""})),kn.paymentConfirmation={fileName:null,data:null},kn.aadhar={fileName:null,data:null},kn.panCard={fileName:null,data:null},kn.applicant={fileName:null,data:null},kn.coApplicant={fileName:null,data:null},kn.priceSheet={fileName:null,data:null},xe(i),Se(Rn.includes(null!==i&&void 0!==i&&null!==(t=i.source)&&void 0!==t&&t.label?i.source.label.toLowerCase():"")),n.next=25;break;case 22:n.prev=22,n.t0=n.catch(0),xe({error:n.t0});case 25:case"end":return n.stop()}}),n,null,[[0,22]])})))(),(0,s.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/projects/list-all",e.next=4,ee({url:"/projects/list-all",showLoader:!1});case 4:n=e.sent,pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{projects:n.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{label:e.name})}))})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),X(x.K7.showAlert({message:null!==(t=e.t0.msg)&&void 0!==t?t:"Failed to fetch projects data!",title:"Request Failed!",severity:"error"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),(0,s.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/source/retrive-source-with-subsource",e.next=4,ee({url:"/source/retrive-source-with-subsource",showLoader:!1});case 4:n=e.sent,vn((function(e){return(0,r.Z)((0,r.Z)({},e),{},{sourceWithSubSource:n})})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),X(x.K7.showAlert({message:null!==(t=e.t0.msg)&&void 0!==t?t:"Failed to fetch source data!",title:"Request Failed!",severity:"error"}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]),(0,l.useEffect)((function(){(0,s.Z)((0,a.Z)().mark((function e(){var n,t,s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==fe&&void 0!==fe&&null!==(n=fe.Project)&&void 0!==n&&n.id){e.next=3;break}return e.abrupt("return");case 3:return t="/projects/".concat(null===fe||void 0===fe?void 0:fe.Project.id,"/fetch-units"),e.next=6,ee({url:t});case 6:s=e.sent,pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{projectUnits:s.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{label:e.name})}))})})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),X(x.K7.showAlert({message:null!==(i=e.t0.msg)&&void 0!==i?i:"Failed to fetch projects unit data!",title:"Request Failed!",severity:"error"}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[null===fe||void 0===fe?void 0:fe.Project]),(0,l.useEffect)((function(){void 0===(null===fe||void 0===fe?void 0:fe.status)||Xe&&fe.status===an||dn(Xe&&"Approved"!==fe.status)}),[Xe,null===fe||void 0===fe?void 0:fe.status,an]),(0,l.useEffect)((function(){var e;if(!(0,j.Z)(jn.sourceWithSubSource))if((0,j.Z)(null===fe||void 0===fe||null===(e=fe.source)||void 0===e?void 0:e.id))vn((function(e){return(0,r.Z)((0,r.Z)({},e),{},{currentSubSourceForSource:[]})}));else{var n=jn.sourceWithSubSource.filter((function(e){return e.id===fe.source.id}));if(Rn.includes(fe.source.label)&&(0,j.Z)(En)){ee({url:"/channel-partner/view-all"}).then((function(e){var n=e.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{label:e.name})}));Tn(n)})).catch((function(e){var n;X(x.K7.showAlert({message:null!==(n=e.msg)&&void 0!==n?n:"Failed to fetch source data!",title:"Request Failed!",severity:"error"}))}))}vn((function(e){var t;return(0,r.Z)((0,r.Z)({},e),{},{currentSubSourceForSource:(null===(t=n[0])||void 0===t?void 0:t.subsources)||null})}))}}),[null===fe||void 0===fe?void 0:fe.source,jn.sourceWithSubSource]),null!==fe&&void 0!==fe&&fe.error?(0,re.jsx)("div",{className:An.container,children:(0,re.jsx)("h2",{style:{textAlign:"center"},children:fe.error.msg||'Failed to fetch booking form data from "'.concat(Q,'"')})}):fe&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(xn,{styles:An,bookingFormData:fe}),(0,re.jsx)("div",{className:An.container,children:(0,re.jsxs)("div",{className:yn.toolBar,children:[(0,re.jsx)("div",{className:yn.left}),(0,re.jsxs)("div",{className:yn.right,children:[(0,re.jsx)("span",{className:yn.icon,children:(0,re.jsx)(A.Z,{title:"New shareable link",children:(0,re.jsx)(P.Z,{onClick:Wn,children:(0,re.jsx)(fn.Z,{})})})}),(0,re.jsx)("span",{className:yn.icon,children:(0,re.jsx)(A.Z,{title:"Refresh",children:(0,re.jsx)(P.Z,{onClick:function(e){return Ze((function(e){return!e}))},children:(0,re.jsx)(B.Z,{})})})}),(0,re.jsx)("span",{className:yn.icon,children:(0,re.jsx)(A.Z,{title:"Download",children:(0,re.jsx)("span",{children:(0,re.jsx)(P.Z,{disabled:!0,children:(0,re.jsx)(U.Z,{})})})})}),(0,re.jsx)("span",{className:yn.icon,children:(0,re.jsx)(A.Z,{title:"Re-Notify for approvals",children:(0,re.jsx)("span",{children:(0,re.jsx)(P.Z,{disabled:!0,children:(0,re.jsx)(Ge.Z,{})})})})}),(0,re.jsx)("span",{className:yn.icon,children:(0,re.jsx)(A.Z,{title:"Unlock Booking Form",children:(0,re.jsx)("span",{children:(0,re.jsx)(P.Z,{disabled:"Pending"===fe.status,onClick:function(){return Bn.apply(this,arguments)},children:(0,re.jsx)(hn.Z,{})})})})}),(0,re.jsx)("span",{className:yn.icon,children:(0,re.jsx)(A.Z,{title:"Soft Delete",children:(0,re.jsx)("span",{children:(0,re.jsx)(P.Z,{disabled:!0,children:(0,re.jsx)(en.Z,{})})})})})]})]})}),(0,re.jsxs)("main",{className:An.bookingFormConainter,children:[(0,re.jsx)("form",{onSubmit:function(e){return qn.apply(this,arguments)},onKeyDown:function(e){return"Enter"===e.key?e.preventDefault():""},children:(0,re.jsxs)("div",{className:"".concat(An.container," ").concat(An.bfData),children:[(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Personal Information"]})}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Full Name",name:"fullName",defaultValue:fe.fullName,disabled:!an,required:!0}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Email Id",name:"emailId",defaultValue:fe.emailId,disabled:!an}),(0,re.jsx)(Be._,{dateAdapter:He.Q,children:(0,re.jsx)(We.M,{className:An.inputContainer,label:"Date Of Birth",defaultValue:fe.dateOfBirth,name:"dateOfBirth",disabled:!an,disableFuture:!0,onChange:function(e){return xe((function(n){return(0,r.Z)((0,r.Z)({},n),{},{dateOfBirth:e})}))}})}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,children:[(0,re.jsx)(Fe.Z,{id:"Gender",children:"Gender"}),(0,re.jsx)(Ve.Z,{labelId:"Gender",defaultValue:fe.gender,name:"gender",label:"Gender",disabled:!an,children:Nn.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},"PI-".concat(e))}))})]}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,children:[(0,re.jsx)(Fe.Z,{id:"Nationality",children:"Nationality"}),(0,re.jsx)(Ve.Z,{labelId:"Nationality",defaultValue:fe.nationality,name:"nationality",label:"Nationality",disabled:!an,children:gn.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},"PI-".concat(e))}))})]}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Mobile Number",defaultValue:fe.mobileNumber,name:"mobileNumber",disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Alternate Mobile Number",defaultValue:fe.alternateMobileNumber,name:"alternateMobileNumber",disabled:!an}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,children:[(0,re.jsx)(Fe.Z,{id:"MaritalStatus",children:"Marital Status"}),(0,re.jsx)(Ve.Z,{labelId:"MaritalStatus",label:"MaritalStatus",defaultValue:fe.maritalStatus,name:"maritalStatus",disabled:!an,children:Cn.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},"PI-".concat(e))}))})]}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,children:[(0,re.jsx)(Fe.Z,{id:"wantToAdd_CoApp",children:"Want to add Co Applicant?"}),(0,re.jsx)(Ve.Z,{labelId:"wantToAdd_CoApp",label:"PresentAddressType",defaultValue:fe.wantToAdd_CoApp,name:"wantToAdd_CoApp",onChange:function(e){return xe((function(n){return(0,r.Z)((0,r.Z)({},n),{},{wantToAdd_CoApp:e.target.value})}))},children:Pn.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},"PI-".concat(e))}))})]}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,disabled:!0,children:[(0,re.jsx)(Fe.Z,{id:"PresentAddressType",disabled:!0,children:"Present Address Type"}),(0,re.jsx)(Ve.Z,{labelId:"PresentAddressType",label:"PresentAddressType",defaultValue:fe.permanentAddressType,name:"permanentAddressType",disabled:!0,children:_n.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},"PI-".concat(e))}))})]})]}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsxs)("div",{className:An.addressMainContainer,children:[(0,re.jsx)("label",{children:"Present Address"}),(0,re.jsxs)("div",{className:An.addressContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(n=fe.presentAddress)||void 0===n?void 0:n.addressLine1,name:"presentAddress.addressLine1",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(t=fe.presentAddress)||void 0===t?void 0:t.addressLine2,name:"presentAddress.addressLine2",disabled:!an}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"City",defaultValue:null===(p=fe.presentAddress)||void 0===p?void 0:p.city,name:"presentAddress.city",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"State",defaultValue:null===(m=fe.presentAddress)||void 0===m?void 0:m.state,name:"presentAddress.state",disabled:!an})]}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Country",defaultValue:null===(h=fe.presentAddress)||void 0===h?void 0:h.country,name:"presentAddress.country",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Pincode",defaultValue:null===(f=fe.presentAddress)||void 0===f?void 0:f.pincode,name:"presentAddress.pincode",disabled:!an})]})]})]}),(0,re.jsxs)("div",{className:An.addressMainContainer,children:[(0,re.jsx)("label",{children:"Permanent Address"}),(0,re.jsxs)("div",{className:An.addressContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(v=fe.permanentAddress)||void 0===v?void 0:v.addressLine1,name:"permanentAddress.addressLine1",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(b=fe.permanentAddress)||void 0===b?void 0:b.addressLine2,name:"permanentAddress.addressLine2",disabled:!an}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"City",defaultValue:null===(Z=fe.permanentAddress)||void 0===Z?void 0:Z.city,name:"permanentAddress.city",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"State",defaultValue:null===(y=fe.permanentAddress)||void 0===y?void 0:y.state,name:"permanentAddress.state",disabled:!an})]}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Country",defaultValue:null===(N=fe.permanentAddress)||void 0===N?void 0:N.country,name:"permanentAddress.country",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Pincode",defaultValue:null===(g=fe.permanentAddress)||void 0===g?void 0:g.pincode,name:"permanentAddress.pincode",disabled:!an})]})]})]})]})]}),"Yes"===fe.wantToAdd_CoApp&&(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Co-Applicant Information"]})}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Co-Applicant's Full Name",name:"coApp_FullName",defaultValue:fe.coApp_FullName,disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Co-Applicant's Email Id",name:"coApp_emailId",defaultValue:fe.coApp_emailId,disabled:!an}),(0,re.jsx)(Be._,{dateAdapter:He.Q,children:(0,re.jsx)(We.M,{className:An.inputContainer,label:"Co-Applicant's Date Of Birth",defaultValue:fe.coApp_dateOfBirth,name:"coApp_dateOfBirth",disabled:!an,disableFuture:!0,onChange:function(e){return xe((function(n){return(0,r.Z)((0,r.Z)({},n),{},{coApp_dateOfBirth:e})}))}})}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,children:[(0,re.jsx)(Fe.Z,{id:"Co-Applicant's Gender",children:"Co-Applicant's Gender"}),(0,re.jsx)(Ve.Z,{labelId:"Co-Applicant's Gender",defaultValue:fe.coApp_gender,name:"coApp_gender",label:"Co-Applicant's Gender",disabled:!an,children:Nn.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},"PI-".concat(e))}))})]}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,children:[(0,re.jsx)(Fe.Z,{id:"Co-Applicant's Nationality",children:"Co-Applicant's Nationality"}),(0,re.jsx)(Ve.Z,{labelId:"Co-Applicant's Nationality",defaultValue:fe.coApp_nationality,name:"coApp_nationality",label:"Co-Applicant's Nationality",disabled:!an,children:gn.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},"PI-".concat(e))}))})]}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Co-Applicant's Mobile Number",defaultValue:fe.coApp_mobileNumber,name:"coApp_mobileNumber",disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Co-Applicant's Alternate Mobile Number",defaultValue:fe.coApp_alternateMobileNumber,name:"coApp_alternateMobileNumber",disabled:!an}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,children:[(0,re.jsx)(Fe.Z,{id:"coApp_maritalStatus",children:"Co-Applicant's Marital Status"}),(0,re.jsx)(Ve.Z,{labelId:"coApp_maritalStatus",label:"Co-Applicant's Marital Status",defaultValue:fe.coApp_maritalStatus,name:"coApp_maritalStatus",disabled:!an,children:Cn.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},"PI-".concat(e))}))})]}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,disabled:!0,children:[(0,re.jsx)(Fe.Z,{id:"Co-Applicant's PresentAddressType",disabled:!0,children:"Co-Applicant's PresentAddressType"}),(0,re.jsx)(Ve.Z,{labelId:"Co-Applicant's PresentAddressType",label:"Co-Applicant's PresentAddressType",defaultValue:fe.coApp_permanentAddressType,name:"coApp_permanentAddressType",disabled:!0,children:_n.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},"PI-".concat(e))}))})]})]}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsxs)("div",{className:An.addressMainContainer,children:[(0,re.jsx)("label",{children:"Co-Applicant's Present Address"}),(0,re.jsxs)("div",{className:An.addressContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(C=fe.coApp_presentAddress)||void 0===C?void 0:C.addressLine1,name:"coApp_presentAddress.addressLine1",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(_=fe.coApp_presentAddress)||void 0===_?void 0:_.addressLine2,name:"coApp_presentAddress.addressLine2",disabled:!an}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"City",defaultValue:null===(w=fe.coApp_presentAddress)||void 0===w?void 0:w.city,name:"coApp_presentAddress.city",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"State",defaultValue:null===(S=fe.coApp_presentAddress)||void 0===S?void 0:S.state,name:"coApp_presentAddress.state",disabled:!an})]}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Country",defaultValue:null===(k=fe.coApp_presentAddress)||void 0===k?void 0:k.country,name:"coApp_presentAddress.country",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Pincode",defaultValue:null===(I=fe.coApp_presentAddress)||void 0===I?void 0:I.pincode,name:"coApp_presentAddress.pincode",disabled:!an})]})]})]}),(0,re.jsxs)("div",{className:An.addressMainContainer,children:[(0,re.jsx)("label",{children:"Co-Applicant's Permanent Address"}),(0,re.jsxs)("div",{className:An.addressContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(E=fe.coApp_permanentAddress)||void 0===E?void 0:E.addressLine1,name:"coApp_permanentAddress.addressLine1",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(T=fe.coApp_permanentAddress)||void 0===T?void 0:T.addressLine2,name:"coApp_permanentAddress.addressLine2",disabled:!an}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"City",defaultValue:null===(R=fe.coApp_permanentAddress)||void 0===R?void 0:R.city,name:"coApp_permanentAddress.city",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"State",defaultValue:null===(O=fe.coApp_permanentAddress)||void 0===O?void 0:O.state,name:"coApp_permanentAddress.state",disabled:!an})]}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Country",defaultValue:null===(V=fe.coApp_permanentAddress)||void 0===V?void 0:V.country,name:"coApp_permanentAddress.country",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Pincode",defaultValue:null===(L=fe.coApp_permanentAddress)||void 0===L?void 0:L.pincode,name:"coApp_permanentAddress.pincode",disabled:!an})]})]})]})]})]}),(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Project Information"]})}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(ue.Z,{className:An.inputContainer,disablePortal:!0,options:ce.projects,value:fe.Project,onChange:function(e,n){xe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{Project:n,ProjectUnit:null})})),n||pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{projectUnits:[]})}))},isOptionEqualToValue:function(e,n){return e.id===n.id},noOptionsText:"Fetching Projects Data..",renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Projects",required:!0}))},disabled:!an}),(0,re.jsx)(ue.Z,{className:An.inputContainer,disablePortal:!0,options:ce.projectUnits,value:fe.ProjectUnit,onChange:function(e,n){return xe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{ProjectUnit:n})}))},isOptionEqualToValue:function(e,n){return e.id===n.id},noOptionsText:"Please select a project to show its related units",renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Project Units",required:!0}))},disabled:!an})]}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Current Unit Price",name:"currentUnitPrice",defaultValue:fe.currentUnitPrice,type:"number",disabled:!an,required:!0}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Total cost",name:"totalCost",defaultValue:fe.totalCost,type:"number",disabled:!an,required:!0}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Land Area / BUA / SBA (Sft)",name:"sqft",type:"number",defaultValue:fe.sqft,disabled:!an,required:!0}),(0,re.jsx)(ue.Z,{className:An.inputContainer,disablePortal:!0,options:["North","South","East","West"],value:fe.facing,onChange:function(e,n){return xe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{facing:n})}))},isOptionEqualToValue:function(e,n){return e===n},renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Facing",required:!0}))},disabled:!an})]}),(0,re.jsx)("div",{className:An.data,children:(0,re.jsxs)(Le.Z,{row:!0,sx:{justifyContent:"center",width:"50%",marginLeft:15},children:[(0,re.jsx)(Ue.Z,{className:An.inputContainer,control:(0,re.jsx)(Me.Z,{}),label:"Corner",labelPlacement:"end",checked:fe.corner,name:"corner",onChange:function(e){return xe((function(n){return(0,r.Z)((0,r.Z)({},n),{},{corner:e.target.checked})}))},disabled:!an}),(0,re.jsx)(Ue.Z,{className:An.inputContainer,control:(0,re.jsx)(Me.Z,{}),label:"Park Facing",labelPlacement:"end",checked:fe.parkFacing,name:"parkFacing",onChange:function(e){return xe((function(n){return(0,r.Z)((0,r.Z)({},n),{},{parkFacing:e.target.checked})}))},disabled:!an})]})})]}),(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Payment Information"]})}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsxs)(Oe.Z,{className:An.inputContainer,children:[(0,re.jsx)(Fe.Z,{id:"ModeOfPayment",children:"Mode Of Payment"}),(0,re.jsx)(Ve.Z,{labelId:"ModeOfPayment",label:"ModeOfPayment",name:"modeOfPayment",defaultValue:fe.modeOfPayment,disabled:!an,children:wn.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},e)}))})]}),(0,re.jsxs)(Oe.Z,{className:An.inputContainer,children:[(0,re.jsx)(Fe.Z,{id:"PaymentType",children:"Payment Type"}),(0,re.jsx)(Ve.Z,{labelId:"PaymentType",label:"PaymentType",name:"paymentType",defaultValue:fe.paymentType,disabled:!an,children:Sn.map((function(e){return(0,re.jsx)(De.Z,{value:e,children:e},e)}))})]}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Booking Amount Paid",type:"number",name:"bookingAmountPaid",defaultValue:fe.bookingAmountPaid,disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Discount In Rs (\u20b9)",type:"number",name:"discount",defaultValue:fe.discount,disabled:!an})]}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(F.Z,{variant:"outlined","data-type":"PAYMENT_COPY",onClick:Un,children:"View Payment Confirmation"}),(0,re.jsx)(F.Z,{variant:"outlined",onClick:function(e){return ge(e.currentTarget)},endIcon:(0,re.jsx)(ln.Z,{}),children:"Price Sheet"})]}),(0,re.jsxs)(rn,{id:"notes-menu",anchorEl:Ne,open:Boolean(Ne),onClose:function(e){return ge()},children:[(0,re.jsxs)(De.Z,{"data-type":"PRICE_SHEET",onClick:Un,children:[(0,re.jsx)(on.Z,{}),"View"]}),(0,re.jsxs)(De.Z,{"data-from":"MENU_ITEM",disabled:!an,onClick:function n(t){var r=t.target.dataset.from;if("MENU_ITEM"===r){var i=document.createElement("input");i.style.display="none",i.type="file",i.accept="application/pdf",i.dataset.from="INPUT_ELEM";document.body.addEventListener("focus",(function e(){document.body.removeEventListener("focus",e,!0),setTimeout((function(){document.body.removeChild(i)}),1e3)}),!0),document.body.appendChild(i),i.onchange=n,i.click()}if("INPUT_ELEM"===r){var l=t.target.files[0],o=l.type,c=l.name;if("application/pdf"!==o)return X(x.K7.showAlert({message:"Only PDF file types are supported!",title:"Request Failed!",severity:"error"}));if(!window.confirm("Filename: ".concat(c,"\nAre you sure that you want to upload this file?")))return;var d=new FileReader;d.readAsDataURL(l),d.onload=(0,s.Z)((0,a.Z)().mark((function n(){var t,r,s,i,l;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.baseURL+"/"+Q+"/upload-attachments?upload=PRICE_SHEET","POST",r={"content-type":"application/json"},s=d.result.split(",")[1],i=JSON.stringify({fileName:c,type:o,data:s}),n.next=8,ee({url:t,method:"POST",body:i,headers:r});case 8:l=n.sent,kn.priceSheet.fileName=c,kn.priceSheet.data=s,X(x.K7.showAlert({message:l.msg||"Document upload successfully",title:"Request Completed!",severity:"success"})),ge(),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),X(x.K7.showAlert({message:n.t0.msg||"Document upload failed",title:"Request Failed!",severity:"error"}));case 18:case"end":return n.stop()}}),n,null,[[0,15]])})))}},children:[(0,re.jsx)(cn.Z,{}),"Upload New"]})]})]}),(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"KYC Documents"]})}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Aadhar Number",name:"aadharNumber",defaultValue:fe.aadharNumber,disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"PAN Number",name:"PANNumber",defaultValue:fe.PANNumber,disabled:!an}),(0,re.jsx)(F.Z,{variant:"outlined","data-type":"AADHAR_COPY",onClick:Un,children:"Photo Copy Of Aadhar"}),(0,re.jsx)(F.Z,{variant:"outlined","data-type":"PAN_COPY",onClick:Un,children:"Photo Copy Of PAN"}),(0,re.jsx)(F.Z,{variant:"outlined","data-type":"PHOTO_OF_APPLICANT",onClick:Un,children:"photo copy Of Applicant"}),"Yes"===fe.wantToAdd_CoApp&&(0,re.jsx)(F.Z,{variant:"outlined","data-type":"PHOTO_OF_CO_APPLICANT",onClick:Un,children:"photo copy Of co Applicant"})]})]}),(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Source / Channel Partner Information"]})}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(ue.Z,{className:An.inputContainer,disablePortal:!0,options:jn.sourceWithSubSource.map((function(e){return{id:e.id,label:e.label}})),value:fe.source,onChange:function(e,n){var t=Rn.includes(n.label.toLowerCase());Se(t),xe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{source:n,subsource:null,channelpartner:t?e.channelpartner:null})}))},isOptionEqualToValue:function(e,n){return e.id===n.id},loadingText:"Fetching source infromation",renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Source",required:!0}))},disabled:!an}),(0,re.jsx)(ue.Z,{className:An.inputContainer,disablePortal:!0,options:jn.currentSubSourceForSource,value:fe.subsource,onChange:function(e,n){return xe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{subsource:n})}))},isOptionEqualToValue:function(e,n){return e.id===n.id},renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Sub Source"}))},disabled:!an}),we&&(0,re.jsx)(ue.Z,{className:An.inputContainer,disablePortal:!0,options:En,value:fe.channelpartner,onChange:function(e,n){return xe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{channelpartner:n})}))},isOptionEqualToValue:function(e,n){return e.id===n.id},renderInput:function(e){return(0,re.jsx)(de.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Channel Partner",required:!0}))},disabled:!an})]})]}),(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Professional Information"]})}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Company Name",defaultValue:fe.companyName,name:"companyName",disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Profession",defaultValue:fe.profession,name:"profession",disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Occupation",defaultValue:fe.occupation,name:"occupation",disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Designation",defaultValue:fe.designation,name:"designation",disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Industry",defaultValue:fe.industry,name:"industry",disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Annual Income",defaultValue:fe.annualIncome,name:"annualIncome",disabled:!an}),(0,re.jsxs)("div",{className:An.addressMainContainer,children:[(0,re.jsx)("label",{children:"Office Address"}),(0,re.jsxs)("div",{className:An.addressContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(M=fe.officeAddress)||void 0===M?void 0:M.addressLine1,name:"officeAddress.addressLine1",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(q=fe.officeAddress)||void 0===q?void 0:q.addressLine2,name:"officeAddress.addressLine2",disabled:!an}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"City",defaultValue:null===(W=fe.officeAddress)||void 0===W?void 0:W.city,name:"officeAddress.city",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"State",defaultValue:null===(H=fe.officeAddress)||void 0===H?void 0:H.state,name:"officeAddress.state",disabled:!an})]}),(0,re.jsxs)("div",{className:An.twoInputContainer,children:[(0,re.jsx)(de.Z,{fullWidth:!0,label:"Country",defaultValue:null===(K=fe.officeAddress)||void 0===K?void 0:K.country,name:"officeAddress.country",disabled:!an}),(0,re.jsx)(de.Z,{fullWidth:!0,label:"Pincode",defaultValue:null===(Y=fe.officeAddress)||void 0===Y?void 0:Y.pincode,name:"officeAddress.pincode",disabled:!an})]})]})]})]})]}),(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Other Information"]})}),(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(Ue.Z,{className:An.inputContainer,control:(0,re.jsx)(Me.Z,{}),label:"Submitted by user",labelPlacement:"end",checked:fe.submittedByUser,name:"submittedByUser",onChange:function(e){return xe((function(n){return(0,r.Z)((0,r.Z)({},n),{},{submittedByUser:e.target.checked})}))},disabled:!an}),(0,re.jsx)(Ue.Z,{className:An.inputContainer,defaultValue:fe.agreedToTermsAndCondition,control:(0,re.jsx)(Me.Z,{}),label:"Agreed to terms & condition",disabled:!0,labelPlacement:"end"}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Purpose Of Purchase",name:"purposeOfPurchase",defaultValue:fe.purposeOfPurchase,disabled:!an}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Created By",value:null===(z=fe.BookingFormCreatedBy)||void 0===z?void 0:z.name,disabled:!0}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Updated By",value:null===(G=fe.BookingFormUpdatedBy)||void 0===G?void 0:G.name,disabled:!0}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Created At",value:J()(fe.createdAt).format("DD/MM/YYYY HH:MM:SS A"),disabled:!0}),(0,re.jsx)(de.Z,{className:An.inputContainer,label:"Updated At",value:J()(fe.updatedAt).format("DD/MM/YYYY HH:MM:SS A"),disabled:!0})]})]}),an&&(0,re.jsx)("section",{children:(0,re.jsxs)("div",{className:An.data,children:[(0,re.jsx)(F.Z,{variant:"outlined",onClick:function(e){return ne("..")},children:"Cancel"}),(0,re.jsx)(F.Z,{variant:"contained",type:"submit",children:"Save"})]})})]})}),(0,re.jsxs)("aside",{children:[(0,re.jsx)("div",{className:"".concat(An.container," ").concat(An.bfNotes),children:(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Approvals"]})}),(0,re.jsx)("div",{className:An.data,children:On})]})}),(0,re.jsx)(sn,{styles:An,baseURL:e.baseURL,bookingFormData:fe,isEditable:an}),(0,re.jsx)(mn,{styles:An,baseURL:e.baseURL,setReloadComp:Ze,isApprover:fe.isApprover}),!(0,j.Z)(fe.approvalHistory)&&$e&&(0,re.jsx)("div",{className:"".concat(An.container," ").concat(An.bfActions),children:(0,re.jsxs)("section",{children:[(0,re.jsx)("div",{className:An.headerInformation,children:(0,re.jsxs)("p",{children:[(0,re.jsx)(P.Z,{disableFocusRipple:!0,disableRipple:!0,children:(0,re.jsx)(Ke.Z,{})}),"Approval History"]})}),(0,re.jsx)("div",{className:An.data,style:{maxHeight:"40vh",overflow:"auto"},children:fe.approvalHistory.map((function(e){return(0,re.jsx)("div",{className:An.approvalHistoryContainer,children:(0,re.jsx)("div",{children:(0,re.jsxs)("div",{className:An.note,children:[(0,re.jsxs)("p",{children:[e.status+" ","on",J()(e.timestamp).isValid((function(){}))?J()(e.timestamp).utcOffset("+05:30").format(" DD/MM/YY [at] hh:mm A"):e.timestamp]}),!(0,j.Z)(e.note)&&(0,re.jsxs)("p",{children:[(0,re.jsxs)("strong",{children:[(0,re.jsx)("em",{children:"Note"})," : "]}),e.note]})]})})},e.timestamp)}))})]})})]})]}),(0,re.jsx)(Zn,{open:Ie,handelModelClose:Wn}),(0,re.jsx)(qe.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1},backgroundColor:"rgba(0,0,0, .8)"},open:Boolean(se.imgSrc),onClose:function(){return ie({imgSrc:"",imgAlt:""})},children:(0,re.jsxs)("div",{children:[(0,re.jsx)(U.Z,{className:An.downloadIcon,onClick:function(){}}),(0,re.jsx)(D.Z,{className:An.closeIcon,onClick:function(){return ie({imgSrc:"",imgAlt:""})}}),(0,re.jsx)("img",{className:An.imgViewer,ref:$,src:"data:image/png;base64,"+se.imgSrc,alt:se.imgAlt})]})})]})},En=(0,l.lazy)((function(){return t.e(648).then(t.bind(t,9648))}));function Tn(e){var n=(0,o.UO)().bookingFormId;return(0,re.jsx)(o.Fg,{to:"".concat(e.baseURL,"/").concat(n,"/view"),replace:!0})}var Rn=function(){var e=(0,c.I0)(),n=(0,u.T)(),t=(0,o.s0)(),m="/booking-form",h=(0,l.useState)([]),f=(0,i.Z)(h,2),x=f[0],j=f[1],v=(0,l.useMemo)((function(){return[{index:!0,element:(0,re.jsxs)(l.Suspense,{fallback:(0,re.jsx)(p.Z,{fallback:!0}),children:[(0,re.jsx)(En,{baseURL:m}),","]})},{path:"view",element:(0,re.jsx)(l.Suspense,{fallback:(0,re.jsx)(p.Z,{fallback:!0}),children:(0,re.jsx)(Ee,{baseURL:m})})},{path:"/:bookingFormId",element:(0,re.jsx)(Tn,{baseURL:m})},{path:":bookingFormId/view",element:(0,re.jsx)(l.Suspense,{fallback:(0,re.jsx)(p.Z,{fallback:!0}),children:(0,re.jsx)(In,{baseURL:m})})},{path:"reports",element:(0,re.jsx)(l.Suspense,{fallback:(0,re.jsx)(p.Z,{fallback:!0}),children:(0,re.jsx)("p",{children:"Will be added soon"})})},{path:"*",element:(0,re.jsx)(l.Suspense,{fallback:(0,re.jsx)(p.Z,{fallback:!0}),children:(0,re.jsx)(o.Fg,{to:"/error",state:{statusText:"Page Not Found!",status:404}})})}]}),[]);return(0,l.useEffect)((function(){(0,s.Z)((0,a.Z)().mark((function s(){var i;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,n({url:"/apps/booking-form/app-headers"});case 3:if(i=a.sent){a.next=6;break}return a.abrupt("return");case 6:e(d.UR.setHeaders({currentApp:"Booking Form",appTabs:i.allowedtabs.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{baseURL:m})})),appPermissions:i.permissions})),j(v),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),t("/error",{state:{status:a.t0.status,data:a.t0.msg}});case 13:case"end":return a.stop()}}),s,null,[[0,10]])})))()}),[e,t,v,n]),(0,o.V$)(x)}},6133:function(e,n,t){var a=t(4768),r=t(3855);n.Z=function(e){var n=(0,r.v9)((function(e){return e[a.qM]})).appTabs;return[n.filter((function(n){return n.endpoint===e})).length>0,n]}}}]);
//# sourceMappingURL=76.0826468f.chunk.js.map