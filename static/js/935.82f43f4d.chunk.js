"use strict";(self.webpackChunkmy_admin=self.webpackChunkmy_admin||[]).push([[935],{9935:function(e,t,n){n.r(t),n.d(t,{default:function(){return pe}});var r=n(1413),a=n(4165),o=n(5861),i=n(9439),l=n(1642),c=n(2791),s=n(7689),u=n(6133),d=n(2785),h=n(3855),f=n(8610),x=n(4349),p=n(4768),g=n(4942),m=n(6934),b=n(2426),Z=n.n(b),v=n(1087),j=n(8745),w=n(6548),S=n(5855),y=n(911),_=n(2065),A=n(9281),R=n(5527),T=n(9836),k=n(6890),C=n(3382),E=n(3400),M=n(3786),D=n(1286),N=n(7247),I=n(2898),q=n(184),F=(0,l.Z)({"table-container":"TableView_table-container__h38nv","no-data-found":"TableView_no-data-found__v13Fm","load-more-container":"TableView_load-more-container__7bfD4","data-row":"TableView_data-row__nuplv","allow-editing":"TableView_allow-editing__ahtns"}),U=(0,m.ZP)(j.Z)((function(e){var t,n=e.theme;return t={},(0,g.Z)(t,"&.".concat(w.Z.head),{backgroundColor:n.palette.common.black,color:n.palette.common.white}),(0,g.Z)(t,"&.".concat(w.Z.body),{fontSize:14}),t})),P=(0,m.ZP)(S.Z)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),B=(0,m.ZP)((function(e){return(0,q.jsx)(y.Z,(0,r.Z)({elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))}))((function(e){var t=e.theme;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,_.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));var L=function(e){var t=(0,c.useState)([]),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=(0,h.v9)((function(e){return e[p.qM].appPermissions})).isEditable,l=(0,c.useState)({anchor:null,sourceId:null}),s=(0,i.Z)(l,2),u=s[0],d=s[1];return(0,c.useEffect)((function(){a(e.sourceData)}),[e.sourceData]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("div",{className:"".concat(F.tableContainer," ").concat(o?F.allowEditing:""),children:(0,q.jsxs)(A.Z,{component:R.Z,children:[(0,q.jsxs)(T.Z,{sx:{minWidth:700},"aria-label":"customized table",children:[(0,q.jsx)(k.Z,{children:(0,q.jsxs)(S.Z,{children:[(0,q.jsx)(U,{align:"left",children:"Index"}),(0,q.jsx)(U,{children:"Source"}),(0,q.jsx)(U,{children:"Sub Source"}),(0,q.jsx)(U,{align:"center",children:"Created Date Time"}),(0,q.jsx)(U,{align:"center",children:"Created By"}),(0,q.jsx)(U,{align:"center",children:"Updated By"}),(0,q.jsx)(U,{})]})}),(0,q.jsx)(C.Z,{children:!(0,f.Z)(r)&&r.map((function(e,t){return(0,q.jsxs)(P,{className:F.dataRow,children:[(0,q.jsx)(U,{children:++t}),(0,q.jsx)(U,{component:"th",scope:"row",children:e.label}),(0,q.jsx)(U,{children:e.subsources.map((function(e){return e.label})).join(", ")}),(0,q.jsx)(U,{align:"center",children:"Invalid Date"!==Z()(e.createdAt)&&Z()(e.createdAt).format("DD/MM/YYYY HH:MM A")}),(0,q.jsx)(U,{align:"center",children:(0,q.jsxs)(v.rU,{to:"/profile/".concat(e.SourceCreatedBy.id,"/info"),children:[" ",e.SourceCreatedBy.name]})}),(0,q.jsx)(U,{align:"center",children:(0,q.jsxs)(v.rU,{to:"/profile/".concat(e.SourceUpdatedBy.id,"/info"),children:[" ",e.SourceUpdatedBy.name]})}),(0,q.jsx)(U,{align:"center",children:(0,q.jsx)(E.Z,{onClick:function(t){return d({anchor:t.currentTarget,sourceId:e.id})},children:(0,q.jsx)(I.Z,{})})})]},e.id)}))})]}),(0,f.Z)(r)&&(0,q.jsx)("h3",{className:F.noDataFound,children:"No Data Found"})]})}),(0,q.jsxs)(B,{id:"source-menu",anchorEl:u.anchor,open:Boolean(u.sourceId)&&o,onClose:function(e){return d({anchor:null,sourceId:null})},children:[(0,q.jsxs)(M.Z,{onClick:function(t){e.handelSourceEditRequest(u.sourceId),d({anchor:null,sourceId:null})},children:[(0,q.jsx)(D.Z,{}),"Edit"]}),(0,q.jsxs)(M.Z,{onClick:function(t){e.handelSourceDeleteRequest(u.sourceId),d({anchor:null,sourceId:null})},children:[(0,q.jsx)(N.Z,{}),"Delete"]})]})]})},V=n(2419),O=n(4895),z=n(5574),K=n(7462),W=n(3366),Y=n(3733),H=n(4419),G=n(890),J=n(1402),Q=n(7673),X=n(5090),$=["className","id"],ee=(0,m.ZP)(G.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:"16px 24px",flex:"0 0 auto"}),te=c.forwardRef((function(e,t){var n=(0,J.Z)({props:e,name:"MuiDialogTitle"}),r=n.className,a=n.id,o=(0,W.Z)(n,$),i=n,l=function(e){var t=e.classes;return(0,H.Z)({root:["root"]},Q.a,t)}(i),s=c.useContext(X.Z).titleId,u=void 0===s?a:s;return(0,q.jsx)(ee,(0,K.Z)({component:"h2",className:(0,Y.Z)(l.root,r),ownerState:i,ref:t,variant:"h6",id:null!=a?a:u},o))})),ne=n(9157),re=n(5878),ae=n(1217);function oe(e){return(0,ae.Z)("MuiDialogContentText",e)}(0,re.Z)("MuiDialogContentText",["root"]);var ie=["children","className"],le=(0,m.ZP)(G.Z,{shouldForwardProp:function(e){return(0,m.FO)(e)||"classes"===e},name:"MuiDialogContentText",slot:"Root",overridesResolver:function(e,t){return t.root}})({}),ce=c.forwardRef((function(e,t){var n=(0,J.Z)({props:e,name:"MuiDialogContentText"}),r=n.className,a=(0,W.Z)(n,ie),o=function(e){var t=e.classes,n=(0,H.Z)({root:["root"]},oe,t);return(0,K.Z)({},t,n)}(a);return(0,q.jsx)(le,(0,K.Z)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:a,className:(0,Y.Z)(o.root,r)},n,{classes:o}))})),se=n(7123),ue=n(4294),de={callback:null,title:"",desc:"",disagreeAltText:"",agreeAltText:"",note:"",open:!1,other:{}};var he=function(e){var t=(0,c.useState)(!1),n=(0,i.Z)(t,2),r=n[0],a=n[1];function o(){e.callback&&e.callback(!1)}return(0,c.useEffect)((function(){a(e.open)}),[e.open]),r&&(0,q.jsxs)(z.Z,{open:!0,onClose:function(){o()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,q.jsx)(te,{id:"alert-dialog-title",children:e.title}),(0,q.jsxs)(ne.Z,{children:[(0,q.jsx)(ce,{id:"alert-dialog-description",children:e.desc}),e.note&&(0,q.jsx)(ce,{id:"alert-dialog-description",children:e.note})]}),(0,q.jsxs)(se.Z,{children:[(0,q.jsx)(ue.Z,{onClick:o,children:e.disagreeAltText||"Disagree"}),(0,q.jsx)(ue.Z,{onClick:function(){e.callback&&e.callback(!0)},children:e.agreeAltText||"Agree"})]})]})},fe=(0,c.lazy)((function(){return n.e(411).then(n.bind(n,411))})),xe=(0,l.Z)({"view-container":"ViewAll_view-container__+AcRg","tool-bar":"ViewAll_tool-bar__83920",right:"ViewAll_right__KnR8s","search-conatiner":"ViewAll_search-conatiner__kf0BC"});var pe=function(e){var t=(0,h.I0)(),n=(0,d.T)(),l=(0,u.Z)("view"),g=(0,i.Z)(l,1)[0],m=(0,c.useState)([]),b=(0,i.Z)(m,2),Z=b[0],v=b[1],j=(0,c.useState)(null),w=(0,i.Z)(j,2),S=w[0],y=w[1],_=(0,c.useState)(de),A=(0,i.Z)(_,2),R=A[0],T=A[1],k=(0,s.s0)(),C=(0,h.v9)((function(e){return e[p.qM]})).appPermissions.isEditable;function M(r){if(!r)return T(de);T((function(r){var a=r.other.id,o=e.baseURL+"/".concat(a,"/delete-source");return n({url:o,method:"POST"}).then((function(e){v((function(e){return e.filter((function(e){return e.id!==a}))})),t(x.K7.showAlert({message:"Source '".concat(r.other.label,"' deleted successfully!"),title:"Request Sucessful!",severity:"success"}))})).catch((function(e){t(x.K7.showAlert({message:e.msg||"Source deletion failed",title:"Request Failed!",severity:"error"}))})),de}))}return g||k("/error",{state:{status:403,msg:"Your not allowed to access 'View' tab"}}),(0,c.useEffect)((function(){(0,o.Z)((0,a.Z)().mark((function r(){var o,i,l;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=e.baseURL+"/retrive-source-with-subsource",r.next=4,n({url:o});case 4:i=r.sent,v(i),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),t(x.K7.showAlert({message:null!==(l=r.t0.msg)&&void 0!==l?l:"Failed to fetch booking form data!",title:"Request Failed!",severity:"error"}));case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()}),[t,e.baseURL,n]),(0,q.jsxs)("div",{className:xe.viewContainer,children:[C&&(0,q.jsxs)("div",{className:xe.toolBar,children:[(0,q.jsx)("div",{className:xe.left}),(0,q.jsx)("div",{className:xe.right,children:(0,q.jsx)(E.Z,{onClick:function(e){return y({type:"CREATE_NEW"})},children:(0,q.jsx)(V.Z,{})})})]}),(0,q.jsx)(L,{baseURL:e.baseURL,sourceData:Z,handelSourceEditRequest:function(e){var n=Z.filter((function(t){return t.id===e}));if((0,f.Z)(Z)||n.length<=0)return t(x.K7.showAlert({message:"No source data found!",title:"Edit Request Failed",severity:"error"}));y((0,r.Z)((0,r.Z)({},n[0]),{},{type:"UPDATE"}))},handelSourceDeleteRequest:function(e){var t=Z.filter((function(t){return t.id===e}))[0].label;T({callback:M,title:"Request for confirmation",desc:"Are you sure you want to delete '".concat(t,"' source along with all the sub sources?"),note:"*Note: Source attached to booking form cannot be deleted",disagreeAltText:"No",agreeAltText:"Yes",open:!0,other:{id:e,label:t}})}}),(0,q.jsx)(c.Suspense,{fallback:(0,q.jsx)(O.Z,{fallback:!0}),children:Boolean(S)&&(0,q.jsx)(fe,{sourceData:S,requstHandler:function(r){var a=r.type,o=r.action;if("CLOSE_MODAL"===a&&y(null),"FORM_SUBMISSION"===a){var i=e.baseURL+("CREATE_NEW"===S.type?"/create-source":"/".concat(S.id,"/update-source")),l=new URLSearchParams(o.data);n({url:i,method:"POST",body:l}).then((function(e){"CREATE_NEW"===S.type?(v((function(t){return t.push(e),t})),t(x.K7.showAlert({message:"Source & Subsource created successfully!",title:"Success",severity:"success"}))):(v(Z.map((function(t){return t.id!==e.id?t:e}))),t(x.K7.showAlert({message:"Source & Subsource updated successfully!",title:"Success",severity:"success"}))),y(null)})).catch((function(e){t(x.K7.showAlert({message:e.msg||"Failed to "+("CREATE_NEW"===S.type?"create":"update"),title:"Request Failed",severity:"error"}))}))}}})}),(0,q.jsx)(c.Suspense,{fallback:(0,q.jsx)(O.Z,{fallback:!0}),children:(0,q.jsx)(he,{open:R.open,title:R.title,desc:R.desc,note:R.note,callback:R.callback,agreeAltText:R.agreeAltText,disagreeAltText:R.disagreeAltText})})]})}},6133:function(e,t,n){var r=n(4768),a=n(3855);t.Z=function(e){var t=(0,a.v9)((function(e){return e[r.qM]})).appTabs;return[t.filter((function(t){return t.endpoint===e})).length>0,t]}},1286:function(e,t,n){var r=n(4836);t.Z=void 0;var a=r(n(5649)),o=n(184),i=(0,a.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=i}}]);
//# sourceMappingURL=935.82f43f4d.chunk.js.map