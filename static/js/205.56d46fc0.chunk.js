"use strict";(self.webpackChunkmy_admin=self.webpackChunkmy_admin||[]).push([[205],{6289:(e,a,t)=>{t.d(a,{A:()=>h});var n=t(3843),s=t(344),i=t(3368),l=t(6446),r=t(7392),o=t(5865),d=t(9336),c=t(4802);var u=t(579);const p=(0,n.A)({"close-icon":"PopupModel_close-icon__toNv0","children-container":"PopupModel_children-container__fbG7T"}),m={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70vw",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,maxHeight:"85vh",p:4};const h=function(e){return m.width=(0,s.A)("(min-width:700px)")?"70vw":"95vw",(0,u.jsx)(i.A,{open:e.open,children:(0,u.jsxs)(l.A,{sx:m,children:[(0,u.jsx)(r.A,{className:p.closeIcon,onClick:null===e||void 0===e?void 0:e.handelModelClose,children:(0,u.jsx)(c.A,{})}),e.title&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.A,{variant:"h5",component:"h2",textAlign:"center",children:(0,u.jsx)("strong",{children:e.title})}),(0,u.jsx)(d.A,{variant:"middle",sx:{marginY:2}})]}),(0,u.jsx)("div",{className:p.childrenContainer,children:(0,u.jsx)("div",{style:{marginRight:10},children:e.children})})]})})}},6205:(e,a,t)=>{t.r(a),t.d(a,{default:()=>wa});var n=t(5043),s=t(3216),i=t(8298),l=t(6878),r=t(2843),o=t(4698),d=t(3843),c=t(5475),u=t(703),p=t(2991),m=t(3962),h=t(4050),A=t(1787),x=t(7739),j=t(4109),f=t(6446),b=t(9336),v=t(889),y=t(6605),N=t(710),g=t(44),C=t(7392),_=t(1136),w=t(5721),S=t(681),P=t(5865),I=t(8968),E=t(8734),R=t(1906),T=t(6360),k=t(4802),F=t(3635),O=t(8751),V=t(7030),D=t(2505),L=t(8625),U=t(5382),M=t(1337),q=t(4535),B=t(6178),W=t.n(B),H=t(9652),Y=t(7502),z=t(8076),J=t(9650),G=t(3336),K=t(1806),Z=t(4882),Q=t(3460);var X=t(579);const $=(0,d.A)({"table-container":"TableView_table-container__ONbVZ","no-data-found":"TableView_no-data-found__7KN7I","load-more-container":"TableView_load-more-container__KRG5d","data-row":"TableView_data-row__zXZ-n"}),ee=(0,q.Ay)(H.A)((e=>{let{theme:a}=e;return{["&.".concat(Y.A.head)]:{backgroundColor:a.palette.common.black,color:a.palette.common.white},["&.".concat(Y.A.body)]:{fontSize:14}}})),ae=(0,q.Ay)(z.A)((e=>{let{theme:a}=e;return{"&:nth-of-type(odd)":{backgroundColor:a.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));function te(e,a){if("NEW_DATA"===a.type){const t=a.data.length>100;return t&&a.data.pop(),(0,p.A)(a.data)?{data:[...e.data],loadMore:!1}:{data:[...e.data,...a.data],loadMore:t}}if("RESET"===a.type)return e}const ne=function(e){const a=(0,i.wA)(),t=(0,r.S)(),[s,l]=(0,n.useReducer)(te,{data:[],loadMore:!1});async function o(){const n=new URL(window.location),i=e.baseURL+"/view"+n.search,r={};r.total_count=s.data.length;try{const e=await t({url:i,headers:r});l({type:"NEW_DATA",data:e})}catch(d){var o;a(u.sl.showAlert({message:null!==(o=d.msg)&&void 0!==o?o:"Failed to fetch booking form data!",title:"Request Failed!",severity:"error"}))}}return(0,n.useEffect)((()=>{(async()=>{await o()})()}),[]),(0,X.jsxs)("div",{className:$.tableContainer,children:[(0,X.jsxs)(J.A,{component:G.A,children:[(0,X.jsxs)(K.A,{sx:{minWidth:700},"aria-label":"customized table",children:[(0,X.jsx)(Z.A,{children:(0,X.jsxs)(z.A,{children:[(0,X.jsx)(ee,{align:"left",children:"Index"}),(0,X.jsx)(ee,{children:"Full Name"}),(0,X.jsx)(ee,{align:"center",children:"Email"}),(0,X.jsx)(ee,{align:"center",children:"Mobile Number"}),(0,X.jsx)(ee,{align:"center",children:"Project Name"}),(0,X.jsx)(ee,{align:"center",children:"Project Unit Name"}),(0,X.jsx)(ee,{align:"center",children:"Status"}),(0,X.jsx)(ee,{align:"center",children:"Submitted"}),(0,X.jsx)(ee,{align:"center",children:"Created Date Time"}),(0,X.jsx)(ee,{align:"center",children:"Created By"})]})}),(0,X.jsx)(Q.A,{children:s.data.map(((a,t)=>(0,X.jsxs)(ae,{className:$.dataRow,children:[(0,X.jsx)(ee,{align:"center",children:++t}),(0,X.jsx)(ee,{component:"th",scope:"row",children:(0,X.jsx)(c.N_,{to:"".concat(e.baseURL,"/").concat(a.id,"/view"),children:a.fullName})}),(0,X.jsx)(ee,{align:"center",children:a.emailId}),(0,X.jsx)(ee,{align:"center",children:a.mobileNumber}),(0,X.jsx)(ee,{align:"center",children:a.Project.name}),(0,X.jsx)(ee,{align:"center",children:a.ProjectUnit.name}),(0,X.jsx)(ee,{align:"center",children:a.status}),(0,X.jsx)(ee,{align:"center",children:a.submittedByUser&&(0,X.jsx)(U.A,{})}),(0,X.jsx)(ee,{align:"center",children:"Invalid Date"!==W()(a.createdAt)&&W()(a.createdAt).format("DD/MM/YYYY HH:MM A")}),(0,X.jsx)(ee,{align:"center",children:(0,X.jsxs)(c.N_,{to:"/profile/".concat(a.BookingFormCreatedBy.id,"/info"),children:[" ",a.BookingFormCreatedBy.name]})})]},a.id)))})]}),(0,p.A)(s.data)&&(0,X.jsx)("h3",{className:$.noDataFound,children:"No Data Found"})]}),s.loadMore&&(0,X.jsx)(G.A,{className:$.loadMoreContainer,onClick:o,children:(0,X.jsx)(R.A,{variant:"outlined",children:"Load More"})})]})};var se=t(5795),ie=t(6311),le=t(7254),re=t(2083),oe=t(4511),de=t(5640),ce=t(1707),ue=t(5896);const pe={"view-container":"ViewAll_view-container__yELjO","tool-bar":"ViewAll_tool-bar__f3byj",right:"ViewAll_right__W9W8t","search-conatiner":"ViewAll_search-conatiner__e2jVS",icon:"ViewAll_icon__KTlA1",input:"ViewAll_input__qeJzf",active:"ViewAll_active__0wmK5","searchbar-animation-in":"ViewAll_searchbar-animation-in__fNwbe",drawer:"ViewAll_drawer__a-noz","filter-actions":"ViewAll_filter-actions__QMsjq","filters-list":"ViewAll_filters-list__eK8NN",filter:"ViewAll_filter__Caf+r"},me=(0,d.A)(pe);function he(e,a){const t=JSON.parse(JSON.stringify(e));return"NEW"===a.type?a.data.length>1?(t.dataList=a.data,t.currentDataIndex=0,t.showIterator=!0,t.totalDataLength=a.data.length,t):(t.dataList=a.data,t.currentDataIndex=0,t.showIterator=!1,t.totalDataLength=a.data.length,t):"NEXT"===a.type?t.currentDataIndex+1>=t.totalDataLength?(t.currentDataIndex=0,t):(++t.currentDataIndex,t):"PREV"===a.type?t.currentDataIndex-1<0?(t.currentDataIndex=t.totalDataLength-1,t):(--t.currentDataIndex,t):void 0}const Ae=function(e){const a=e.styles,t=(0,i.wA)(),s=(0,r.S)(),[l,o]=(0,n.useState)("phone"),[d,c]=(0,n.useReducer)(he,{dataList:null,currentDataIndex:null,showIterator:!1,totalDataLength:null});async function m(e){c({type:e})}return(0,n.useEffect)((()=>{null!==d.currentDataIndex&&0!==d.currentDataIndex&&e.handelFetchedUserData(d.dataList[d.currentDataIndex])}),[d.currentDataIndex]),(0,X.jsxs)("form",{action:"#",method:"POST",autoComplete:"off",onSubmit:async function(a){try{a.preventDefault();const n=a.target.elements.userInfo.value,i="".concat(e.baseURL,"/get-leadsquare-data?getby=").concat(l,"&userinfo=").concat(n);if((0,p.A)(n))return t(u.sl.showAlert({message:"User info cannot be empty",title:"Invalid Request!",severity:"warning"}));const r=await s({url:i});if((0,p.A)(r))return t(u.sl.showAlert({message:"",title:"No Records Found!",severity:"error"}));c({type:"NEW",data:r}),e.handelFetchedUserData(r[0])}catch(i){var n;t(u.sl.showAlert({message:null!==(n=i.msg)&&void 0!==n?n:"Failed to fetch user data!",title:"Request Failed!",severity:"error"}))}},children:[(0,X.jsxs)(P.A,{variant:"h6",component:"h6",textAlign:"left",sx:{marginBottom:2},children:["Fetch Data From Leadsquare",(0,X.jsx)(P.A,{variant:"caption",display:"inline-block",children:"\xa0(optional)"})]}),(0,X.jsx)("div",{className:a.inputGroup,children:(0,X.jsxs)(re.A,{color:"primary",exclusive:!0,value:l,onChange:(e,a)=>o(a),children:[(0,X.jsx)(oe.A,{value:"phone",children:"Phone"}),(0,X.jsx)(oe.A,{value:"emailaddress",children:"Email"}),(0,X.jsx)(oe.A,{value:"id",children:"Leadsquare Id"})]})}),(0,X.jsxs)("div",{className:a.inputGroup,style:{marginTop:16},children:[(0,X.jsx)(se.A,{className:a.input,label:"User Info",name:"userInfo",required:!0}),(0,X.jsx)("span",{className:me.icon,style:{backgroundColor:"transparent"},children:(0,X.jsx)(x.A,{title:"Sync Data",children:(0,X.jsx)(C.A,{type:"submit",sx:{bgcolor:"#5c5c5c14"},size:"large",children:(0,X.jsx)(de.A,{})})})})]}),d.showIterator&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(P.A,{variant:"body2",component:"p",textAlign:"center",color:"tomato",sx:{marginY:2},children:"Multiple user records were discovered! Use the buttons below to navigate the data and find the relevant information."}),(0,X.jsxs)("div",{className:"".concat(a.inputGroup," ").concat(a.fetchedDataIterator),children:[(0,X.jsx)("span",{className:me.icon,style:{backgroundColor:"transparent"},children:(0,X.jsx)(x.A,{title:"View Previous Data",children:(0,X.jsx)(C.A,{size:"large",sx:{bgcolor:"#5c5c5c14"},onClick:e=>m("PREV"),children:(0,X.jsx)(ue.A,{})})})}),(0,X.jsxs)(P.A,{variant:"overline",component:"p",textAlign:"center",display:"inline",sx:{marginY:2},children:[d.currentDataIndex+1," of ",d.totalDataLength]}),(0,X.jsx)("span",{className:me.icon,style:{backgroundColor:"transparent"},children:(0,X.jsx)(x.A,{title:"View Next Data",children:(0,X.jsx)(C.A,{size:"large",sx:{bgcolor:"#5c5c5c14"},onClick:e=>m("NEXT"),children:(0,X.jsx)(ce.A,{})})})})]})]})]})};var xe=t(2954),je=t(7199),fe=t(9248),be=t(6289);const ve=function(e){const a=["cp","c p","channel partner"],t=e.styles,[s,l]=(0,n.useState)({sourceWithSubSource:[],currentSubSourceForSource:[]}),o=(0,i.wA)(),d=(0,r.S)(),[c,m]=(0,n.useState)(!1),[h,A]=(0,n.useState)([]);function x(a,t){e.setUserData((e=>({...e,[a]:t})))}return(0,n.useEffect)((()=>{(async()=>{try{const e="/source/retrive-source-with-subsource",a=await d({url:e});l((e=>({...e,sourceWithSubSource:a})))}catch(a){var e;o(u.sl.showAlert({message:null!==(e=a.msg)&&void 0!==e?e:"Failed to fetch source data!",title:"Request Failed!",severity:"error"}))}})()}),[]),(0,n.useEffect)((()=>{var t,n;if((0,p.A)(s.sourceWithSubSource))return;if((0,p.A)(null===(t=e.userData)||void 0===t||null===(n=t.source)||void 0===n?void 0:n.id))return void l((e=>({...e,currentSubSourceForSource:[]})));const i=s.sourceWithSubSource.filter((a=>a.id===e.userData.source.id));if(a.includes(e.userData.source.label)&&(0,p.A)(h)){d({url:"/channel-partner/view-all"}).then((e=>{const a=e.map((e=>({...e,label:e.name})));A(a)})).catch((e=>{var a;o(u.sl.showAlert({message:null!==(a=e.msg)&&void 0!==a?a:"Failed to fetch source data!",title:"Request Failed!",severity:"error"}))}))}l((e=>{var a;return{...e,currentSubSourceForSource:(null===(a=i[0])||void 0===a?void 0:a.subsources)||null}}))}),[e.userData.source,s.sourceWithSubSource]),(0,n.useEffect)((()=>{var t,n;m(a.includes(null===(t=e.userData.source)||void 0===t||null===(n=t.label)||void 0===n?void 0:n.toLowerCase()))}),[e.userData.source]),(0,X.jsxs)("div",{className:t.inputGroup,children:[(0,X.jsx)(ie.A,{className:t.input,disablePortal:!0,options:s.sourceWithSubSource.map((e=>({id:e.id,label:e.label}))),value:e.userData.source,onChange:(e,a)=>x("source",a),isOptionEqualToValue:(e,a)=>e.id===a.id,loadingText:"Fetching source infromation",renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Source",required:!0})}),(0,X.jsx)(ie.A,{className:t.input,disablePortal:!0,options:s.currentSubSourceForSource,value:e.userData.subSource,onChange:(e,a)=>x("subSource",a),isOptionEqualToValue:(e,a)=>e.id===a.id,noOptionsText:"Select a source to fetch subsource information",loadingText:"Fetching subsource information",renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Sub Source"})}),c&&(0,X.jsx)(ie.A,{className:t.input,disablePortal:!0,options:h,value:e.userData.channelpartner,onChange:(e,a)=>x("channelpartner",a),isOptionEqualToValue:(e,a)=>e.id===a.id,renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Channel Partner",required:!0})})]})},ye=(0,q.Ay)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),Ne=(0,d.A)({"input-group":"CreateNew_input-group__W1fKb","fetched-data-iterator":"CreateNew_fetched-data-iterator__3wWvV",input:"CreateNew_input__EJurn"});const ge=function(e){var a,t;const s=(0,i.wA)(),l=(0,r.S)(),[o,d]=(0,n.useState)({projects:[],projectUnits:[]}),[c,m]=(0,n.useState)({fullName:"",emailId:"",mobileNumber:"",project:"",projectUnit:"",source:"",subSource:"",channelPartner:"",priceSheet:{}});function h(e){const a=e.target.name,t=e.target.value;if("file"===e.target.type){const a=e.target.files[0],t=a.type,n=a.name;if("application/pdf"!==t)return s(u.sl.showAlert({message:"Only PDF file types are supported!",title:"Request Failed!",severity:"error"}));s(fe.VN.setDisplayLoader({from:"PDF Loader",state:!0}));const i=new FileReader;return i.readAsDataURL(a),void(i.onload=()=>{const e=i.result.split(",")[1];m((a=>({...a,priceSheet:{fileName:n,type:t,data:e}}))),s(fe.VN.setDisplayLoader({from:"PDF Loader",state:!1}))})}m((e=>({...e,[a]:t})))}function A(a){m({fullName:"",emailId:"",mobileNumber:"",project:"",projectUnit:"",source:"",subSource:"",channelPartner:"",priceSheet:""}),e.onCloseEvent&&e.onCloseEvent()}return(0,n.useEffect)((()=>{e.open&&(async()=>{try{const e="/projects/list-all",a=await l({url:e});d((e=>({...e,projects:a.map((e=>({...e,label:e.name})))})))}catch(a){var e;s(u.sl.showAlert({message:null!==(e=a.msg)&&void 0!==e?e:"Failed to fetch projects data!",title:"Request Failed!",severity:"error"}))}})()}),[e.open]),(0,n.useEffect)((()=>{(async()=>{try{var e;if(null===c||void 0===c||null===(e=c.project)||void 0===e||!e.id)return;const a="/projects/".concat(c.project.id,"/fetch-units"),t=await l({url:a});d((e=>({...e,projectUnits:t.map((e=>({...e,label:e.name})))})))}catch(t){var a;s(u.sl.showAlert({message:null!==(a=t.msg)&&void 0!==a?a:"Failed to fetch projects unit data!",title:"Request Failed!",severity:"error"}))}})()}),[c.project]),(0,X.jsxs)(be.A,{title:"Create New Booking Form",open:e.open,handelModelClose:A,children:[(0,X.jsx)(Ae,{baseURL:e.baseURL,styles:Ne,handelFetchedUserData:function(e){const a=(((0,p.A)(e.FirstName)?"":e.FirstName)+" "+((0,p.A)(e.LastName)?"":e.LastName)).trim(),t=(0,p.A)(e.EmailAddress)?"":e.EmailAddress,n=(0,p.A)(e.Phone)?"":e.Phone,s=(0,p.A)(e.mx_Project_Name)?"":e.mx_Project_Name,i=(0,p.A)(e.Source)?"":e.Source,l=(0,p.A)(e.mx_Sub_Source)?"":e.mx_Sub_Source,r=(0,p.A)(e.mx_Channel_Partner_Name)?"":e.mx_Channel_Partner_Name;m({fullName:a,emailId:t,mobileNumber:n,project:s,projectUnit:"",source:i,subSource:l,channelPartner:r,priceSheet:{}})}}),(0,X.jsx)(b.A,{variant:"middle",sx:{marginY:2}}),(0,X.jsxs)("form",{autoComplete:"false",method:"POST",action:"#",onSubmit:async function(a){try{a.preventDefault();const t=e.baseURL+"/create-bookingform",n="POST",s={"content-type":"application/json"},i=JSON.stringify(c),r=await l({url:t,method:n,headers:s,body:i});console.log(r)}catch(n){var t;s(u.sl.showAlert({message:null!==(t=n.msg)&&void 0!==t?t:"Failed to create bookingform!",title:"Request Failed!",severity:"error"}))}},children:[(0,X.jsx)(P.A,{variant:"h6",component:"h6",textAlign:"left",sx:{marginBottom:2},children:"Personal Information"}),(0,X.jsxs)("div",{className:Ne.inputGroup,children:[(0,X.jsx)(se.A,{className:Ne.input,label:"Full Name",name:"fullName",value:c.fullName,onChange:h,required:!0}),(0,X.jsx)(se.A,{className:Ne.input,label:"Email Id",name:"emailId",value:c.emailId,onChange:h,required:!0}),(0,X.jsx)(se.A,{className:Ne.input,label:"Mobile Number",name:"mobileNumber",value:c.mobileNumber,onChange:h})]}),(0,X.jsx)(b.A,{variant:"middle",sx:{marginY:2}}),(0,X.jsxs)("div",{className:Ne.inputContainer,children:[(0,X.jsx)(P.A,{variant:"h6",component:"h6",textAlign:"left",sx:{marginBottom:2},children:"Project Information"}),(0,X.jsxs)("div",{className:Ne.inputGroup,children:[(0,X.jsx)(ie.A,{className:Ne.input,disablePortal:!0,options:o.projects,value:c.project,onChange:function(e,a){m((e=>({...e,project:a,projectUnit:null}))),a||d((e=>({...e,projectUnits:[]})))},isOptionEqualToValue:(e,a)=>e.label===a,noOptionsText:"Fetching Projects Data..",renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Projects",required:!0})}),(0,X.jsx)(ie.A,{className:Ne.input,disablePortal:!0,options:o.projectUnits,value:c.projectUnit,onChange:(e,a)=>m((e=>({...e,projectUnit:a}))),isOptionEqualToValue:(e,a)=>e.id===a.id,noOptionsText:"Please select a project to show its related units",renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Project Units",required:!0})}),(0,X.jsxs)(R.A,{component:"label",role:void 0,variant:"outlined",tabIndex:-1,startIcon:(0,X.jsx)(xe.A,{}),children:["Upload Price Sheet",(0,X.jsx)(ye,{onChange:h,type:"file",accept:"application/pdf",required:!0})]})]})]}),(null===(a=c.priceSheet)||void 0===a?void 0:a.data)&&(0,X.jsx)("div",{className:Ne.inputContainer,children:(0,X.jsxs)(le.A,{severity:"info",icon:(0,X.jsx)(je.A,{}),sx:{textAlign:"center",margin:"auto"},className:Ne.input,children:['File "',null===(t=c.priceSheet)||void 0===t?void 0:t.fileName,'" has been selected!']})}),(0,X.jsx)(b.A,{variant:"middle",sx:{marginY:2}}),(0,X.jsxs)("div",{className:Ne.inputContainer,children:[(0,X.jsx)(P.A,{variant:"h6",component:"h6",textAlign:"left",sx:{marginBottom:2},children:"Source Information"}),(0,X.jsx)(ve,{styles:Ne,userData:c,setUserData:m})]}),(0,X.jsx)(b.A,{variant:"middle",sx:{marginY:2}}),(0,X.jsxs)("div",{className:Ne.inputGroup,children:[(0,X.jsx)(R.A,{variant:"outlined",onClick:A,children:"Cancel"}),(0,X.jsx)(R.A,{variant:"contained",type:"submit",children:"Create"})]})]})]})},Ce=(0,d.A)(pe);function _e(e,a){const t={...e};return"INIT"===a.type&&(a.search&&(t.search=a.search.trim()),a.status&&(t.status=new Set(a.status.split(";").map((e=>e.trim())))),a.years&&(t.years=new Set(a.years.split(";").map((e=>e.trim())))),a.projects&&(t.projects=new Set(a.projects.split(";").map((e=>e.trim())))),a.submittedByUser&&(t.submittedByUser=new Set(a.submittedByUser.split(";").map((e=>e.trim()))))),"PROCESS_FILTER"===a.type&&("search"===a.filterType?t[a.filterType]=a.value:(t[a.filterType].has(a.value)?t[a.filterType].delete(a.value):t[a.filterType].add(a.value),t.filterStatus.filterApplied=!1)),"RESET"===a.type?{search:e.search,status:new Set,years:new Set,projects:new Set,submittedByUser:new Set,filterStatus:{displayBadge:!1,filterApplied:!1}}:("FILTER_APPLIED"===a.type&&(t.filterStatus.filterApplied=!0),t.filterStatus.displayBadge=t.status.size>0||t.years.size>0||t.projects.size>0||t.submittedByUser.size>0,t)}const we=function(e){const[a,t]=(0,n.useState)(null),[o,d]=(0,n.useState)(!1),[q,B]=(0,n.useState)(0),[W,H]=(0,n.useReducer)(_e,{search:null,status:new Set,years:new Set,projects:new Set,submittedByUser:new Set,filterStatus:{displayBadge:!1,filterApplied:!0}}),[Y,z]=(0,n.useState)([]),[J]=(0,c.ok)(),G=(0,i.wA)(),K=(0,r.S)(),Z=(0,n.useRef)(),[Q,$]=(0,n.useState)(!1),[ee]=(0,m.A)("view"),ae=(0,s.Zp)(),te=(0,i.d4)((e=>e[l.bh])),{isEditable:se}=te.appPermissions;function ie(e,a){H({type:"PROCESS_FILTER",filterType:e,value:a})}function le(){const e=function(e){const a=new URL(window.location),t=new URL(a.origin+a.pathname);return Object.keys(e).forEach((a=>{if("filterStatus"===a)return;if(null===e[a]||e[a].size<=0)return;if("search"===a&&(0,p.A)(e[a]))return;const n="search"===a?e[a]:[...e[a]].join(";");t.searchParams.set(a,n)})),t}(W);H({type:"FILTER_APPLIED"}),window.history.pushState({},"",e),B((e=>++e))}return ee||ae("/error",{state:{status:403,msg:"Your not allowed to access 'View' tab"}}),(0,n.useEffect)((()=>{try{(async()=>{const a=J.get("status"),t=J.get("years"),n=J.get("projects"),s=J.get("submittedByUser"),i=await K({url:e.baseURL+"/user-handled-projects"});z(i),H({type:"INIT",status:a,years:t,projects:n,submittedByUser:s})})()}catch(a){G(u.sl.showAlert({message:"Failed to fetch projects list!",title:"Request Failed!",severity:"error"}))}}),[]),(0,n.useEffect)((()=>{if(null===W.search)return;const e=setTimeout(le,500);return()=>clearTimeout(e)}),[W.search]),a&&setTimeout((()=>Z.current.focus()),100),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{className:Ce.viewContainer,children:[(0,X.jsxs)("div",{className:Ce.toolBar,children:[(0,X.jsx)("div",{className:Ce.left,children:(0,X.jsx)(g.x,{onClickAway:()=>{a&&t((e=>!1))},children:(0,X.jsxs)("div",{className:Ce.searchConatiner,children:[(0,X.jsx)("span",{className:Ce.icon,onClick:e=>t((e=>!e)),children:(0,X.jsx)(C.A,{children:a?(0,X.jsx)(k.A,{}):(0,X.jsx)(_.A,{variant:"dot",color:"success",invisible:(0,p.A)(W.search),children:(0,X.jsx)(T.A,{})})})}),(0,X.jsx)("div",{className:"".concat(Ce.input," ").concat(null!==a?a?Ce.active:Ce.notActive:""),children:(0,X.jsx)(h.A,{endAdornment:(0,X.jsx)(A.A,{position:"end",children:(0,X.jsx)(x.A,{title:"Search will be compared against Full Name, Mobile No, Email Id and Alternate Mobile No.",children:(0,X.jsx)(V.A,{fontSize:"small"})})}),placeholder:"Search",size:"small",type:"search",autoFocus:!0,inputRef:Z,onChange:e=>ie("search",e.target.value)})})]})})}),(0,X.jsxs)("div",{className:Ce.right,children:[(0,X.jsx)("span",{className:Ce.icon,children:(0,X.jsx)(x.A,{title:"Refresh",children:(0,X.jsx)(C.A,{onClick:e=>B((e=>++e)),children:(0,X.jsx)(L.A,{})})})}),(0,X.jsx)("span",{className:Ce.icon,children:(0,X.jsx)(x.A,{title:"Filters",children:(0,X.jsx)(C.A,{onClick:e=>d(!0),children:(0,X.jsx)(_.A,{variant:"dot",color:W.filterStatus.filterApplied?"success":"warning",invisible:!W.filterStatus.displayBadge,children:(0,X.jsx)(F.A,{})})})})}),(0,X.jsx)("span",{className:Ce.icon,children:(0,X.jsx)(x.A,{title:"Download",children:(0,X.jsx)(C.A,{disabled:!0,children:(0,X.jsx)(O.A,{})})})}),se&&(0,X.jsx)("span",{className:Ce.icon,children:(0,X.jsx)(x.A,{title:"Create New",children:(0,X.jsx)(C.A,{onClick:e=>$(!0),children:(0,X.jsx)(D.A,{})})})})]})]}),(0,X.jsx)(ne,{baseURL:e.baseURL},q)]}),(0,X.jsxs)(j.Ay,{className:Ce.drawer,anchor:"right",open:o,onClose:e=>d(!1),children:[(0,X.jsx)("main",{children:(0,X.jsx)(f.A,{sx:{width:350},role:"presentation",children:(0,X.jsxs)(w.A,{className:Ce.filtersList,children:[(0,X.jsx)(S.Ay,{children:(0,X.jsx)("h3",{children:"Filters"})}),(0,X.jsx)(b.A,{variant:"middle"}),(0,X.jsx)(S.Ay,{className:Ce.filter,children:(0,X.jsxs)(v.A,{defaultExpanded:!0,children:[(0,X.jsx)(y.A,{expandIcon:(0,X.jsx)(M.A,{}),children:(0,X.jsx)(P.A,{children:"Status"})}),(0,X.jsx)(N.A,{children:(0,X.jsx)(w.A,{sx:{width:"100%",bgcolor:"background.paper",maxHeight:200,overflow:"auto"},component:"nav",children:["Approved","Rejected","Pending"].map((e=>{var a;return(0,X.jsxs)(I.A,{onClick:a=>ie("status",e),children:[(0,X.jsx)(E.A,{primary:e}),(null===(a=W.status)||void 0===a?void 0:a.has(e))&&(0,X.jsx)(U.A,{})]},e)}))})})]})}),(0,X.jsx)(S.Ay,{className:Ce.filter,children:(0,X.jsxs)(v.A,{defaultExpanded:W.years.size>0,children:[(0,X.jsx)(y.A,{expandIcon:(0,X.jsx)(M.A,{}),children:(0,X.jsx)(P.A,{children:"Years"})}),(0,X.jsx)(N.A,{children:(0,X.jsx)(w.A,{sx:{width:"100%",bgcolor:"background.paper",maxHeight:400,overflow:"auto"},component:"nav",children:[...Array((new Date).getFullYear()+1-1995)].map(((e,a)=>{var t;const n=(new Date).getFullYear()-a;return(0,X.jsxs)(I.A,{onClick:e=>ie("years","".concat(n)),children:[(0,X.jsx)(E.A,{primary:n}),(null===(t=W.years)||void 0===t?void 0:t.has("".concat(n)))&&(0,X.jsx)(U.A,{})]},n)}))})})]})}),(0,X.jsx)(S.Ay,{className:Ce.filter,children:(0,X.jsxs)(v.A,{disabled:Y.length<=1,defaultExpanded:W.projects.size>1,children:[(0,X.jsx)(y.A,{expandIcon:(0,X.jsx)(M.A,{}),children:(0,X.jsx)(P.A,{children:"Projects"})}),(0,X.jsx)(N.A,{children:(0,X.jsx)(w.A,{sx:{width:"100%",bgcolor:"background.paper",maxHeight:350,overflow:"auto"},component:"nav",children:Y.map((e=>{var a;return(0,X.jsxs)(I.A,{disabled:Y.length<=1,onClick:a=>ie("projects",e.id),children:[(0,X.jsx)(E.A,{primary:e.name}),(null===(a=W.projects)||void 0===a?void 0:a.has(e.id))&&(0,X.jsx)(U.A,{})]},e.id)}))})})]})}),(0,X.jsx)(S.Ay,{className:Ce.filter,children:(0,X.jsxs)(v.A,{defaultExpanded:W.submittedByUser.size>0,children:[(0,X.jsx)(y.A,{expandIcon:(0,X.jsx)(M.A,{}),children:(0,X.jsx)(P.A,{children:"Submitted By User"})}),(0,X.jsx)(N.A,{children:(0,X.jsx)(w.A,{sx:{width:"100%",bgcolor:"background.paper",maxHeight:200,overflow:"auto"},component:"nav",children:[{key:"Submitted",value:"true"},{key:"Not Submited",value:"false"}].map((e=>{var a;return(0,X.jsxs)(I.A,{onClick:a=>ie("submittedByUser",e.value),children:[(0,X.jsx)(E.A,{primary:e.key}),(null===(a=W.submittedByUser)||void 0===a?void 0:a.has(e.value))&&(0,X.jsx)(U.A,{})]},e.key)}))})})]})})]})})}),(0,X.jsxs)("footer",{children:[(0,X.jsx)(b.A,{}),(0,X.jsxs)("div",{className:Ce.filterActions,children:[(0,X.jsx)(R.A,{variant:"outlined",onClick:e=>H({type:"RESET"}),children:"Reset"}),(0,X.jsx)(R.A,{variant:"contained",onClick:le,disabled:W.filterStatus.filterApplied,children:"Apply"})]})]})]}),(0,X.jsx)(ge,{baseURL:e.baseURL,open:Q,onCloseEvent:e=>$(!1)})]})};function Se(e){var a=function(e){const a=1024,t=atob(e),n=t.length,s=Math.ceil(n/a),i=new Array(s);for(let l=0;l<s;++l){const e=l*a,s=Math.min(e+a,n),r=new Array(s-e);for(let a=e,n=0;a<s;++n,++a)r[n]=t[a].charCodeAt(0);i[l]=new Uint8Array(r)}return new Blob(i,{type:"application/pdf"})}(e);if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,"pdfBase64.pdf");else{const e=URL.createObjectURL(a);window.open(e)}}var Pe=t(3193),Ie=t(9190),Ee=t(2221),Re=t(2143),Te=t(9413),ke=t(8577),Fe=t(3217),Oe=t(3368),Ve=t(8390),De=t(7537),Le=t(8452),Ue=t(1464),Me=t(1338),qe=t(5393),Be=t(2738),We=t(2502),He=t(378),Ye=t(310),ze=t(8082),Je=t(3471),Ge=t(852),Ke=t(9778),Ze=t(5502);const Qe=(0,q.Ay)((e=>(0,X.jsx)(He.A,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...e})))((e=>{let{theme:a}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:a.spacing(1),minWidth:180,color:"light"===a.palette.mode?"rgb(55, 65, 81)":a.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:a.palette.text.secondary,marginRight:a.spacing(1.5)},"&:active":{backgroundColor:(0,Ye.X4)(a.palette.primary.main,a.palette.action.selectedOpacity)}}}}}));const Xe=function(e){const a=e.styles,{bookingFormId:t}=(0,s.g)(),o=(0,i.wA)(),[d,c]=(0,n.useState)([]),[m,h]=(0,n.useState)({menuAnchor:null,modalType:null}),[A,x]=(0,n.useState)({id:"",note:"",requriesApproval:!1}),j=(0,r.S)(),f=(0,i.d4)((e=>e[l.bh].appPermissions)),{noteApprover:v}=f,[y,N]=(0,n.useState)(null);async function g(a){try{const n=e.baseURL+"/"+t+"/note",s="POST",i={"Content-Type":"application/json"};if("NEW"===a){const e=n+"?type=NEW",a=JSON.stringify({note:A.note,requriesApproval:A.requriesApproval}),t=await j({url:e,method:s,body:a,headers:i});return t.notes&&c(t.notes),o(u.sl.showAlert({message:"Record created",title:"Request Completed!",severity:"success"}))}if("EDIT"===a){const e=n+"?type=EDIT",a=JSON.stringify({id:A.id,note:A.note,requriesApproval:A.requriesApproval}),t=await j({url:e,method:s,body:a,headers:i});return t.notes&&c(t.notes),o(u.sl.showAlert({message:"Record updated!",title:"Request Completed!",severity:"success"}))}if("DELETE"===a){const e=n+"?type=DELETE",a=JSON.stringify({id:A.id}),t=await j({url:e,body:a,method:s,headers:i});return t.notes&&c(t.notes),o(u.sl.showAlert({message:"Record deleted!",title:"Request Completed!",severity:"success"}))}if("NOTE_APPROVE"===a||"NOTE_REJECT"===a){const n=e.baseURL+"/"+t+"/note-processing",i="NOTE_APPROVE"===a?"APPROVE":"REJECT",l=A.id,r=JSON.stringify({noteId:l,status:i}),d={"Content-Type":"application/json"},p=await j({url:n,body:r,method:s,headers:d});return p.notes&&c(p.notes),o(u.sl.showAlert({message:p.msg||"Record processed!",title:"Request Completed!",severity:"success"}))}o(u.sl.showAlert({message:"Type mismatch",title:"Request Failed!",severity:"warning"}))}catch(s){var n;o(u.sl.showAlert({message:null!==(n=s.msg)&&void 0!==n?n:"Failed to process request",title:"Request Failed!",severity:"error"}))}}function _(e){let{type:a,id:t,event:n}=e;if("MENU_OPEN"===a){const e=d.filter((e=>e.id===t))[0];if(!e)return alert("Failed to find note");h({menuAnchor:n.currentTarget,modalType:null}),x({id:e.id,note:e.note,requriesApproval:!!e.approval})}if("MODAL_OPEN_IN_EDIT"===a&&h({menuAnchor:null,modalType:"EDIT"}),"MODAL_OPEN_IN_NEW"===a&&(x({id:"",note:"",requriesApproval:!1}),h({menuAnchor:null,modalType:"NEW"})),"CLOSE"===a&&(h({menuAnchor:null,modalType:null}),x({id:"",note:"",requriesApproval:!1})),"PROCESS_SUBMISSION"===a&&(g(m.modalType),h({menuAnchor:null,modalType:null}),x({id:"",note:"",requriesApproval:!1})),"DELETE_RECORD"===a&&(g("DELETE"),h({menuAnchor:null,modalType:null}),x({id:"",note:"",requriesApproval:!1})),"TRACK_NOTE_UPDATE"===a){const e=n.target.name,a="note"===e?n.target.value:n.target.checked;x((t=>({...t,[e]:a})))}"NOTE_APPROVE"!==a&&"NOTE_REJECT"!==a||(g(a),h({menuAnchor:null,modalType:null}))}return(0,n.useEffect)((()=>{c(e.bookingFormData.notes)}),[e.bookingFormData]),(0,n.useEffect)((()=>{N(e.isEditable)}),[e.isEditable]),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("div",{className:"".concat(a.container," ").concat(a.bfNotes),children:(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:a.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Notes"]})}),(0,X.jsxs)("div",{className:a.data,style:{justifyContent:"flex-start"},children:[(0,p.A)(d)&&(0,X.jsx)("p",{style:{textAlign:"center",width:"100%"},children:"No notes found!"}),!(0,p.A)(d)&&d.map(((e,t)=>(0,X.jsxs)("div",{className:a.noteContainer,children:[(0,X.jsxs)("div",{children:[t>0&&d[t-1].from!==e.from&&(0,X.jsx)("div",{className:a.noteFrom,children:(0,X.jsx)("h3",{children:e.from})}),t<=0&&(0,X.jsx)("div",{className:a.noteFrom,children:(0,X.jsx)("h3",{children:e.from})}),(0,X.jsxs)("div",{className:a.note,children:[e.approval&&(0,X.jsxs)("div",{className:a.approvalInfo,children:[null===e.approval.status&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Be.A,{className:a.icon}),(0,X.jsx)("p",{children:"Approval Pending"})]}),!0===e.approval.status&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Me.A,{className:a.icon}),(0,X.jsxs)("p",{children:["Approved By ",e.approval.updatedBy]})]}),!1===e.approval.status&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(qe.A,{className:a.icon}),(0,X.jsxs)("p",{children:["Rejected By ",e.approval.updatedBy]})]})]}),(0,X.jsx)("p",{children:e.note})]})]}),(0,X.jsx)("div",{children:(0,X.jsx)(C.A,{onClick:a=>_({type:"MENU_OPEN",id:e.id,event:a}),children:(0,X.jsx)(ze.A,{})})})]},e.id))),(0,X.jsxs)(Qe,{id:"notes-menu",anchorEl:m.menuAnchor,open:Boolean(m.menuAnchor),onClose:e=>_({type:"CLOSE"}),children:[v&&A.requriesApproval&&[(0,X.jsxs)(Re.A,{onClick:e=>_({type:"NOTE_APPROVE"}),children:[(0,X.jsx)(Ke.A,{}),"Approve"]},"MenuItem_Approve"),(0,X.jsxs)(Re.A,{onClick:e=>_({type:"NOTE_REJECT"}),children:[(0,X.jsx)(Ze.A,{}),"Reject"]},"MenuItem_Reject"),(0,X.jsx)(b.A,{},"MenuItem_Divider")],(0,X.jsxs)(Re.A,{onClick:e=>_({type:"MODAL_OPEN_IN_EDIT"}),children:[(0,X.jsx)(Ge.A,{}),"Edit"]}),(0,X.jsxs)(Re.A,{onClick:e=>_({type:"DELETE_RECORD"}),children:[(0,X.jsx)(Je.A,{}),"Delete"]})]})]}),y&&(0,X.jsx)("div",{className:a.data,style:{justifyContent:"flex-end"},children:(0,X.jsx)(C.A,{style:{backgroundColor:"#90caf9"},onClick:e=>_({type:"MODAL_OPEN_IN_NEW"}),children:(0,X.jsx)(D.A,{sx:{color:"#000",fontSize:30}})})})]})}),(0,X.jsx)(Oe.A,{open:Boolean(m.modalType),keepMounted:!1,onClose:e=>_({type:"CLOSE"}),children:(0,X.jsxs)("div",{className:a.container+" "+a.modalNoteConatiner,children:[(0,X.jsx)(k.A,{className:a.closeIcon,onClick:e=>_({type:"CLOSE"})}),(0,X.jsxs)("div",{className:a.noteInputsContainer,children:[(0,X.jsx)(se.A,{className:a.noteTextField,label:"Note",placeholder:"Add a note",name:"note",fullWidth:!0,multiline:!0,minRows:2,maxRows:20,disabled:!y,value:A.note,required:!0,onChange:e=>_({type:"TRACK_NOTE_UPDATE",event:e})}),(0,X.jsx)(ke.A,{className:a.inputContainer,control:(0,X.jsx)(Fe.A,{}),label:"Requires Approval?",labelPlacement:"start",name:"requriesApproval",disabled:!y,sx:{justifyContent:"flex-end"},checked:A.requriesApproval,onChange:e=>_({type:"TRACK_NOTE_UPDATE",event:e})}),y&&(0,X.jsxs)("div",{className:a.noteActionsContainer,children:[(0,X.jsx)(R.A,{"data-mode":"MODAL","data-type":"CLOSE",onClick:e=>_({type:"CLOSE"}),children:"Cancel"}),(0,X.jsx)(R.A,{variant:"contained",onClick:e=>_({type:"PROCESS_SUBMISSION"}),children:"EDIT"===m.modalType?"Update":"Submit"})]})]})]})})]})};var $e=t(4536),ea=t(7260),aa=t(7539),ta=t(7445),na=t(9326),sa=t(9562);const ia=function(e){const a=e.styles,t=(0,r.S)(),[o,d]=(0,n.useState)(),[c,p]=(0,n.useState)(),m=(0,i.wA)(),{bookingFormId:h}=(0,s.g)(),A=(0,i.d4)((e=>e[l.bh])).employee.role;async function x(a){j();try{const n=e.baseURL+"/"+h+"/bookingform-processing",s="POST",i={"Content-Type":"application/json"};if(("RE_PROCESS"===a||"REJECT"===a)&&!o)return d(a);const l=JSON.stringify({status:a,note:c}),r=await t({url:n,method:s,headers:i,body:l});e.setReloadComp((e=>!e)),m(u.sl.showAlert({message:r.msg||"Request processed",title:"Request Submitted",severity:"success"}))}catch(i){var n,s;if(412===i.status)return m(u.sl.showAlert({message:null!==(s=i.msg)&&void 0!==s?s:"Failed to submit request!",title:"Request Failed!",severity:"warning",autoclose:!1}));m(u.sl.showAlert({message:null!==(n=i.msg)&&void 0!==n?n:"Failed to submit request!",title:"Request Failed!",severity:"error"}))}}function j(){d(),p()}return(e.isApprover||!1===e.isApprover)&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("div",{className:"".concat(a.container," ").concat(a.bfActions),children:(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:a.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Form Actions"]})}),(0,X.jsxs)("div",{className:a.data,children:["Project Head"!==A&&(0,X.jsx)(R.A,{variant:"outlined",endIcon:(0,X.jsx)(ta.A,{}),disabled:!e.isApprover,onClick:e=>x("RE_PROCESS"),children:"Re-Process"}),(0,X.jsx)(R.A,{variant:"outlined",endIcon:(0,X.jsx)(na.A,{}),disabled:!e.isApprover,onClick:e=>x("REJECT"),children:"Reject"}),(0,X.jsx)(R.A,{variant:"contained",endIcon:(0,X.jsx)(sa.A,{}),disabled:!e.isApprover,onClick:e=>x("APPROVE"),children:"Approve"})]})]})}),(0,X.jsx)(Oe.A,{open:Boolean(o),keepMounted:!1,onClose:j,children:(0,X.jsxs)("div",{className:a.container+" "+a.modalNoteConatiner,children:[(0,X.jsx)(k.A,{className:a.closeIcon,onClick:j}),(0,X.jsxs)("div",{className:a.noteInputsContainer,children:[(0,X.jsx)("p",{children:(0,X.jsxs)("strong",{children:["Would you like to add a note for ","RE_PROCESS"===o?"re-processing":"rejection","?"]})}),(0,X.jsx)(se.A,{className:a.noteTextField,placeholder:"Add a note",name:"note",value:c,fullWidth:!0,multiline:!0,minRows:2,maxRows:15,onChange:e=>p(e.target.value)}),(0,X.jsxs)("div",{className:a.noteActionsContainer,children:[(0,X.jsx)(R.A,{"data-mode":"MODAL","data-type":"CLOSE",onClick:j,children:"Cancel"}),(0,X.jsx)(R.A,{variant:"contained",onClick:e=>x(o),children:"Submit"})]})]})]})})]})};var la=t(3531),ra=t(2993);const oa=function(e){var a,t,n,s,i,l,r,o,d,c;const u=e.styles,p=new Intl.NumberFormat("en-IN",{currency:"INR"});return(0,X.jsxs)("div",{className:u.container+" "+u.quickViewConatiner,children:[(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{children:"Project"}),(0,X.jsx)("p",{children:null===e||void 0===e||null===(a=e.bookingFormData)||void 0===a||null===(t=a.Project)||void 0===t?void 0:t.name})]}),(0,X.jsx)(b.A,{orientation:"vertical",flexItem:!0}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{children:"Project Unit"}),(0,X.jsx)("p",{children:null===e||void 0===e||null===(n=e.bookingFormData)||void 0===n||null===(s=n.ProjectUnit)||void 0===s?void 0:s.name})]}),(0,X.jsx)(b.A,{orientation:"vertical",flexItem:!0}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{children:"Current Unit Price"}),(0,X.jsx)("p",{style:{textAlign:"center"},children:null!==e&&void 0!==e&&null!==(i=e.bookingFormData)&&void 0!==i&&i.currentUnitPrice?p.format(e.bookingFormData.currentUnitPrice):"-----"})]}),(0,X.jsx)(b.A,{orientation:"vertical",flexItem:!0}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{children:"Discount (\u20b9)"}),(0,X.jsx)("p",{style:{textAlign:"center"},children:null!==e&&void 0!==e&&null!==(l=e.bookingFormData)&&void 0!==l&&l.discount?p.format(e.bookingFormData.discount):"-----"})]}),(0,X.jsx)(b.A,{orientation:"vertical",flexItem:!0}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{children:"After Discount (\u20b9)"}),(0,X.jsx)("p",{style:{textAlign:"center"},children:null!==e&&void 0!==e&&null!==(r=e.bookingFormData)&&void 0!==r&&r.currentUnitPrice&&null!==e&&void 0!==e&&null!==(o=e.bookingFormData)&&void 0!==o&&o.discount?p.format((null===e||void 0===e?void 0:e.bookingFormData.currentUnitPrice)-(null===e||void 0===e?void 0:e.bookingFormData.discount)):"-----"})]}),(0,X.jsx)(b.A,{orientation:"vertical",flexItem:!0}),(0,X.jsxs)("div",{children:[(0,X.jsx)("h3",{children:"Realization Price"}),(0,X.jsx)("p",{style:{textAlign:"center"},children:null!==e&&void 0!==e&&null!==(d=e.bookingFormData)&&void 0!==d&&d.totalCost&&null!==e&&void 0!==e&&null!==(c=e.bookingFormData)&&void 0!==c&&c.sqft?p.format((null===e||void 0===e?void 0:e.bookingFormData.totalCost)/(null===e||void 0===e?void 0:e.bookingFormData.sqft)):"-----"})]})]})};var da=t(8446),ca=t(4914),ua=t(7500);const pa=function(e){const[a,t]=(0,n.useState)({icon:(0,X.jsx)(ca.A,{}),copy:!0,title:"Copy Link"}),s=(0,n.useMemo)((()=>"https://bookingform.concorde.in?f="+new URL(window.location).pathname.split("/")[2]),[]);return(0,X.jsxs)(be.A,{title:"Shareable URL",handelModelClose:function(){e.handelModelClose&&e.handelModelClose()},open:e.open,children:[(0,X.jsx)(da.A,{sx:{display:"block",textAlign:"center",marginY:2},target:"_blank",rel:"noreferrer",href:s,children:s}),(0,X.jsx)("div",{style:{maxWidth:"fit-content",marginInline:"auto"},children:(0,X.jsx)(x.A,{title:a.title,children:(0,X.jsx)(C.A,{onClick:function(){if(!a.copy)return;navigator.clipboard.writeText(s),t({icon:(0,X.jsx)(ua.A,{}),copy:!1,title:"Copied!"});const e=setTimeout((()=>{t({icon:(0,X.jsx)(ca.A,{}),copy:!0,title:"Copy Link"}),clearTimeout(e)}),5e3)},children:a.icon})})})]})},ma=(0,d.A)({container:"View_container__sQgk9","quick-view-conatiner":"View_quick-view-conatiner__45-CY","booking-form-conainter":"View_booking-form-conainter__H0lTA","bf-data":"View_bf-data__lQfgU","bf-actions":"View_bf-actions__olGmT","bf-notes":"View_bf-notes__ro1wl","approval-history-container":"View_approval-history-container__3Zwp-","note-container":"View_note-container__46qHo","note-from":"View_note-from__OCOek",note:"View_note__37jqP","approval-info":"View_approval-info__cVPnW",icon:"View_icon__nSRVe","header-information":"View_header-information__23IvD",data:"View_data__K17TZ","address-main-container":"View_address-main-container__JDmxu","input-container":"View_input-container__RqOjh","approver-container":"View_approver-container__H+Lt2",information:"View_information__xlilI",rejected:"View_rejected__-zQ4j",pending:"View_pending__atfyJ",approved:"View_approved__k0V9v","no-after-content":"View_no-after-content__Kag9e","img-viewer":"View_img-viewer__0FG2C","download-icon":"View_download-icon__ELeoh","close-icon":"View_close-icon__sVMwx","modal-note-conatiner":"View_modal-note-conatiner__bfoCJ","note-inputs-container":"View_note-inputs-container__53sF9","note-actions-container":"View_note-actions-container__PEmmn",required:"View_required__obQNA","address-container":"View_address-container__i7E2L","two-input-container":"View_two-input-container__F5aH+","wrong-input":"View_wrong-input__UFD2n",disabled:"View_disabled__TMt2s"}),ha=(0,d.A)(pe),Aa=["Male","Female","Other"],xa=["Indian","NRI"],ja=["Single","Married"],fa=["Same As Present Address","Different"],ba=["Self","Home Loan"],va=["UPI","Cheque","Online Banking","Cash Payment"],ya=["Yes","No"],Na={aadhar:{fileName:null,data:null},panCard:{fileName:null,data:null},applicant:{fileName:null,data:null},priceSheet:{fileName:null,data:null},coApplicant:{fileName:null,data:null},paymentConfirmation:{fileName:null,data:null}};const ga=function(e){var a,t,o,d,c,m,h,A,j,f,b,v,y,N,g,_,w,S,P,I,E,T,F,V,D,U,M,q,B,H,Y,z;const{bookingFormId:J}=(0,s.g)(),G=(0,i.wA)(),K=(0,n.useRef)(),Z=(0,r.S)(),Q=(0,s.Zp)(),[$,ee]=(0,n.useState)({imgSrc:"",imgAlt:"",type:""}),[ae,te]=(0,n.useState)({projects:[],projectUnits:[]}),[ne,le]=(0,n.useState)(),[re,oe]=(0,n.useState)(null),[de,ce]=(0,n.useState)(),[ue,pe]=(0,n.useState)(!1),[me,he]=(0,n.useState)(!1),Ae=(0,i.d4)((e=>e[l.bh])),{isEditable:xe,displayApprovalHistory:je}=Ae.appPermissions,[fe,be]=(0,n.useState)(null),[ve,ye]=(0,n.useState)({sourceWithSubSource:[],currentSubSourceForSource:[]}),[Ne,ge]=(0,n.useState)([]),Ce=["cp","c p","channel partner"],_e=[],we=(0,n.useCallback)((e=>{let a=ma.information+" ",t=(0,X.jsx)(X.Fragment,{});switch(e){case!0:a+=ma.approved,t=(0,X.jsx)(Me.A,{className:ma.icon});break;case!1:a+=ma.rejected,t=(0,X.jsx)(qe.A,{className:ma.icon});break;case null:a+=ma.pending,t=(0,X.jsx)(Be.A,{className:ma.icon})}return{containerClassName:a,iconToDisplay:t}}),[]);if(null!==ne&&void 0!==ne&&ne.approvals){const e=we(ne.approvals.projectHead.status),a=we(!(null!==ne.approvals.projectHead.status&&!ne.approvals.projectHead.status)&&ne.approvals.salesAndMarketingHead.status),t=we(!(null!==ne.approvals.projectHead.status&&!ne.approvals.projectHead.status||null!==ne.approvals.salesAndMarketingHead.status&&!ne.approvals.salesAndMarketingHead.status)&&ne.approvals.projectDirector.status);_e.push((0,X.jsx)("div",{className:ma.approverContainer,children:(0,X.jsxs)("div",{className:e.containerClassName,children:[e.iconToDisplay,(0,X.jsx)("p",{children:ne.approvals.projectHead.displayMessage})]})},1)),_e.push((0,X.jsx)("div",{className:ma.approverContainer,children:(0,X.jsxs)("div",{className:a.containerClassName,children:[a.iconToDisplay,(0,X.jsx)("p",{children:ne.approvals.salesAndMarketingHead.displayMessage})]})},2)),_e.push((0,X.jsx)("div",{className:ma.approverContainer,children:(0,X.jsxs)("div",{className:ma.noAfterContent+" "+t.containerClassName,children:[t.iconToDisplay,(0,X.jsx)("p",{children:ne.approvals.projectDirector.displayMessage})]})},3))}async function He(a){const t=a.target.dataset.type,n={imgSrc:"",imgAlt:"",type:t};async function s(){try{const a=e.baseURL+"/"+J+"/retrieve-attachments?retrieve="+t;return await Z({url:a})}catch(n){var a;return G(u.sl.showAlert({message:null!==(a=n.msg)&&void 0!==a?a:"Failed to fetch ".concat(t,"!"),title:"Request Failed!",severity:"error"})),null}}if("PAYMENT_COPY"===t){if((0,p.A)(Na.paymentConfirmation.data)){const e=await s();if(null===e)return;Na.paymentConfirmation.fileName=e.fileName,Na.paymentConfirmation.data=e.PAYMENT_COPY}if(Na.paymentConfirmation.fileName.endsWith(".pdf"))return void Se(Na.paymentConfirmation.data);n.imgSrc=Na.paymentConfirmation.data,n.imgAlt="Payment Confirmation: "+Na.paymentConfirmation.fileName}if("AADHAR_COPY"===t){if((0,p.A)(Na.aadhar.data)){const e=await s();if(null===e)return;Na.aadhar.fileName=e.fileName,Na.aadhar.data=e.AADHAR_COPY}if(Na.aadhar.fileName.endsWith(".pdf"))return void Se(Na.aadhar.data);n.imgSrc=Na.aadhar.data,n.imgAlt="Aadhar Card: "+Na.aadhar.fileName}if("PAN_COPY"===t){if((0,p.A)(Na.panCard.data)){const e=await s();if(null===e)return;Na.panCard.fileName=e.fileName,Na.panCard.data=e.PAN_COPY}if(Na.panCard.fileName.endsWith(".pdf"))return void Se(Na.panCard.data);n.imgSrc=Na.panCard.data,n.imgAlt="Pan Card: "+Na.panCard.fileName}if("PHOTO_OF_APPLICANT"===t){if((0,p.A)(Na.applicant.data)){const e=await s();if(null===e)return;Na.applicant.fileName=e.fileName,Na.applicant.data=e.PHOTO_OF_APPLICANT}if(Na.applicant.fileName.endsWith(".pdf"))return void Se(Na.applicant.data);n.imgSrc=Na.applicant.data,n.imgAlt="Photo Of Applicant: "+Na.applicant.fileName}if("PHOTO_OF_CO_APPLICANT"===t){if((0,p.A)(Na.coApplicant.data)){const e=await s();if(null===e)return;Na.coApplicant.fileName=e.fileName,Na.coApplicant.data=e.PHOTO_OF_CO_APPLICANT}if(Na.coApplicant.fileName.endsWith(".pdf"))return void Se(Na.coApplicant.data);n.imgSrc=Na.coApplicant.data,n.imgAlt="Photo Of Co-Applicant: "+Na.coApplicant.fileName}if("PRICE_SHEET"===t){if((0,p.A)(Na.priceSheet.data)){const e=await s();if(null===e)return;Na.priceSheet.fileName=e.fileName,Na.priceSheet.data=e.PRICE_SHEET}ce(),Se(Na.priceSheet.data)}ee(n)}function Ye(e){he(Boolean(null===e||void 0===e?void 0:e.target))}return(0,n.useEffect)((()=>{re&&window.location.reload()}),[re]),(0,n.useEffect)((()=>{(async()=>{try{var a;const t=e.baseURL+"/"+J+"/view",n=1,s=await Z({url:t,timeout:n}),i=["coApp_dateOfBirth","dateOfBirth"],l=["presentAddress","permanentAddress","coApp_presentAddress","coApp_permanentAddress","officeAddress","notes","approvalHistory"],r=["Project","ProjectUnit"];if((0,p.A)(s))throw Error("No Data Found");Object.keys(s).forEach((e=>{null!==s[e]?l.includes(e)&&"object"!==typeof s[e]?s[e]=JSON.parse(s[e]):i.includes(e)?s[e]=W()(s[e]):r.includes(e)&&(s[e]={...s[e],label:s[e].name}):s[e]=i.includes(e)?null:""})),Na.paymentConfirmation={fileName:null,data:null},Na.aadhar={fileName:null,data:null},Na.panCard={fileName:null,data:null},Na.applicant={fileName:null,data:null},Na.coApplicant={fileName:null,data:null},Na.priceSheet={fileName:null,data:null},le(s),pe(Ce.includes(null!==s&&void 0!==s&&null!==(a=s.source)&&void 0!==a&&a.label?s.source.label.toLowerCase():""))}catch(t){le({error:t})}})(),(async()=>{try{const e="/projects/list-all",a=await Z({url:e,showLoader:!1});te((e=>({...e,projects:a.map((e=>({...e,label:e.name})))})))}catch(a){var e;G(u.sl.showAlert({message:null!==(e=a.msg)&&void 0!==e?e:"Failed to fetch projects data!",title:"Request Failed!",severity:"error"}))}})(),(async()=>{try{const e="/source/retrive-source-with-subsource",a=await Z({url:e,showLoader:!1});ye((e=>({...e,sourceWithSubSource:a})))}catch(a){var e;G(u.sl.showAlert({message:null!==(e=a.msg)&&void 0!==e?e:"Failed to fetch source data!",title:"Request Failed!",severity:"error"}))}})()}),[]),(0,n.useEffect)((()=>{(async()=>{try{var e;if(null===ne||void 0===ne||null===(e=ne.Project)||void 0===e||!e.id)return;const a="/projects/".concat(null===ne||void 0===ne?void 0:ne.Project.id,"/fetch-units"),t=await Z({url:a});te((e=>({...e,projectUnits:t.map((e=>({...e,label:e.name})))})))}catch(t){var a;G(u.sl.showAlert({message:null!==(a=t.msg)&&void 0!==a?a:"Failed to fetch projects unit data!",title:"Request Failed!",severity:"error"}))}})()}),[null===ne||void 0===ne?void 0:ne.Project]),(0,n.useEffect)((()=>{void 0===(null===ne||void 0===ne?void 0:ne.status)||xe&&ne.status===fe||be(xe&&"Approved"!==ne.status)}),[xe,null===ne||void 0===ne?void 0:ne.status,fe]),(0,n.useEffect)((()=>{var e;if((0,p.A)(ve.sourceWithSubSource))return;if((0,p.A)(null===ne||void 0===ne||null===(e=ne.source)||void 0===e?void 0:e.id))return void ye((e=>({...e,currentSubSourceForSource:[]})));const a=ve.sourceWithSubSource.filter((e=>e.id===ne.source.id));if(Ce.includes(ne.source.label)&&(0,p.A)(Ne)){Z({url:"/channel-partner/view-all"}).then((e=>{const a=e.map((e=>({...e,label:e.name})));ge(a)})).catch((e=>{var a;G(u.sl.showAlert({message:null!==(a=e.msg)&&void 0!==a?a:"Failed to fetch source data!",title:"Request Failed!",severity:"error"}))}))}ye((e=>{var t;return{...e,currentSubSourceForSource:(null===(t=a[0])||void 0===t?void 0:t.subsources)||null}}))}),[null===ne||void 0===ne?void 0:ne.source,ve.sourceWithSubSource]),null!==ne&&void 0!==ne&&ne.error?(0,X.jsx)("div",{className:ma.container,children:(0,X.jsx)("h2",{style:{textAlign:"center"},children:ne.error.msg||'Failed to fetch booking form data from "'.concat(J,'"')})}):ne&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(oa,{styles:ma,bookingFormData:ne}),(0,X.jsx)("div",{className:ma.container,children:(0,X.jsxs)("div",{className:ha.toolBar,children:[(0,X.jsx)("div",{className:ha.left}),(0,X.jsxs)("div",{className:ha.right,children:[(0,X.jsx)("span",{className:ha.icon,children:(0,X.jsx)(x.A,{title:"New shareable link",children:(0,X.jsx)(C.A,{onClick:Ye,children:(0,X.jsx)(ra.A,{})})})}),(0,X.jsx)("span",{className:ha.icon,children:(0,X.jsx)(x.A,{title:"Refresh",children:(0,X.jsx)(C.A,{onClick:e=>oe((e=>!e)),children:(0,X.jsx)(L.A,{})})})}),(0,X.jsx)("span",{className:ha.icon,children:(0,X.jsx)(x.A,{title:"Download",children:(0,X.jsx)("span",{children:(0,X.jsx)(C.A,{disabled:!0,children:(0,X.jsx)(O.A,{})})})})}),(0,X.jsx)("span",{className:ha.icon,children:(0,X.jsx)(x.A,{title:"Re-Notify for approvals",children:(0,X.jsx)("span",{children:(0,X.jsx)(C.A,{disabled:!0,children:(0,X.jsx)(We.A,{})})})})}),(0,X.jsx)("span",{className:ha.icon,children:(0,X.jsx)(x.A,{title:"Unlock Booking Form",children:(0,X.jsx)("span",{children:(0,X.jsx)(C.A,{disabled:"Pending"===ne.status,onClick:async function(){try{if(!window.confirm("All the approval's progress will be lost. Would you like to proceed?"))return;const a=e.baseURL+"/"+J+"/reset-approvals-and-unlock-bookingform",t="POST",n={"content-type":"application/json"};await Z({url:a,method:t,headers:n}),oe((e=>!e))}catch(a){G(u.sl.showAlert({message:a.msg||"Failed to process request",title:"Request Failed!",severity:"error"}))}},children:(0,X.jsx)(la.A,{})})})})}),(0,X.jsx)("span",{className:ha.icon,children:(0,X.jsx)(x.A,{title:"Soft Delete",children:(0,X.jsx)("span",{children:(0,X.jsx)(C.A,{disabled:!0,children:(0,X.jsx)(Je.A,{})})})})})]})]})}),(0,X.jsxs)("main",{className:ma.bookingFormConainter,children:[(0,X.jsx)("form",{onSubmit:async function(a){try{a.preventDefault();const t={id:J};ne.dateOfBirth&&(t.dateOfBirth=ne.dateOfBirth),ne.coApp_dateOfBirth&&(t.coApp_dateOfBirth=ne.coApp_dateOfBirth),ne.Project&&(t.Project=ne.Project),ne.ProjectUnit&&(t.ProjectUnit=ne.ProjectUnit),ne.source&&(t.source=ne.source),ne.subsource&&(t.subsource=ne.subsource),ne.channelpartner&&(t.channelpartner=ne.channelpartner),ne.facing&&(t.facing=ne.facing);for(const e of a.target.elements){const a=e.type,n=e.name,s=e.value;if(["text","checkbox","number"].includes(a)&&n)if(n.includes(".")){const e=n.split(".");t[e[0]]||(t[e[0]]={}),t[e[0]][e[1]]=s}else t[n]="checkbox"===a?e.checked:s}const n=e.baseURL+"/"+J+"/update",s="POST",i=JSON.stringify(t),l={"Content-Type":"application/json"},r=await Z({url:n,method:s,body:i,headers:l});G(u.sl.showAlert({message:r.msg||"Record updated!",title:"Request Completed!",severity:"success"}))}catch(n){var t;G(u.sl.showAlert({message:null!==(t=n.msg)&&void 0!==t?t:"Failed to update record",title:"Request Failed!",severity:"error"}))}},onKeyDown:e=>"Enter"===e.key?e.preventDefault():"",children:(0,X.jsxs)("div",{className:"".concat(ma.container," ").concat(ma.bfData),children:[(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Personal Information"]})}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Full Name",name:"fullName",defaultValue:ne.fullName,disabled:!fe,required:!0}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Email Id",name:"emailId",defaultValue:ne.emailId,disabled:!fe}),(0,X.jsx)(Ve.$,{dateAdapter:Le.Y,children:(0,X.jsx)(De.l,{className:ma.inputContainer,label:"Date Of Birth",defaultValue:ne.dateOfBirth,name:"dateOfBirth",disabled:!fe,disableFuture:!0,onChange:e=>le((a=>({...a,dateOfBirth:e})))})}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,children:[(0,X.jsx)(Ie.A,{id:"Gender",children:"Gender"}),(0,X.jsx)(Ee.A,{labelId:"Gender",defaultValue:ne.gender,name:"gender",label:"Gender",disabled:!fe,children:Aa.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},"PI-".concat(e))))})]}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,children:[(0,X.jsx)(Ie.A,{id:"Nationality",children:"Nationality"}),(0,X.jsx)(Ee.A,{labelId:"Nationality",defaultValue:ne.nationality,name:"nationality",label:"Nationality",disabled:!fe,children:xa.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},"PI-".concat(e))))})]}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Mobile Number",defaultValue:ne.mobileNumber,name:"mobileNumber",disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Alternate Mobile Number",defaultValue:ne.alternateMobileNumber,name:"alternateMobileNumber",disabled:!fe}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,children:[(0,X.jsx)(Ie.A,{id:"MaritalStatus",children:"Marital Status"}),(0,X.jsx)(Ee.A,{labelId:"MaritalStatus",label:"MaritalStatus",defaultValue:ne.maritalStatus,name:"maritalStatus",disabled:!fe,children:ja.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},"PI-".concat(e))))})]}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,children:[(0,X.jsx)(Ie.A,{id:"wantToAdd_CoApp",children:"Want to add Co Applicant?"}),(0,X.jsx)(Ee.A,{labelId:"wantToAdd_CoApp",label:"PresentAddressType",defaultValue:ne.wantToAdd_CoApp,name:"wantToAdd_CoApp",onChange:e=>le((a=>({...a,wantToAdd_CoApp:e.target.value}))),children:ya.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},"PI-".concat(e))))})]}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,disabled:!0,children:[(0,X.jsx)(Ie.A,{id:"PresentAddressType",disabled:!0,children:"Present Address Type"}),(0,X.jsx)(Ee.A,{labelId:"PresentAddressType",label:"PresentAddressType",defaultValue:ne.permanentAddressType,name:"permanentAddressType",disabled:!0,children:fa.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},"PI-".concat(e))))})]})]}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsxs)("div",{className:ma.addressMainContainer,children:[(0,X.jsx)("label",{children:"Present Address"}),(0,X.jsxs)("div",{className:ma.addressContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(a=ne.presentAddress)||void 0===a?void 0:a.addressLine1,name:"presentAddress.addressLine1",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(t=ne.presentAddress)||void 0===t?void 0:t.addressLine2,name:"presentAddress.addressLine2",disabled:!fe}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"City",defaultValue:null===(o=ne.presentAddress)||void 0===o?void 0:o.city,name:"presentAddress.city",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"State",defaultValue:null===(d=ne.presentAddress)||void 0===d?void 0:d.state,name:"presentAddress.state",disabled:!fe})]}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Country",defaultValue:null===(c=ne.presentAddress)||void 0===c?void 0:c.country,name:"presentAddress.country",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Pincode",defaultValue:null===(m=ne.presentAddress)||void 0===m?void 0:m.pincode,name:"presentAddress.pincode",disabled:!fe})]})]})]}),(0,X.jsxs)("div",{className:ma.addressMainContainer,children:[(0,X.jsx)("label",{children:"Permanent Address"}),(0,X.jsxs)("div",{className:ma.addressContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(h=ne.permanentAddress)||void 0===h?void 0:h.addressLine1,name:"permanentAddress.addressLine1",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(A=ne.permanentAddress)||void 0===A?void 0:A.addressLine2,name:"permanentAddress.addressLine2",disabled:!fe}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"City",defaultValue:null===(j=ne.permanentAddress)||void 0===j?void 0:j.city,name:"permanentAddress.city",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"State",defaultValue:null===(f=ne.permanentAddress)||void 0===f?void 0:f.state,name:"permanentAddress.state",disabled:!fe})]}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Country",defaultValue:null===(b=ne.permanentAddress)||void 0===b?void 0:b.country,name:"permanentAddress.country",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Pincode",defaultValue:null===(v=ne.permanentAddress)||void 0===v?void 0:v.pincode,name:"permanentAddress.pincode",disabled:!fe})]})]})]})]})]}),"Yes"===ne.wantToAdd_CoApp&&(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Co-Applicant Information"]})}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Co-Applicant's Full Name",name:"coApp_FullName",defaultValue:ne.coApp_FullName,disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Co-Applicant's Email Id",name:"coApp_emailId",defaultValue:ne.coApp_emailId,disabled:!fe}),(0,X.jsx)(Ve.$,{dateAdapter:Le.Y,children:(0,X.jsx)(De.l,{className:ma.inputContainer,label:"Co-Applicant's Date Of Birth",defaultValue:ne.coApp_dateOfBirth,name:"coApp_dateOfBirth",disabled:!fe,disableFuture:!0,onChange:e=>le((a=>({...a,coApp_dateOfBirth:e})))})}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,children:[(0,X.jsx)(Ie.A,{id:"Co-Applicant's Gender",children:"Co-Applicant's Gender"}),(0,X.jsx)(Ee.A,{labelId:"Co-Applicant's Gender",defaultValue:ne.coApp_gender,name:"coApp_gender",label:"Co-Applicant's Gender",disabled:!fe,children:Aa.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},"PI-".concat(e))))})]}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,children:[(0,X.jsx)(Ie.A,{id:"Co-Applicant's Nationality",children:"Co-Applicant's Nationality"}),(0,X.jsx)(Ee.A,{labelId:"Co-Applicant's Nationality",defaultValue:ne.coApp_nationality,name:"coApp_nationality",label:"Co-Applicant's Nationality",disabled:!fe,children:xa.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},"PI-".concat(e))))})]}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Co-Applicant's Mobile Number",defaultValue:ne.coApp_mobileNumber,name:"coApp_mobileNumber",disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Co-Applicant's Alternate Mobile Number",defaultValue:ne.coApp_alternateMobileNumber,name:"coApp_alternateMobileNumber",disabled:!fe}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,children:[(0,X.jsx)(Ie.A,{id:"coApp_maritalStatus",children:"Co-Applicant's Marital Status"}),(0,X.jsx)(Ee.A,{labelId:"coApp_maritalStatus",label:"Co-Applicant's Marital Status",defaultValue:ne.coApp_maritalStatus,name:"coApp_maritalStatus",disabled:!fe,children:ja.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},"PI-".concat(e))))})]}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,disabled:!0,children:[(0,X.jsx)(Ie.A,{id:"Co-Applicant's PresentAddressType",disabled:!0,children:"Co-Applicant's PresentAddressType"}),(0,X.jsx)(Ee.A,{labelId:"Co-Applicant's PresentAddressType",label:"Co-Applicant's PresentAddressType",defaultValue:ne.coApp_permanentAddressType,name:"coApp_permanentAddressType",disabled:!0,children:fa.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},"PI-".concat(e))))})]})]}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsxs)("div",{className:ma.addressMainContainer,children:[(0,X.jsx)("label",{children:"Co-Applicant's Present Address"}),(0,X.jsxs)("div",{className:ma.addressContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(y=ne.coApp_presentAddress)||void 0===y?void 0:y.addressLine1,name:"coApp_presentAddress.addressLine1",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(N=ne.coApp_presentAddress)||void 0===N?void 0:N.addressLine2,name:"coApp_presentAddress.addressLine2",disabled:!fe}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"City",defaultValue:null===(g=ne.coApp_presentAddress)||void 0===g?void 0:g.city,name:"coApp_presentAddress.city",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"State",defaultValue:null===(_=ne.coApp_presentAddress)||void 0===_?void 0:_.state,name:"coApp_presentAddress.state",disabled:!fe})]}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Country",defaultValue:null===(w=ne.coApp_presentAddress)||void 0===w?void 0:w.country,name:"coApp_presentAddress.country",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Pincode",defaultValue:null===(S=ne.coApp_presentAddress)||void 0===S?void 0:S.pincode,name:"coApp_presentAddress.pincode",disabled:!fe})]})]})]}),(0,X.jsxs)("div",{className:ma.addressMainContainer,children:[(0,X.jsx)("label",{children:"Co-Applicant's Permanent Address"}),(0,X.jsxs)("div",{className:ma.addressContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(P=ne.coApp_permanentAddress)||void 0===P?void 0:P.addressLine1,name:"coApp_permanentAddress.addressLine1",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(I=ne.coApp_permanentAddress)||void 0===I?void 0:I.addressLine2,name:"coApp_permanentAddress.addressLine2",disabled:!fe}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"City",defaultValue:null===(E=ne.coApp_permanentAddress)||void 0===E?void 0:E.city,name:"coApp_permanentAddress.city",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"State",defaultValue:null===(T=ne.coApp_permanentAddress)||void 0===T?void 0:T.state,name:"coApp_permanentAddress.state",disabled:!fe})]}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Country",defaultValue:null===(F=ne.coApp_permanentAddress)||void 0===F?void 0:F.country,name:"coApp_permanentAddress.country",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Pincode",defaultValue:null===(V=ne.coApp_permanentAddress)||void 0===V?void 0:V.pincode,name:"coApp_permanentAddress.pincode",disabled:!fe})]})]})]})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Project Information"]})}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(ie.A,{className:ma.inputContainer,disablePortal:!0,options:ae.projects,value:ne.Project,onChange:function(e,a){le((e=>({...e,Project:a,ProjectUnit:null}))),a||te((e=>({...e,projectUnits:[]})))},isOptionEqualToValue:(e,a)=>e.id===a.id,noOptionsText:"Fetching Projects Data..",renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Projects",required:!0}),disabled:!fe}),(0,X.jsx)(ie.A,{className:ma.inputContainer,disablePortal:!0,options:ae.projectUnits,value:ne.ProjectUnit,onChange:(e,a)=>le((e=>({...e,ProjectUnit:a}))),isOptionEqualToValue:(e,a)=>e.id===a.id,noOptionsText:"Please select a project to show its related units",renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Project Units",required:!0}),disabled:!fe})]}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Current Unit Price",name:"currentUnitPrice",defaultValue:ne.currentUnitPrice,type:"number",disabled:!fe,required:!0}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Total cost",name:"totalCost",defaultValue:ne.totalCost,type:"number",disabled:!fe,required:!0}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Land Area / BUA / SBA (Sft)",name:"sqft",type:"number",defaultValue:ne.sqft,disabled:!fe,required:!0}),(0,X.jsx)(ie.A,{className:ma.inputContainer,disablePortal:!0,options:["North","South","East","West"],value:ne.facing,onChange:(e,a)=>le((e=>({...e,facing:a}))),isOptionEqualToValue:(e,a)=>e===a,renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Facing",required:!0}),disabled:!fe})]}),(0,X.jsx)("div",{className:ma.data,children:(0,X.jsxs)(Te.A,{row:!0,sx:{justifyContent:"center",width:"50%",marginLeft:15},children:[(0,X.jsx)(ke.A,{className:ma.inputContainer,control:(0,X.jsx)(Fe.A,{}),label:"Corner",labelPlacement:"end",checked:ne.corner,name:"corner",onChange:e=>le((a=>({...a,corner:e.target.checked}))),disabled:!fe}),(0,X.jsx)(ke.A,{className:ma.inputContainer,control:(0,X.jsx)(Fe.A,{}),label:"Park Facing",labelPlacement:"end",checked:ne.parkFacing,name:"parkFacing",onChange:e=>le((a=>({...a,parkFacing:e.target.checked}))),disabled:!fe})]})})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Payment Information"]})}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsxs)(Pe.A,{className:ma.inputContainer,children:[(0,X.jsx)(Ie.A,{id:"ModeOfPayment",children:"Mode Of Payment"}),(0,X.jsx)(Ee.A,{labelId:"ModeOfPayment",label:"ModeOfPayment",name:"modeOfPayment",defaultValue:ne.modeOfPayment,disabled:!fe,children:ba.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},e)))})]}),(0,X.jsxs)(Pe.A,{className:ma.inputContainer,children:[(0,X.jsx)(Ie.A,{id:"PaymentType",children:"Payment Type"}),(0,X.jsx)(Ee.A,{labelId:"PaymentType",label:"PaymentType",name:"paymentType",defaultValue:ne.paymentType,disabled:!fe,children:va.map((e=>(0,X.jsx)(Re.A,{value:e,children:e},e)))})]}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Booking Amount Paid",type:"number",name:"bookingAmountPaid",defaultValue:ne.bookingAmountPaid,disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Discount In Rs (\u20b9)",type:"number",name:"discount",defaultValue:ne.discount,disabled:!fe})]}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(R.A,{variant:"outlined","data-type":"PAYMENT_COPY",onClick:He,children:"View Payment Confirmation"}),(0,X.jsx)(R.A,{variant:"outlined",onClick:e=>ce(e.currentTarget),endIcon:(0,X.jsx)($e.A,{}),children:"Price Sheet"})]}),(0,X.jsxs)(Qe,{id:"notes-menu",anchorEl:de,open:Boolean(de),onClose:e=>ce(),children:[(0,X.jsxs)(Re.A,{"data-type":"PRICE_SHEET",onClick:He,children:[(0,X.jsx)(ea.A,{}),"View"]}),(0,X.jsxs)(Re.A,{"data-from":"MENU_ITEM",disabled:!fe,onClick:function a(t){const n=t.target.dataset.from;if("MENU_ITEM"===n){const e=document.createElement("input");e.style.display="none",e.type="file",e.accept="application/pdf",e.dataset.from="INPUT_ELEM";const t=()=>{document.body.removeEventListener("focus",t,!0),setTimeout((()=>{document.body.removeChild(e)}),1e3)};document.body.addEventListener("focus",t,!0),document.body.appendChild(e),e.onchange=a,e.click()}if("INPUT_ELEM"===n){const a=t.target.files[0],n=a.type,s=a.name;if("application/pdf"!==n)return G(u.sl.showAlert({message:"Only PDF file types are supported!",title:"Request Failed!",severity:"error"}));if(!window.confirm("Filename: ".concat(s,"\nAre you sure that you want to upload this file?")))return;const i=new FileReader;i.readAsDataURL(a),i.onload=async()=>{try{const a=e.baseURL+"/"+J+"/upload-attachments?upload=PRICE_SHEET",t="POST",l={"content-type":"application/json"},r=i.result.split(",")[1],o=JSON.stringify({fileName:s,type:n,data:r}),d=await Z({url:a,method:t,body:o,headers:l});Na.priceSheet.fileName=s,Na.priceSheet.data=r,G(u.sl.showAlert({message:d.msg||"Document upload successfully",title:"Request Completed!",severity:"success"})),ce()}catch(a){G(u.sl.showAlert({message:a.msg||"Document upload failed",title:"Request Failed!",severity:"error"}))}}}},children:[(0,X.jsx)(aa.A,{}),"Upload New"]})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"KYC Documents"]})}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Aadhar Number",name:"aadharNumber",defaultValue:ne.aadharNumber,disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"PAN Number",name:"PANNumber",defaultValue:ne.PANNumber,disabled:!fe}),(0,X.jsx)(R.A,{variant:"outlined","data-type":"AADHAR_COPY",onClick:He,children:"Photo Copy Of Aadhar"}),(0,X.jsx)(R.A,{variant:"outlined","data-type":"PAN_COPY",onClick:He,children:"Photo Copy Of PAN"}),(0,X.jsx)(R.A,{variant:"outlined","data-type":"PHOTO_OF_APPLICANT",onClick:He,children:"photo copy Of Applicant"}),"Yes"===ne.wantToAdd_CoApp&&(0,X.jsx)(R.A,{variant:"outlined","data-type":"PHOTO_OF_CO_APPLICANT",onClick:He,children:"photo copy Of co Applicant"})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Source / Channel Partner Information"]})}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(ie.A,{className:ma.inputContainer,disablePortal:!0,options:ve.sourceWithSubSource.map((e=>({id:e.id,label:e.label}))),value:ne.source,onChange:function(e,a){const t=Ce.includes(a.label.toLowerCase());pe(t),le((e=>({...e,source:a,subsource:null,channelpartner:t?e.channelpartner:null})))},isOptionEqualToValue:(e,a)=>e.id===a.id,loadingText:"Fetching source infromation",renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Source",required:!0}),disabled:!fe}),(0,X.jsx)(ie.A,{className:ma.inputContainer,disablePortal:!0,options:ve.currentSubSourceForSource,value:ne.subsource,onChange:(e,a)=>le((e=>({...e,subsource:a}))),isOptionEqualToValue:(e,a)=>e.id===a.id,renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Sub Source"}),disabled:!fe}),ue&&(0,X.jsx)(ie.A,{className:ma.inputContainer,disablePortal:!0,options:Ne,value:ne.channelpartner,onChange:(e,a)=>le((e=>({...e,channelpartner:a}))),isOptionEqualToValue:(e,a)=>e.id===a.id,renderInput:e=>(0,X.jsx)(se.A,{...e,label:"Channel Partner",required:!0}),disabled:!fe})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Professional Information"]})}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Company Name",defaultValue:ne.companyName,name:"companyName",disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Profession",defaultValue:ne.profession,name:"profession",disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Occupation",defaultValue:ne.occupation,name:"occupation",disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Designation",defaultValue:ne.designation,name:"designation",disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Industry",defaultValue:ne.industry,name:"industry",disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Annual Income",defaultValue:ne.annualIncome,name:"annualIncome",disabled:!fe}),(0,X.jsxs)("div",{className:ma.addressMainContainer,children:[(0,X.jsx)("label",{children:"Office Address"}),(0,X.jsxs)("div",{className:ma.addressContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 1",defaultValue:null===(D=ne.officeAddress)||void 0===D?void 0:D.addressLine1,name:"officeAddress.addressLine1",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Address Line 2",defaultValue:null===(U=ne.officeAddress)||void 0===U?void 0:U.addressLine2,name:"officeAddress.addressLine2",disabled:!fe}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"City",defaultValue:null===(M=ne.officeAddress)||void 0===M?void 0:M.city,name:"officeAddress.city",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"State",defaultValue:null===(q=ne.officeAddress)||void 0===q?void 0:q.state,name:"officeAddress.state",disabled:!fe})]}),(0,X.jsxs)("div",{className:ma.twoInputContainer,children:[(0,X.jsx)(se.A,{fullWidth:!0,label:"Country",defaultValue:null===(B=ne.officeAddress)||void 0===B?void 0:B.country,name:"officeAddress.country",disabled:!fe}),(0,X.jsx)(se.A,{fullWidth:!0,label:"Pincode",defaultValue:null===(H=ne.officeAddress)||void 0===H?void 0:H.pincode,name:"officeAddress.pincode",disabled:!fe})]})]})]})]})]}),(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Other Information"]})}),(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(ke.A,{className:ma.inputContainer,control:(0,X.jsx)(Fe.A,{}),label:"Submitted by user",labelPlacement:"end",checked:ne.submittedByUser,name:"submittedByUser",onChange:e=>le((a=>({...a,submittedByUser:e.target.checked}))),disabled:!fe}),(0,X.jsx)(ke.A,{className:ma.inputContainer,defaultValue:ne.agreedToTermsAndCondition,control:(0,X.jsx)(Fe.A,{}),label:"Agreed to terms & condition",disabled:!0,labelPlacement:"end"}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Purpose Of Purchase",name:"purposeOfPurchase",defaultValue:ne.purposeOfPurchase,disabled:!fe}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Created By",value:null===(Y=ne.BookingFormCreatedBy)||void 0===Y?void 0:Y.name,disabled:!0}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Updated By",value:null===(z=ne.BookingFormUpdatedBy)||void 0===z?void 0:z.name,disabled:!0}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Created At",value:W()(ne.createdAt).format("DD/MM/YYYY HH:MM:SS A"),disabled:!0}),(0,X.jsx)(se.A,{className:ma.inputContainer,label:"Updated At",value:W()(ne.updatedAt).format("DD/MM/YYYY HH:MM:SS A"),disabled:!0})]})]}),fe&&(0,X.jsx)("section",{children:(0,X.jsxs)("div",{className:ma.data,children:[(0,X.jsx)(R.A,{variant:"outlined",onClick:e=>Q(".."),children:"Cancel"}),(0,X.jsx)(R.A,{variant:"contained",type:"submit",children:"Save"})]})})]})}),(0,X.jsxs)("aside",{children:[(0,X.jsx)("div",{className:"".concat(ma.container," ").concat(ma.bfNotes),children:(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Approvals"]})}),(0,X.jsx)("div",{className:ma.data,children:_e})]})}),(0,X.jsx)(Xe,{styles:ma,baseURL:e.baseURL,bookingFormData:ne,isEditable:fe}),(0,X.jsx)(ia,{styles:ma,baseURL:e.baseURL,setReloadComp:oe,isApprover:ne.isApprover}),!(0,p.A)(ne.approvalHistory)&&je&&(0,X.jsx)("div",{className:"".concat(ma.container," ").concat(ma.bfActions),children:(0,X.jsxs)("section",{children:[(0,X.jsx)("div",{className:ma.headerInformation,children:(0,X.jsxs)("p",{children:[(0,X.jsx)(C.A,{disableFocusRipple:!0,disableRipple:!0,children:(0,X.jsx)(Ue.A,{})}),"Approval History"]})}),(0,X.jsx)("div",{className:ma.data,style:{maxHeight:"40vh",overflow:"auto"},children:ne.approvalHistory.map((e=>(0,X.jsx)("div",{className:ma.approvalHistoryContainer,children:(0,X.jsx)("div",{children:(0,X.jsxs)("div",{className:ma.note,children:[(0,X.jsxs)("p",{children:[e.status+" ","on",W()(e.timestamp).isValid((()=>{}))?W()(e.timestamp).utcOffset("+05:30").format(" DD/MM/YY [at] hh:mm A"):e.timestamp]}),!(0,p.A)(e.note)&&(0,X.jsxs)("p",{children:[(0,X.jsxs)("strong",{children:[(0,X.jsx)("em",{children:"Note"})," : "]}),e.note]})]})})},e.timestamp)))})]})})]})]}),(0,X.jsx)(pa,{open:me,handelModelClose:Ye}),(0,X.jsx)(Oe.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1,backgroundColor:"rgba(0,0,0, .8)"},open:Boolean($.imgSrc),onClose:()=>ee({imgSrc:"",imgAlt:""}),children:(0,X.jsxs)("div",{children:[(0,X.jsx)(O.A,{className:ma.downloadIcon,onClick:function(){}}),(0,X.jsx)(k.A,{className:ma.closeIcon,onClick:()=>ee({imgSrc:"",imgAlt:""})}),(0,X.jsx)("img",{className:ma.imgViewer,ref:K,src:"data:image/png;base64,"+$.imgSrc,alt:$.imgAlt})]})})]})},Ca=(0,n.lazy)((()=>t.e(43).then(t.bind(t,3043))));function _a(e){const{bookingFormId:a}=(0,s.g)();return(0,X.jsx)(s.C5,{to:"".concat(e.baseURL,"/").concat(a,"/view"),replace:!0})}const wa=function(){const e=(0,i.wA)(),a=(0,r.S)(),t=(0,s.Zp)(),d="/booking-form",[c,u]=(0,n.useState)([]),p=(0,n.useMemo)((()=>[{index:!0,element:(0,X.jsxs)(n.Suspense,{fallback:(0,X.jsx)(o.A,{fallback:!0}),children:[(0,X.jsx)(Ca,{baseURL:d}),","]})},{path:"view",element:(0,X.jsx)(n.Suspense,{fallback:(0,X.jsx)(o.A,{fallback:!0}),children:(0,X.jsx)(we,{baseURL:d})})},{path:"/:bookingFormId",element:(0,X.jsx)(_a,{baseURL:d})},{path:":bookingFormId/view",element:(0,X.jsx)(n.Suspense,{fallback:(0,X.jsx)(o.A,{fallback:!0}),children:(0,X.jsx)(ga,{baseURL:d})})},{path:"reports",element:(0,X.jsx)(n.Suspense,{fallback:(0,X.jsx)(o.A,{fallback:!0}),children:(0,X.jsx)("p",{children:"Will be added soon"})})},{path:"*",element:(0,X.jsx)(n.Suspense,{fallback:(0,X.jsx)(o.A,{fallback:!0}),children:(0,X.jsx)(s.C5,{to:"/error",state:{statusText:"Page Not Found!",status:404}})})}]),[]);return(0,n.useEffect)((()=>{(async()=>{try{const t=await a({url:"/apps/booking-form/app-headers"});if(!t)return;e(l.hw.setHeaders({currentApp:"Booking Form",appTabs:t.allowedtabs.map((e=>({...e,baseURL:d}))),appPermissions:t.permissions})),u(p)}catch(n){t("/error",{state:{status:n.status,data:n.msg}})}})()}),[e,t,p,a]),(0,s.Ye)(c)}},3962:(e,a,t)=>{t.d(a,{A:()=>i});var n=t(6878),s=t(8298);const i=function(e){const a=(0,s.d4)((e=>e[n.bh])).appTabs;return[a.filter((a=>a.endpoint===e)).length>0,a]}}}]);
//# sourceMappingURL=205.56d46fc0.chunk.js.map