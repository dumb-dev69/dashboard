"use strict";(self.webpackChunkmy_admin=self.webpackChunkmy_admin||[]).push([[217],{2217:(e,a,n)=>{n.r(a),n.d(a,{default:()=>S});var t=n(3216),i=n(8298),l=n(6878),s=n(3843),o=n(5043),r=n(2843),d=n(703),c=n(2991),m=n(6446),u=n(3336),h=n(1045),p=n(5865),x=n(9336),A=n(1906),v=n(3193),f=n(9190),j=n(4050),g=n(1787),b=n(7392),C=n(3159);var y=n(579);const N=(0,s.A)({container:"Profile_container__GGmEg",data:"Profile_data__1AeJ-","input-container":"Profile_input-container__lGpS4"});const R=function(e){var a,n;const[s,R]=(0,o.useState)(!0),[F,S]=(0,o.useState)({}),U=(0,r.S)(),w=(0,i.wA)(),{employeeId:_}=(0,t.g)(),P=(0,i.d4)((e=>e[l.bh])).employee.id,L=!!(0,c.A)(_)||P===_;function k(){s||S((e=>({...e.old,old:e.old}))),R((e=>!e))}function q(e){const a=e.target.name,n=e.target.value;S((e=>({...e,[a]:n})))}return(0,o.useEffect)((()=>{(async()=>{try{const a=e.baseURL+((0,c.A)(_)?"/info":"/".concat(_,"/info")),n="GET",t=await U({url:a,method:n});t.avatarName="";const i=t.name.trim().split(" ");(null===i||void 0===i?void 0:i.length)>1?t.avatarName=i[0].charAt(0).toUpperCase()+i[1].charAt(0).toUpperCase():t.avatarName=i[0].charAt(0).toUpperCase(),S({...t,old:t})}catch(a){w(d.sl.showAlert({message:a.msg||"Failed to fetch user info",title:"Request Failed!",severity:"error"}))}})()}),[w,_,e.baseURL,U]),(0,y.jsxs)("div",{className:N.container,children:[(0,y.jsx)(m.A,{sx:{textAlign:"center"},children:(0,y.jsxs)(u.A,{elevation:3,sx:{p:2},children:[(0,y.jsx)(h.A,{sx:{width:76,height:76,margin:"auto",fontSize:40},children:F.avatarName}),(0,y.jsx)(p.A,{variant:"h4",component:"h2",marginTop:2,children:null===(a=F.id)||void 0===a?void 0:a.toUpperCase()})]})}),(0,y.jsxs)("form",{onSubmit:async function(a){try{a.preventDefault();const n=e.baseURL+"/profile/update",t="POST",i={"content-type":"application/json"},l=JSON.stringify({name:F.name,phone:F.phone,id:F.id}),s=await U({url:n,method:t,body:l,headers:i});w(d.sl.showAlert({message:s.msg||"Updated Successfully",title:"Request Completed!",severity:"success"})),R(!0)}catch(n){w(d.sl.showAlert({message:n.msg||"Failed to update user info",title:"Request Failed!",severity:"error"}))}},children:[(0,y.jsxs)("div",{className:N.data,children:[(0,y.jsxs)(v.A,{variant:"outlined",className:N.inputContainer,children:[(0,y.jsx)(f.A,{htmlFor:"role",children:"Role"}),(0,y.jsx)(j.A,{id:"role",label:"role",disabled:!0,defaultValue:"Role",value:null===(n=F.Role)||void 0===n?void 0:n.name})]}),(0,y.jsxs)(v.A,{variant:"outlined",className:N.inputContainer,children:[(0,y.jsx)(f.A,{htmlFor:"email",children:"Email"}),(0,y.jsx)(j.A,{id:"email",label:"Email",disabled:!0,defaultValue:"Email",value:F.email})]}),(0,y.jsxs)(v.A,{variant:"outlined",className:N.inputContainer,required:!0,children:[(0,y.jsx)(f.A,{htmlFor:"name",children:"Full Name"}),(0,y.jsx)(j.A,{id:"name",endAdornment:s&&L&&(0,y.jsx)(g.A,{position:"end",children:(0,y.jsx)(b.A,{"aria-label":"toggle edit option",edge:"end",onClick:k,children:(0,y.jsx)(C.A,{fontSize:"small"})})}),label:"Full Name",name:"name",defaultValue:"Full Name",disabled:s,onChange:q,required:!0,value:F.name})]}),(0,y.jsxs)(v.A,{variant:"outlined",className:N.inputContainer,required:!0,children:[(0,y.jsx)(f.A,{htmlFor:"phone",children:"Phone"}),(0,y.jsx)(j.A,{id:"phone",endAdornment:s&&L&&(0,y.jsx)(g.A,{position:"end",children:(0,y.jsx)(b.A,{"aria-label":"toggle edit option",edge:"end",onClick:k,children:(0,y.jsx)(C.A,{fontSize:"small"})})}),label:"Phone",name:"phone",defaultValue:"Phone",disabled:s,onChange:q,required:!0,value:F.phone})]})]}),!s&&L&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.A,{sx:{marginTop:2}}),(0,y.jsxs)("div",{className:N.data,children:[(0,y.jsx)(A.A,{variant:"outlined",onClick:k,children:"Cancel"}),(0,y.jsx)(A.A,{variant:"contained",type:"submit",children:"Save"})]})]})]})]})};function F(e){const{employeeId:a}=(0,t.g)();return(0,y.jsx)(t.C5,{to:"".concat(e.baseURL,"/").concat(a,"/view"),replace:!0})}const S=function(e){const a="/profile";return(0,i.wA)()(l.hw.setHeaders({currentApp:"Account Settings",appTabs:[{name:"Profile",endpoint:"info",baseURL:a}],appPermissions:{}})),(0,t.Ye)([{index:!0,element:(0,y.jsx)(t.C5,{to:"info",relative:"path",replace:!0})},{path:":employeeId",element:(0,y.jsx)(F,{baseURL:a})},{path:":employeeId/info",element:(0,y.jsx)(R,{baseURL:a})},{path:"info",element:(0,y.jsx)(R,{baseURL:a})},{path:"*",element:(0,y.jsx)(t.C5,{to:"/error",state:{statusText:"Page Not Found!",status:404}})}])}},3159:(e,a,n)=>{var t=n(4994);a.A=void 0;var i=t(n(39)),l=n(579);a.A=(0,i.default)((0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=217.0318b4d0.chunk.js.map